/*! @license pzpr.js v7f9addbe (c) 2009-2025 sabo2, MIT license
 *   https://github.com/sabo2/pzprv3 */
!function(e,t){"object"==typeof module&&module.exports?module.exports=[e,t]:pzpr.classmgr.makeCustom(e,t)}(["triplace"],{MouseEvent:{inputModes:{edit:["clear","number"],play:["border","subline","bgcolor","bgcolor1","bgcolor2","clear"]},mouseinput_clear:function(){this.puzzle.playmode?this.inputclean_cell():this.input51_fixed()},mouseinput_number:function(){this.mousestart&&this.inputqnum_cell51()},mouseinput_auto:function(){this.puzzle.playmode?this.mousestart||this.mousemove?this.puzzle.key.isZ?this.inputBGcolor():"left"===this.btn&&this.isBorderMode()?this.inputborder():this.inputQsubLine():this.mouseend&&this.notInputted()&&this.inputBGcolor():this.puzzle.editmode&&this.mousestart&&this.input51()}},KeyEvent:{enablemake:!0,keyinput:function(e){this.inputnumber51(e)}},Cell:{disInputHatena:!0,getmaxnum:function(){var e=this.board;return this.puzzle.cursor.detectTarget(this)===this.RT?e.cols-(this.bx>>1)-1:e.rows-(this.by>>1)-1},minnum:0,set51cell:function(){this.setQues(51),this.setQnum(-1),this.setQnum2(-1),this.set51aroundborder()},remove51cell:function(){this.setQues(0),this.setQnum(-1),this.setQnum2(-1),this.set51aroundborder()},set51aroundborder:function(){for(var e=this.getdir4cblist(),t=0;t<e.length;t++){var s=e[t][0],r=e[t][1];r.isnull||r.setQues(this.is51cell()^s.is51cell()?1:0)}}},ExCell:{disInputHatena:!0,ques:51,getmaxnum:function(){var e=this.board;return-1===this.by?e.rows:e.cols},minnum:0},Border:{prehook:{qans:function(){return this.sidecell[0].isnull||this.sidecell[1].isnull||51===this.sidecell[0].ques||51===this.sidecell[1].ques}}},Board:{hasborder:1,hasexcell:1},BoardExec:{adjustBoardData:function(e,t){this.adjustQues51_1(e,t)},adjustBoardData2:function(e,t){this.adjustQues51_2(e,t)}},AreaRoomGraph:{enabled:!0,isnodevalid:function(e){return!e.is51cell()},setExtraData:function(e){e.clist=new this.klass.CellList(e.getnodeobjs());var t=e.clist.getRectSize();e.is1x3=(t.x1===t.x2||t.y1===t.y2)&&3===t.cnt}},Graphic:{gridcolor_type:"LIGHT",getBGCellColor:function(e){return 1===e.error?this.errbcolor1:51===e.ques?"rgb(192,192,192)":this.getBGCellColor_qsub2(e)},getBGExCellColor:function(e){return e.error?this.errbcolor1:"rgb(192,192,192)"},paint:function(){this.drawBGCells(),this.drawBGExCells(),this.drawQues51(),this.drawGrid(),this.drawQansBorders(),this.drawQuesBorders(),this.drawBorderQsubs(),this.drawChassis_ex1(!1),this.drawQuesNumbersOn51(),this.drawTarget()}},Encode:{decodePzpr:function(e){this.decodeTriplace()},encodePzpr:function(e){this.encodeTriplace()},decodeTriplace:function(){var e=0,t=0,s=this.outbstr,r=this.board;r.disableInfo();for(var n=0;n<s.length;n++){var i=s.charAt(n),o=r.cell[e];if("g"<=i&&i<="z"?e+=parseInt(i,36)-16:(o.set51cell(),"_"!==i&&("%"===i||"@"===i?(o.qnum2=parseInt(s.charAt(n+1),36),n++):"$"===i?(o.qnum=parseInt(s.charAt(n+1),36),n++):"-"===i?(o.qnum2="."!==s.charAt(n+1)?parseInt(s.charAt(n+1),16):-1,o.qnum=parseInt(s.substr(n+2,2),16),n+=3):"+"===i?(o.qnum2=parseInt(s.substr(n+1,2),16),o.qnum="."!==s.charAt(n+3)?parseInt(s.charAt(n+3),16):-1,n+=3):"="===i?(o.qnum2=parseInt(s.substr(n+1,2),16),o.qnum=parseInt(s.substr(n+3,2),16),n+=4):(o.qnum2="."!==s.charAt(n)?parseInt(s.charAt(n),16):-1,o.qnum="."!==s.charAt(n+1)?parseInt(s.charAt(n+1),16):-1,n+=1))),e++,!r.cell[e]){t=n+1;break}}r.enableInfo();for(e=0,n=t;n<s.length;n++){var i=s.charAt(n),u=r.excell[e];if("."===i?u.qnum2=-1:"-"===i?(u.qnum2=parseInt(s.substr(n+1,2),16),n+=2):u.qnum2=parseInt(i,16),++e>=r.cols){t=n+1;break}}for(n=t;n<s.length;n++){i=s.charAt(n),u=r.excell[e];if("."===i?u.qnum=-1:"-"===i?(u.qnum=parseInt(s.substr(n+1,2),16),n+=2):u.qnum=parseInt(i,16),++e>=r.cols+r.rows){t=n+1;break}}this.outbstr=s.substr(t)},encodeTriplace:function(e){for(var t="",s=this.board,r=0,n=0;n<s.cell.length;n++){var i="",o=s.cell[n];51===o.ques?-1===o.qnum&&-1===o.qnum2?i="_":-1===o.qnum2&&o.qnum<35?i="$"+o.qnum.toString(36):-1===o.qnum&&o.qnum2<35?i="@"+o.qnum2.toString(36):(i=(i+=o.qnum2.toString(16))+o.qnum.toString(16),16<=o.qnum&&16<=o.qnum2?i="="+i:16<=o.qnum?i="-"+i:16<=o.qnum2&&(i="+"+i)):r++,0===r?t+=i:!i&&20!==r||(t+=(r+15).toString(36)+i,r=0)}0<r&&(t+=(r+15).toString(36));for(n=0;n<s.cols;n++)(u=s.excell[n].qnum2)<0?t+=".":u<16?t+=u.toString(16):u<256&&(t+="-"+u.toString(16));for(var u,n=s.cols;n<s.cols+s.rows;n++)(u=s.excell[n].qnum)<0?t+=".":u<16?t+=u.toString(16):u<256&&(t+="-"+u.toString(16));this.outbstr+=t}},FileIO:{decodeData:function(){this.decodeCellQnum51(),this.decodeBorderAns(),this.decodeCell(function(e,t){"+"===t?e.qsub=1:"-"===t&&(e.qsub=2)})},encodeData:function(){this.encodeCellQnum51(),this.encodeBorderAns(),this.encodeCell(function(e){return 1===e.qsub?"+ ":2===e.qsub?"- ":". "})}},AnsCheck:{checklist:["checkOverThreeCells","checkRowsColsTileCount","checkLessThreeCells"],checkOverThreeCells:function(){this.checkAllArea(this.board.roommgr,function(e,t,s,r){return 3<=s},"bkSizeLt3")},checkLessThreeCells:function(){this.checkAllArea(this.board.roommgr,function(e,t,s,r){return s<=3},"bkSizeGt3")},checkRowsColsTileCount:function(){this.checkRowsColsPartly(this.isTileCount,function(e){return e.is51cell()},"asLblockNe")},isTileCount:function(e,t){for(var s=t.key51num,r=0,n=0;n<e.length;n++){var i=e[n].room;i.is1x3&&!i.counted&&(r++,i.counted=!0)}s=s<0||r===s;s||(t.keycell.seterr(1),e.seterr(1));for(n=0;n<e.length;n++)e[n].room.counted=!1;return s}}});
//# sourceMappingURL=triplace.js.map