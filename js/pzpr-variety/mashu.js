/*! @license pzpr.js v7f9addbe (c) 2009-2025 sabo2, MIT license
 *   https://github.com/sabo2/pzprv3 */
!function(e,i){"object"==typeof module&&module.exports?module.exports=[e,i]:pzpr.classmgr.makeCustom(e,i)}(["mashu"],{MouseEvent:{inputModes:{edit:["circle-shade","circle-unshade","undef","clear","info-line"],play:["line","peke","info-line"]},autoedit_func:"qnum",autoplay_func:"line"},KeyEvent:{enablemake:!0},Cell:{numberAsObject:!0,maxnum:2,setErrorPearl:function(){this.setCellLineError(1);var e=this.adjacent,i=this.adjborder;i.top.isLine()&&e.top.setCellLineError(0),i.bottom.isLine()&&e.bottom.setCellLineError(0),i.left.isLine()&&e.left.setCellLineError(0),i.right.isLine()&&e.right.setCellLineError(0)},setCellLineError:function(e){var i=this.bx,r=this.by;e&&this.seterr(1),this.board.borderinside(i-1,r-1,i+1,r+1).seterr(1)}},Board:{hasborder:1,uramashu:!1,revCircle:function(){this.uramashu&&this.revCircleMain()},revCircleConfig:function(e){this.uramashu!==e&&(this.uramashu=e,this.revCircleMain())},revCircleMain:function(){for(var e=0;e<this.cell.length;e++){var i=this.cell[e];1===i.qnum?i.setQnum(2):2===i.qnum&&i.setQnum(1)}}},LineGraph:{enabled:!0},Graphic:{irowake:!0,gridcolor_type:"LIGHT",circlefillcolor_func:"qnum2",circlestrokecolor_func:"qnum2",paint:function(){this.drawBGCells(),this.drawDashedGrid(),this.drawCircles(),this.drawHatenas(),this.drawPekes(),this.drawLines(),this.drawChassis(),this.drawTarget()}},Encode:{decodePzpr:function(e){this.decodeCircle(),this.board.revCircle(),this.puzzle.setConfig("loop_full",this.checkpflag("f"))},encodePzpr:function(e){this.outpflag=this.puzzle.getConfig("loop_full")?"f":null,this.board.revCircle(),this.encodeCircle(),this.board.revCircle()},decodeKanpen:function(){this.fio.decodeCellQnum_kanpen(),this.board.revCircle()},encodeKanpen:function(){this.board.revCircle(),this.fio.encodeCellQnum_kanpen(),this.board.revCircle()}},FileIO:{decodeData:function(){this.decodeConfigFlag("f","loop_full"),this.decodeCellQnum(),this.decodeBorderLine(),this.board.revCircle()},encodeData:function(){this.encodeConfigFlag("f","loop_full"),this.board.revCircle(),this.encodeCellQnum(),this.encodeBorderLine(),this.board.revCircle()},kanpenOpen:function(){this.decodeCellQnum_kanpen(),this.decodeBorderLine(),this.board.revCircle()},kanpenSave:function(){this.board.revCircle(),this.encodeCellQnum_kanpen(),this.encodeBorderLine(),this.board.revCircle()},kanpenOpenXML:function(){this.decodeCellQnum_XMLBoard(),this.decodeBorderLine_XMLAnswer(),this.board.revCircle()},kanpenSaveXML:function(){this.board.revCircle(),this.encodeCellQnum_XMLBoard(),this.encodeBorderLine_XMLAnswer(),this.board.revCircle()},UNDECIDED_NUM_XML:3},AnsCheck:{checklist:["checkLineExist+","checkBranchLine","checkCrossLine","checkWhitePearl1","checkBlackPearl1","checkBlackPearl2","checkWhitePearl2","checkNoLinePearl","checkDeadendLine+","checkNoLineIfVariant","checkOneLoop"],checkNoLinePearl:function(){this.checkAllCell(function(e){return e.isNum()&&0===e.lcnt},"mashuOnLine")},checkWhitePearl1:function(){for(var e=!0,i=this.board,r=0;r<i.cell.length;r++){var n=i.cell[r];if(1===n.qnum&&n.isLineCurve()){if(e=!1,this.checkOnly)break;n.setCellLineError(1)}}e||(this.failcode.add("mashuWCurve"),i.border.setnoerr())},checkBlackPearl1:function(){for(var e=!0,i=this.board,r=0;r<i.cell.length;r++){var n=i.cell[r];if(2===n.qnum&&n.isLineStraight()){if(e=!1,this.checkOnly)break;n.setCellLineError(1)}}e||(this.failcode.add("mashuBStrig"),i.border.setnoerr())},checkWhitePearl2:function(){for(var e=!0,i=this.board,r=0;r<i.cell.length;r++){var n=i.cell[r];if(1===n.qnum&&2===n.lcnt){var t=n.adjacent,o=n.adjborder,l=0;if(o.top.isLine()&&t.top.isLineStraight()&&l++,o.bottom.isLine()&&t.bottom.isLineStraight()&&l++,o.left.isLine()&&t.left.isLineStraight()&&l++,o.right.isLine()&&t.right.isLineStraight()&&l++,!(l<2)){if(e=!1,this.checkOnly)break;n.setErrorPearl()}}}e||(this.failcode.add("mashuWStNbr"),i.border.setnoerr())},checkBlackPearl2:function(){for(var e=!0,i=this.board,r=0;r<i.cell.length;r++){var n=i.cell[r],t=n.adjacent,o=n.adjborder;if(2===n.qnum&&2===n.lcnt&&(o.top.isLine()&&t.top.isLineCurve()||o.bottom.isLine()&&t.bottom.isLineCurve()||o.left.isLine()&&t.left.isLineCurve()||o.right.isLine()&&t.right.isLineCurve())){if(e=!1,this.checkOnly)break;n.setErrorPearl()}}e||(this.failcode.add("mashuBCvNbr"),i.border.setnoerr())}}});
//# sourceMappingURL=mashu.js.map