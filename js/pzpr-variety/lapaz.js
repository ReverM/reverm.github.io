/*! @license pzpr.js v7f9addbe (c) 2009-2025 sabo2, MIT license
 *   https://github.com/sabo2/pzprv3 */
!function(e,i){"object"==typeof module&&module.exports?module.exports=[e,i]:pzpr.classmgr.makeCustom(e,i)}(["lapaz"],{MouseEvent:{use:!0,inputModes:{edit:["number","empty","clear"],play:["border","shade","unshade"]},mouseinput_auto:function(){this.puzzle.playmode?this.mousestart||this.mousemove?"left"===this.btn?this.inputborder():"right"===this.btn&&this.inputdragcross():this.mouseend&&this.notInputted()&&this.inputcell():this.puzzle.editmode&&this.mousestart&&this.inputqnum()},mouseinput_clear:function(){this.inputFixedNumber(-1)},inputdragcross:function(){var e=this.getcell();!e.isnull&&e.allowUnshade()&&(null===this.firstPoint.bx?this.firstPoint.set(this.inputPoint):(null!==this.inputData||.1<(e=this.inputPoint.bx-this.firstPoint.bx)*e+(e=this.inputPoint.by-this.firstPoint.by)*e)&&this.inputFixedQsub(1))}},KeyEvent:{enablemake:!0,keyinput:function(e){"w"===e?this.key_inputvalid(e):this.key_inputqnum(e)},key_inputvalid:function(e){"w"!==e||(e=this.cursor.getc()).isnull||e.setValid(7!==e.ques?7:0)}},Cell:{numberRemainsUnshaded:!0,maxnum:function(){return Math.max(this.board.cols,this.board.rows)>>1},minnum:0,allowUnshade:function(){return this.isValid()},allowShade:function(){return this.isValid()&&!this.isNum()},posthook:{qnum:function(e){-1!==e&&this.setQues(0)}},getBorder:function(e){return this.reldirbd(this.getdir(e,2),1)}},Border:{isGrid:function(){return null!==this.sidecell[0]&&this.sidecell[0].isValid()&&null!==this.sidecell[1]&&this.sidecell[1].isValid()},isBorder:function(){return 0<this.qans||this.isShadeBorder()||this.isQuesBorder()},isShadeBorder:function(){return this.sidecell[0].isShade()||this.sidecell[1].isShade()},isQuesBorder:function(){return!!(this.sidecell[0].isEmpty()^this.sidecell[1].isEmpty())},prehook:{qans:function(){return!this.isGrid()},qsub:function(){return!this.isGrid()}}},Board:{hasborder:2,cols:8,rows:8},AreaRoomGraph:{enabled:!0,relation:{"cell.qans":"node","border.qans":"separator"},isedgevalidbynodeobj:function(e,i){return this.isedgevalidbylinkobj(e.getBorder(i))},isedgevalidbylinkobj:function(e){return!e.isBorder()}},Graphic:{enablebcolor:!0,gridcolor_type:"LIGHT",bgcellcolor_func:"qsub1",qanscolor:"black",paint:function(){this.drawBGCells(),this.drawShadedCells(),this.drawValidDashedGrid(),this.drawBorders(),this.drawQuesNumbers(),this.drawTarget()},drawValidDashedGrid:function(){for(var e=this.vinc("grid_waritai","crispEdges",!0),i=this.getDashArray(),t=(e.lineWidth=1,e.strokeStyle=this.gridcolor,this.range.borders),s=0;s<t.length;s++){var n,o,r=t[s];e.vid="b_grid_wari_"+r.id,r.isGrid()?(n=r.bx*this.bw,o=r.by*this.bh,r.isVert()?e.strokeDashedLine(n,o-this.bh,n,o+this.bh,i):e.strokeDashedLine(n-this.bw,o,n+this.bw,o,i)):e.vhide()}},getBorderColor:function(e){return e.isQuesBorder()?this.quescolor:e.sidecell[0].isShade()||e.sidecell[1].isShade()?this.qanscolor:this.getBorderColor_qans(e)}},Encode:{decodePzpr:function(e){this.decodeNumber16(),this.decodeEmpty()},encodePzpr:function(e){this.encodeNumber16(),this.encodeEmpty()}},FileIO:{decodeData:function(){this.decodeCellQnum(),this.decodeBorderAns(1),this.decodeCellAns()},encodeData:function(){this.encodeCellQnum(),this.encodeBorderAns(1),this.encodeCellAns()},decodeCellQnum:function(){this.decodeCell(function(e,i){"#"===i?e.ques=7:"-"===i?e.qnum=-2:"."!==i&&(e.qnum=+i)})},encodeCellQnum:function(){this.encodeCell(function(e){return 7===e.ques?"# ":0<=e.qnum?e.qnum+" ":-2===e.qnum?"- ":". "})}},AnsCheck:{checklist:["checkNumberRegionSize","check1x1Shaded","checkAdjacentShadeCell","checkShadeCounts","checkRegionSize"],check1x1Shaded:function(){this.checkAllCell(function(e){return 1===e.room.clist.length&&!e.isShade()},"bkUnshade")},checkNumberRegionSize:function(){this.checkAllCell(function(e){return-1!==e.qnum&&1===e.room.clist.length},"nmLt1")},checkRegionSize:function(){for(var e=this.board.roommgr.components,i=0;i<e.length;i++){var t=e[i];if(!(t.clist.length<=2)){if(this.failcode.add("bkSizeGt2"),this.checkOnly)break;t.clist.seterr(1)}}},checkShadeCounts:function(){this.checkRowsColsPartly(this.isRowCount,function(e){return e.isEmpty()},"nmShadeNe")},isRowCount:function(e){var t=e.getRectSize(),i=e.filter(function(e){return e.isShade()}).length,s=-1;return e.each(function(e){var i;0<=e.qnum&&e.qnum!==s&&2===e.room.clist.length&&(i=e.room.clist.getRectSize(),(e.qnum!==s&&1<i.rows&&1<t.rows||1<i.cols&&1<t.cols)&&(s=-1===s?e.qnum:-2))}),-1===s||s===i||(e.seterr(1),!1)}}});
//# sourceMappingURL=lapaz.js.map