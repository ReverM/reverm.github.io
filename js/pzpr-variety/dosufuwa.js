/*! @license pzpr.js v7f9addbe (c) 2009-2025 sabo2, MIT license
 *   https://github.com/sabo2/pzprv3 */
!function(t,e){"object"==typeof module&&module.exports?module.exports=[t,e]:pzpr.classmgr.makeCustom(t,e)}(["dosufuwa"],{MouseEvent:{inputModes:{edit:["shade","border"],play:["balloon","ironball","objblank"]},mouseinput:function(){this.puzzle.playmode&&"auto"!==this.inputMode?this.inputcell_dosufuwa():"shade"===this.inputMode?this.mousestart&&this.inputblock():this.common.mouseinput.call(this)},mouseinput_auto:function(){this.puzzle.playmode?(this.mousestart||this.mousemove)&&this.inputcell_dosufuwa():this.puzzle.editmode&&(this.mousestart||this.mousemove?this.inputborder():this.mouseend&&this.notInputted()&&this.inputblock())},inputcell_dosufuwa:function(){var t=this.getcell();if(!t.isnull&&t!==this.mouseCell&&1!==t.ques){if(null===this.inputData)"balloon"===this.inputMode?this.inputData=1!==t.qans?1:0:"ironball"===this.inputMode?this.inputData=2!==t.qans?2:0:"objblank"===this.inputMode?this.inputData=1!==t.qsub?-2:0:"left"===this.btn?1===t.qans?this.inputData=2:2===t.qans?this.inputData=-2:1===t.qsub?this.inputData=0:this.inputData=1:"right"===this.btn&&(1===t.qans?this.inputData=0:2===t.qans?this.inputData=1:1===t.qsub?this.inputData=2:this.inputData=-2);else if(1===this.inputData&&this.mouseCell.getdir(t,2)!==t.UP||2===this.inputData&&this.mouseCell.getdir(t,2)!==t.DN)return;0<=this.inputData?(t.setQans(this.inputData),t.setQsub(0)):(t.setQans(0),t.setQsub(1)),t.draw(),this.mouseCell=t}},inputblock:function(){var t=this.getcell();t.isnull||(t.setQues(0===t.ques?1:0),t.setQans(0),t.setQsub(0),t.draw())}},Cell:{posthook:{qans:function(t){this.room.checkAutoCmp()}}},Border:{isBorder:function(){return this.isnull||0<this.ques||!(1!==this.sidecell[0].ques&&1!==this.sidecell[1].ques)}},CellList:{checkCmp:function(){for(var t=0,e=0,o=0;o<this.length;o++)1===this[o].qans?t++:2===this[o].qans&&e++;return 1===t&&1===e}},Board:{hasborder:1},BoardExec:{allowedOperations:function(t){return t?this.FLIPX:this.ALLOWALL}},AreaRoomGraph:{enabled:!0,isnodevalid:function(t){return 0===t.ques}},Graphic:{gridcolor_type:"LIGHT",autocmp:"room",qanscolor:"black",bgcellcolor_func:"qcmp",paint:function(){this.drawBGCells(),this.drawGrid(),this.drawQuesCells(),this.drawDotCells(),this.drawCircles(),this.drawBorders(),this.drawChassis()},getCircleStrokeColor:function(t){return 1===t.qans?1===t.error?this.errcolor1:t.trial?this.trialcolor:this.shadecolor:null},getCircleFillColor:function(t){return 1===t.qans?1===t.error?this.errbcolor1:"white":2===t.qans?1===t.error?this.errcolor1:t.trial?this.trialcolor:this.shadecolor:null}},Encode:{decodePzpr:function(t){this.decodeBorder(),this.decodeBlockCell()},encodePzpr:function(t){this.encodeBorder_makaro(),this.encodeBlockCell()},decodeBlockCell:function(){for(var t=0,e=0,o=this.outbstr,s=this.board,e=0;e<o.length;e++){var i=o.charAt(e);if(this.include(i,"0","9")||this.include(i,"a","z")?(t+=parseInt(i,36),s.cell[t]&&(s.cell[t].ques=1)):"."===i&&(t+=35),t++,!s.cell[t]){e++;break}}this.outbstr=o.substr(e)},encodeBlockCell:function(){for(var t="",e=0,o=this.board,s=0;s<o.cell.length;s++){var i="";1===o.cell[s].ques?i=".":e++,i?(t+=e.toString(36),e=0):36===e&&(t+=".",e=0)}this.outbstr+=t},encodeBorder_makaro:function(){for(var t=this.board,e=[],o=0;o<t.border.length;o++)e[o]=t.border[o].ques,t.border[o].ques=t.border[o].isBorder()?1:0;this.encodeBorder();for(o=0;o<t.border.length;o++)t.border[o].ques=e[o]}},FileIO:{decodeData:function(){this.decodeAreaRoom(),this.decodeCellQanssub()},encodeData:function(){this.encodeAreaRoom(),this.encodeCellQanssub()},decodeAreaRoom_com:function(t){var e=this.board,o=(this.readLine(),this.getItemList(e.rows));this.rdata2Border(t,o);for(var s=0;s<e.cell.length;s++)"#"===o[s]&&(e.cell[s].ques=1);e.roommgr.rebuild()},encodeAreaRoom_com:function(t){for(var e=this.board,o=(e.roommgr.rebuild(),e.roommgr.components),s=(this.writeLine(o.length),""),i=0;i<e.cell.length;i++){var r=o.indexOf(e.cell[i].room);s+=(0<=r?r:"#")+" ",(i+1)%e.cols==0&&(this.writeLine(s),s="")}}},AnsCheck:{checklist:["checkOverUnshadeCircle","checkOverShadeCircle","checkBalloonIsTop","checkIronBallIsBottom","checkNoUnshadeCircle+","checkNoShadeCircle+"],checkOverUnshadeCircle:function(){this.checkAllBlock(this.board.roommgr,function(t){return 1===t.qans},function(t,e,o,s){return o<=1},"bkUCGe2")},checkOverShadeCircle:function(){this.checkAllBlock(this.board.roommgr,function(t){return 2===t.qans},function(t,e,o,s){return o<=1},"bkSCGe2")},checkNoUnshadeCircle:function(){this.checkAllBlock(this.board.roommgr,function(t){return 1===t.qans},function(t,e,o,s){return 1<=o},"bkNoUC")},checkNoShadeCircle:function(){this.checkAllBlock(this.board.roommgr,function(t){return 2===t.qans},function(t,e,o,s){return 1<=o},"bkNoSC")},checkBalloonIsTop:function(){this.checkAllCell(function(t){var e=t.adjacent.top;return 1===t.qans&&!e.isnull&&1!==e.ques&&1!==e.qans},"cuNotTop")},checkIronBallIsBottom:function(){this.checkAllCell(function(t){var e=t.adjacent.bottom;return 2===t.qans&&!e.isnull&&1!==e.ques&&2!==e.qans},"csNotBottom")}}});
//# sourceMappingURL=dosufuwa.js.map