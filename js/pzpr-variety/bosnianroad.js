/*! @license pzpr.js v7f9addbe (c) 2009-2025 sabo2, MIT license
 *   https://github.com/sabo2/pzprv3 */
!function(e,t){"object"==typeof module&&module.exports?module.exports=[e,t]:pzpr.classmgr.makeCustom(e,t)}(["bosnianroad"],{MouseEvent:{use:!0,inputModes:{edit:["number","shade","clear","info-blk"],play:["shade","unshade","peke","info-blk","completion"]},mouseinput_auto:function(){this.puzzle.playmode?"right"===this.btn&&this.mousestart&&this.inputpeke_ifborder()||(!this.mousestart&&!this.mousemove||this.firstCell.isnull&&!this.notInputted()||this.inputShade(),this.mouseend&&this.notInputted()&&this.inputqcmp()):this.puzzle.editmode&&("right"!==this.btn||!this.mousestart&&!this.mousemove||this.getcell().isValidNum()&&-1!==this.inputData?this.mouseend&&this.notInputted()&&this.inputqnum():this.inputShade())},inputqcmp:function(){var e=this.getcell();!e.isnull&&e.isValidNum()&&(e.setQcmp(+!e.qcmp),e.draw(),this.mousereset())},inputShade:function(){var e;this.puzzle.playmode?this.inputcell():(e=this.getcell()).isnull||e===this.mouseCell||(null===this.inputData&&(this.inputData=-1===e.qnum?-2:-1),-1===this.inputData!=(-1===e.qnum)&&(e.setNum(this.inputData),e.drawaround()),this.mouseCell=e)}},KeyEvent:{enablemake:!0},Cell:{minnum:0,maxnum:8,numberRemainsUnshaded:!0,getClist:function(){return this.board.cellinside(this.bx-2,this.by-2,this.bx+2,this.by+2).filter(function(e){return-1===e.qnum})},isCmp:function(){return!!this.isValidNum()&&(1===this.qcmp||!!this.puzzle.execConfig("autocmp")&&this.checkComplete())},checkComplete:function(){if(!this.isValidNum())return!0;var e=this.getClist();return!e.some(function(e){return 0===e.qans&&0===e.qsub})&&e.filter(function(e){return e.isShade()}).length===this.qnum}},Border:{isBorder:function(){return-1===this.sidecell[0].qnum!=(-1===this.sidecell[1].qnum)}},Board:{hasborder:1},AreaShadeGraph:{enabled:!0,coloring:!0},Graphic:{autocmp:"number",qcmpcolor:"rgb(144,144,144)",setRange:function(e,t,i,n){var s=this.puzzle,h=s.board;s.execConfig("autocmp")&&(e=h.minbx-2,t=h.minby-2,i=h.maxbx+2,n=h.maxby+2),this.common.setRange.call(this,e,t,i,n)},cluebgcolor:"rgb(224,224,224)",hideHatena:!0,irowakeblk:!0,getBGCellColor:function(e){return-1!==e.qnum?this.cluebgcolor:this.getBGCellColor_error1(e)},getQuesNumberColor:function(e){var t=this.getQuesNumberColor_qnum(e);return 1!==(e.error||e.qinfo)&&e.isCmp()?this.qcmpcolor:t},paint:function(){this.drawBGCells(),this.drawDotCells(),this.drawShadedCells(),this.drawGrid(),this.drawGridGaps(),this.drawBorders(),this.drawQuesNumbers(),this.drawPekes(),this.drawChassis(),this.drawTarget()},drawGridGaps:function(){var e,t=this.vinc("gridgaps","crispEdges",!0),i=this.board,n=this.bw,s=this.bh;for(t.lineWidth=1,e=0;e<i.border.length;e++){var h,r,o,c=i.border[e];t.vid="bdgap_"+e,-1!==c.sidecell[0].qnum&&-1!==c.sidecell[1].qnum?(h=c.sidecross[0].bx,r=c.sidecross[0].by,o=c.sidecross[1].bx,c=c.sidecross[1].by,t.strokeStyle=this.cluebgcolor,t.strokeLine(h*n,r*s,o*n,c*s)):t.vhide()}}},Encode:{decodePzpr:function(e){this.decodeNumber10()},encodePzpr:function(e){this.encodeNumber10()}},FileIO:{decodeData:function(){this.decodeCellQnum(),this.decodeCellAns()},encodeData:function(){this.encodeCellQnum(),this.encodeCellAns()}},AnsCheck:{checklist:["checkShadeCellExist+","check2x2ShadeSection","checkShadeBranch","checkShadeDeadEnd","checkConnectShade","checkShadeDiagonal","checkShadeCount+"],check2x2ShadeSection:function(){this.check2x2Block(function(e){return e.isShade()&&4!==e.sblk.clist.length},"cs2x2")},checkNeighborCount:function(t,e){this.checkAllCell(function(e){return e.isShade()&&0<(e.countDir4Cell(function(e){return e.isShade()})-2)*t},e)},checkShadeBranch:function(){this.checkNeighborCount(1,"shBranch")},checkShadeDeadEnd:function(){this.checkNeighborCount(-1,"shDeadEnd")},checkShadeDiagonal:function(){for(var e=this.board,t=0;t<e.cell.length;t++){var i=e.cell[t];if(!(i.bx>=e.maxbx-1||i.by>=e.maxby-1)){var n=i.bx,i=i.by,n=e.cellinside(n,i,n+2,i+2).filter(function(e){return e.isShade()});if(2===n.length){var i=n[0],s=n[1];if(i.bx!==s.bx&&i.by!==s.by){if(this.failcode.add("shDiag"),this.checkOnly)break;n.seterr(1)}}}}},checkShadeCount:function(){for(var e=this.board,t=0;t<e.cell.length;t++){var i=e.cell[t];if(!(i.qnum<0)){var n=i.getClist();if(n.filter(function(e){return e.isShade()}).length!==i.qnum){if(this.failcode.add("anShadeNe"),this.checkOnly)break;i.seterr(1),n.seterr(1)}}}}}});
//# sourceMappingURL=bosnianroad.js.map