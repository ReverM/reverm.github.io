/*! @license pzpr.js v7f9addbe (c) 2009-2025 sabo2, MIT license
 *   https://github.com/sabo2/pzprv3 */
!function(t,e){"object"==typeof module&&module.exports?module.exports=[t,e]:pzpr.classmgr.makeCustom(t,e)}(["vslither","tslither"],{MouseEvent:{inputModes:{edit:["number","clear","info-line"],play:["line","peke","dot","bgcolor","bgcolor1","bgcolor2","clear","info-line"]},mouseinput_auto:function(){var t,e=this.puzzle;e.playmode?this.checkInputBGcolor()?this.inputBGcolor():this.mousestart||this.mousemove?"left"===this.btn?this.inputLine():"right"===this.btn&&this.inputpeke():this.mouseend&&this.notInputted()&&(t=this.getcell(),!this.firstCell.isnull&&t!==this.firstCell||(this.prevPos.reset(),this.getpos(.25).getx().isnull?this.inputpeke():this.inputdot())):e.editmode&&this.mousestart&&this.inputqnum()},checkInputBGcolor:function(){var t=this.puzzle.execConfig("bgcolor");return t=t&&(this.mousestart?this.getpos(.25).oncell():!!this.mousemove&&10<=this.inputData)},mouseinput_other:function(){"dot"===this.inputMode&&this.inputdot()},inputdot:function(){var t=this.getpos(.25);if(!this.prevPos.equals(t)){var e=t.getDot();if(this.prevPos=t,null!==e){if(null===this.inputData)if("left"===this.btn)this.inputData={0:1,1:2,2:0}[e.getDot()];else{if("right"!==this.btn)return;this.inputData={0:2,1:0,2:1}[e.getDot()]}e.setDot(this.inputData),e.draw()}}}},KeyEvent:{enablemake:!0},Cell:{maxnum:4,minnum:0,getdir4BorderLine1:function(){var t=this.adjborder,e=0;return t.top.isLine()&&e++,t.bottom.isLine()&&e++,t.left.isLine()&&e++,t.right.isLine()&&e++,e},getdir4BorderVertex1:function(){return(0<this.relcross(-1,-1).lcnt)+(0<this.relcross(1,-1).lcnt)+(0<this.relcross(-1,1).lcnt)+(0<this.relcross(1,1).lcnt)}},Dot:{getDot:function(){return"cross"===this.piece.group?this.piece.qsub:0},setDot:function(t){"cross"===this.piece.group&&(this.puzzle.opemgr.disCombine=!0,this.piece.setQsub(t),this.puzzle.opemgr.disCombine=!1)},getTrial:function(){return this.piece.trial}},Board:{hasdots:2,hasborder:2,borderAsLine:!0},LineGraph:{enabled:!0},Graphic:{irowake:!0,bgcellcolor_func:"qsub2",numbercolor_func:"qnum",margin:.5,paint:function(){this.drawBGCells(),this.drawLines(),this.drawBaseMarks(),this.drawCrossErrors(),this.drawQuesNumbers(),this.drawPekes(),this.drawDots(),this.drawTarget()},repaintParts:function(t){this.range.crosses=t.crossinside(),this.drawBaseMarks()},drawDots:function(){for(var t=this.vinc("dot","auto"),e=(t.lineWidth=1+this.cw/40|0,this.range),i=.15*this.cw,s=(i<3&&(i=3),this.board.dotinside(e.x1,e.y1,e.x2,e.y2)),o=0;o<s.length;o++){var n=s[o],r=n.bx,l=n.by,r=r*this.bw,l=l*this.bh,h=(t.vid="s_dot_"+n.id,this.getDotOutlineColor(n)),c=this.getDotFillColor(n);1===n.getDot()?(t.strokeStyle=h,t.fillStyle=c,t.shapeCircle(r,l,this.cw*this.getDotRadius(n))):2===n.getDot()?(t.beginPath(),t.moveTo(r-i,l-i),t.lineTo(r+i,l+i),t.moveTo(r-i,l+i),t.lineTo(r+i,l-i),t.closePath(),t.stroke()):t.vhide()}},getDotFillColor:function(t){return 1===t.getDot()||2===t.getDot()?t.getTrial()?this.trialcolor:this.pekecolor:null},getDotOutlineColor:function(t){return 1===t.getDot()||2===t.getDot()?t.getTrial()?this.trialcolor:this.pekecolor:null},getDotRadius:function(t){return.1}},Encode:{decodePzpr:function(t){this.decode4Cell(),this.puzzle.setConfig("slither_full",this.checkpflag("f"))},encodePzpr:function(t){this.outpflag=this.puzzle.getConfig("slither_full")?"f":null,this.encode4Cell()}},FileIO:{decodeData:function(){this.decodeConfigFlag("f","slither_full"),this.decodeCellQnum(),this.decodeCellQsub(),this.decodeBorderLine(),this.decodeCross(function(t,e){t.qsub=+e})},encodeData:function(){this.encodeConfigFlag("f","slither_full"),this.encodeCellQnum(),this.encodeCellQsub(),this.encodeBorderLine(),this.encodeCross(function(t){return t.qsub+" "})}},AnsCheck:{checklist:["checkLineExist+","checkBranchLine","checkCrossLine","checkdir4VertexLine@vslither","checkdir4TouchLine@tslither","checkOneLoop","checkDeadendLine+","checkNoLineIfVariant@tslither"],checkdir4VertexLine:function(){this.checkAllCell(function(t){return 0<=t.qnum&&t.getdir4BorderVertex1()!==t.qnum},"nmVertexNe")},checkdir4TouchLine:function(){this.checkAllCell(function(t){return 0<=t.qnum&&t.getdir4BorderVertex1()-Math.min(t.getdir4BorderLine1(),3)!==t.qnum},"nmTouchNe")}}});
//# sourceMappingURL=vslither.js.map