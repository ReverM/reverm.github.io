/*! @license pzpr.js v7f9addbe (c) 2009-2025 sabo2, MIT license
 *   https://github.com/sabo2/pzprv3 */
!function(e,t){"object"==typeof module&&module.exports?module.exports=[e,t]:pzpr.classmgr.makeCustom(e,t)}(["nondango"],{MouseEvent:{use:!0,inputModes:{edit:["border","circle-unshade"],play:["shade","unshade"]},mouseinput:function(){"shade"===this.inputMode||"unshade"===this.inputMode?this.inputcell_nondango():"circle-unshade"===this.inputMode?this.inputcircle():this.common.mouseinput.call(this)},mouseinput_auto:function(){this.puzzle.playmode?(this.mousestart||this.mousemove)&&this.inputcell_nondango():this.puzzle.editmode&&(this.mousestart||this.mousemove?this.inputborder():this.mouseend&&this.notInputted()&&this.inputcircle())},inputcell_nondango:function(){var e=this.getcell();e.isnull||e===this.mouseCell||(0===e.ques||"shade"===this.inputMode?(this.inputcell(),1===this.inputData&&this.mousereset()):!this.mousestart&&null===this.inputData||(this.mousestart&&(this.inputData=0===e.qsub?2:0),e.setQans(0),e.setQsub(2===this.inputData?1:0),e.draw()))},inputcircle:function(){var e=this.getcell();e.isnull||e===this.mouseCell||(e.setQues(8===e.ques?0:8),e.setQans(0),e.setQsub(0),e.draw(),this.mouseCell=e)}},Cell:{ques:8,posthook:{qans:function(e){this.room.checkAutoCmp()}}},CellList:{checkCmp:function(){return 1===this.filter(function(e){return 1===e.qans}).length}},Board:{hasborder:1},AreaRoomGraph:{enabled:!0},Graphic:{gridcolor_type:"LIGHT",autocmp:"room",bcolor:"rgb(208, 208, 255)",bgcellcolor_func:"qcmp1",paint:function(){this.drawBGCells(),this.drawGrid(),this.drawCircles(),this.drawBorders(),this.drawChassis()},getCircleStrokeColor:function(e){return 0===e.ques?1===e.error?this.errcolor1:e.trial?this.trialcolor:this.shadecolor:null},getCircleFillColor:function(e){return 0===e.ques?1===e.qans?1===e.error?this.errcolor1:e.trial?this.trialcolor:this.shadecolor:1===e.error?this.errbcolor1:"white":null}},Encode:{decodePzpr:function(e){this.decodeBorder(),this.decodeBoard_nondango()},encodePzpr:function(e){this.encodeBorder(),this.encodeBoard_nondango()},decodeBoard_nondango:function(){var e=this.outbstr,t=0,s=0,n=this.board,o=[16,8,4,2,1];e:for(s=0;s<e.length;s++)for(var i=parseInt(e.charAt(s),32),r=0;r<5;r++){if(!n.cell[t])break e;n.cell[t].ques=i&o[r]?8:0,t++}this.outbstr=e.substr(s+1)},encodeBoard_nondango:function(e){for(var t="",s=0,n=0,o=this.board,i=[16,8,4,2,1],r=0;r<o.cell.length;r++)8===o.cell[r].ques&&(n+=i[s]),5===++s&&(t+=n.toString(32),n=s=0);0<s&&(t+=n.toString(32)),this.outbstr+=t}},FileIO:{decodeData:function(){this.decodeAreaRoom(),this.decodeCellQnumanssub()},encodeData:function(){this.encodeAreaRoom(),this.encodeCellQnumanssub()},decodeCellQnumanssub:function(){this.decodeCell(function(e,t){"#"===t?(e.ques=0,e.qans=1):"%"===t?(e.ques=0,e.qsub=1):"o"===t?e.ques=0:"+"===t&&(e.ques=8,e.qsub=1)})},encodeCellQnumanssub:function(){this.encodeCell(function(e){return 0===e.ques?1===e.qans?"# ":1===e.qsub?"% ":"o ":1===e.qsub?"+ ":". "})}},AnsCheck:{checklist:["checkOverShadeCircle","checkThreeShadedCircles","checkThreeUnshadedCircles","checkNoShadeCircle+"],checkOverShadeCircle:function(){this.checkAllBlock(this.board.roommgr,function(e){return 1===e.qans},function(e,t,s,n){return s<=1},"bkMSGe2")},checkNoShadeCircle:function(){this.checkAllBlock(this.board.roommgr,function(e){return 1===e.qans},function(e,t,s,n){return 1<=s},"bkNoMS")},checkThreeShadedCircles:function(){this.checkThreeCircles(function(e){return 1===e.qans},"msConsecGt3")},checkThreeUnshadedCircles:function(){this.checkThreeCircles(function(e){return 0===e.ques&&0===e.qans},"muConsecGt3")},checkThreeCircles:function(e,t){for(var s=this.board,n=this.klass.CellList,o=0;o<s.cell.length;o++){var i,r=s.cell[o],c=r.bx,u=r.by,h=[new n(r)];r.bx<s.maxbx-4&&((i=new n).add(r,s.getc(c+2,u),s.getc(c+4,u)),h.push(i)),r.by<s.maxby-4&&((i=new n).add(r,s.getc(c,u+2),s.getc(c,u+4)),h.push(i),r.bx>s.minbx+4&&((i=new n).add(r,s.getc(c-2,u+2),s.getc(c-4,u+4)),h.push(i)),r.bx<s.maxbx-4&&((i=new n).add(r,s.getc(c+2,u+2),s.getc(c+4,u+4)),h.push(i)));for(var l=0;l<h.length;l++)if(3===(i=h[l]).filter(e).length){if(this.failcode.add(t),this.checkOnly)break;i.seterr(1)}}}}});
//# sourceMappingURL=nondango.js.map