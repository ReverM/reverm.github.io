{"version":3,"file":"tontti.js","sources":["../../../src/variety/tontti.js"],"names":["pidlist","classbase","module","exports","pzpr","classmgr","makeCustom","MouseEvent@tontti","inputModes","edit","play","mouseinput_auto","this","puzzle","playmode","mousestart","mousemove","btn","inputLine","inputpeke","mouseend","notInputted","inputpeke_ifborder","inputMB","editmode","inputqnum","MouseEvent@tjunction","autoedit_func","mouseinputAutoPlay","KeyEvent","enablemake","TargetCursor","setminmax_customize","minx","miny","maxx","maxy","Cell","maxnum","board","cols","rows","noLP","dir","getNum","Cell@tjunction","minnum","posthook","qnum","adjborder","border","isLine","checkStableLine","removeLine","CellList","singleQnumCell","ExCell","isNum","ExCell@tjunction","Board","hasborder","hasexcell","hascross","Board@tontti","addExtraInfo","tonttigraph","addInfoList","klass","AreaTonttiGraph","setposCrosses","common","call","id","cross","length","initAdjacent","cell","getc","bx","by","Board@tjunction","disable_subclear","Border@tontti","line","val","sidecross","tontti","rebuild","enableLineNG","Border@tjunction","num","c1","sidecell","c2","LineGraph@tjunction","enabled","rebuild2","excells","excell","c","setComponentRefs","resetObjNodeList","AreaRoomGraph@tjunction","countprop","relation","cell.ques","border.line","isedgevalidbylinkobj","isnodevalid","AreaTonttiGraph:AreaRoomGraph@tontti","pointgroup","linkobj","seterr","component","getnodeobjs","setExtraData","items","cells","isnull","push","clist","obj","getObjNodeList","nodeobj","tonttinodes","getSideObjByLinkObj","getSideObjByNodeObj","key","crosses","adjacent","cross2","getSideNodesByLinkObj","sidenodes","sidenodeobj","i","nodes","getSideNodesBySeparator","resetBorderCount","bd","borders","lcnt","incdecBorderCount","isset","Graphic","gridcolor_type","paint","drawBGCells","drawBGCrosses","drawGrid","drawBorders","pid","drawDotCells","drawLines","drawQuesCells","drawQuesNumbers","drawPekes","drawChassis","drawMBs","drawTarget","g","vinc","dsize","Math","max","cw","range","vid","fillStyle","fillCircle","bw","bh","vhide","blist","px","py","ph","pw","lm","color","getLineColor","addlw","maxbx","maxby","isVert","fillRectCenter","context","y","w","h","error","errbcolor1","x","getBoardCols","offset","outputImage","minbx","getBoardRows","minby","getOffsetCols","getOffsetRows","Graphic@tjunction","hideHatena","fgcellcolor_func","numbercolor_func","Encode","decodePzpr","type","decodeNumber16","encodePzpr","encodeNumber16","Encode@tjunction","decode4Cell","encode4Cell","FileIO","decodeData","decodeCellQnum","decodeBorderLine","decodeCellQsub","encodeData","encodeCellQnum","encodeBorderLine","encodeCellQsub","AnsCheck@tontti","checklist","checkLineCount","code","checkAllCell","checkLineOverlap","checkSameConnected","checkSideCell","cell1","cell2","group","right","bottom","isLineStraight","isLineCurve","checkNoNumber","checkAllBlock","a","n","checkDoubleNumber","checkNumberAndEmptyCellSize","AnsCheck@tjunction","checkNotBranch","checkOutgoingLine","isValidNum","checkConnectAllJunction","paths","roommgr","components","found","p","path","some","failcode","add","getJunctionShapes","_info","junctions","ret","addr","getaddr","movedir","getb","checkSameAdjacent","t1","t2","checkSameShadedConnected","dirs","other","t"],"mappings":"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"}