/*! @license pzpr.js v7f9addbe (c) 2009-2025 sabo2, MIT license
 *   https://github.com/sabo2/pzprv3 */
!function(e,t){"object"==typeof module&&module.exports?module.exports=[e,t]:pzpr.classmgr.makeCustom(e,t)}(["nanro"],{MouseEvent:{inputModes:{edit:["number","clear"],play:["copynum","number","numexist","numblank","clear"]},mouseinput_other:function(){"copynum"===this.inputMode&&this.dragnumber_nanro()},mouseinput_clear:function(){this.inputFixedNumber(-1)},mouseinput_auto:function(){this.puzzle.playmode?this.mousestart||this.mousemove?"left"===this.btn?this.dragnumber_nanro():this.mousemove&&"right"===this.btn&&this.inputDot_nanro():this.mouseend&&this.notInputted()&&(this.mouseCell=this.board.emptycell,this.inputqnum()):this.puzzle.editmode&&(this.mousestart||this.mousemove?this.inputborder():this.mouseend&&this.notInputted()&&(this.mouseCell=this.board.emptycell,this.inputqnum()))},dragnumber_nanro:function(){var e=this.getcell();e.isnull||e===this.mouseCell||(this.mouseCell.isnull?(this.inputData=e.getNum(),-1===this.inputData&&(1===e.qsub?this.inputData=-2:2===e.qsub&&(this.inputData=-3)),this.mouseCell=e):-1===e.qnum&&(e.room!==this.mouseCell.room&&0<this.inputData&&(this.inputData=1===e.room.numkind?e.room.number:-2),e.setNum(this.inputData),(this.mouseCell=e).draw()))},inputDot_nanro:function(){var e=this.getcell();e.isnull||e===this.mouseCell||e.isNum()||(null===this.inputData&&(this.inputData=2===e.qsub?0:2),2===this.inputData?(e.setAnum(-1),e.setQsub(2)):0===this.inputData&&(e.setAnum(-1),e.setQsub(0)),(this.mouseCell=e).draw())}},KeyEvent:{enablemake:!0,enableplay:!0,keyinput:function(e){this.key_view(e)},key_view:function(e){this.puzzle.playmode&&("q"===e||"a"===e||"z"===e?e="s1":"w"===e||"s"===e||"x"===e?e="s2":"e"!==e&&"d"!==e&&"c"!==e&&"-"!==e||(e=" ")),this.key_inputqnum(e)}},Cell:{numberWithMB:!0,maxnum:function(){return this.room.clist.length}},Board:{cols:8,rows:8,hasborder:1},AreaNumberGraph:{enabled:!0},AreaRoomGraph:{enabled:!0,relation:{"cell.qnum":"info","cell.anum":"info","cell.qsub":"info","border.ques":"separator"},modifyOtherInfo:function(e,t){this.setNumOfRoom(e.room)},setExtraData:function(e){this.common.setExtraData.call(this,e),this.setNumOfRoom(e)},setNumOfRoom:function(e){for(var t=e.clist,n=[],o=0,i=-1,u=0,s=0;s<t.length;s++){var r=t[s].getNum();-1!==r?isNaN(n[r])?(o++,n[i=r]=1):n[r]++:1===t[s].qsub&&u++}e.number=i,e.numcnt=n[i]+u,e.numkind=o}},Graphic:{gridcolor_type:"LIGHT",paint:function(){this.drawBGCells(),this.drawGrid(),this.drawMBs(),this.drawAnsNumbers(),this.drawQuesNumbers(),this.drawBorders(),this.drawChassis(),this.drawCursor()}},Encode:{decodePzpr:function(e){this.decodeBorder(),this.decodeNumber16()},encodePzpr:function(e){this.encodeBorder(),this.encodeNumber16()},decodeKanpen:function(){this.fio.decodeAreaRoom(),this.fio.decodeCellQnum_kanpen()},encodeKanpen:function(){this.fio.encodeAreaRoom(),this.fio.encodeCellQnum_kanpen()}},FileIO:{decodeData:function(){this.decodeAreaRoom(),this.decodeCellQnum(),this.decodeCellAnumsub()},encodeData:function(){this.encodeAreaRoom(),this.encodeCellQnum(),this.encodeCellAnumsub()}},AnsCheck:{checklist:["check2x2NumberCell","checkSideAreaNumber","checkNotMultiNum","checkNumCountOver","checkConnectNumber","checkNumCountLack","checkNoEmptyArea"],check2x2NumberCell:function(){this.check2x2Block(function(e){return e.isNum()},"nm2x2")},checkSideAreaNumber:function(){this.checkSideAreaCell(function(e,t){return e.sameNumber(t)},!1,"cbSameNum")},checkNotMultiNum:function(){this.checkAllErrorRoom(function(e){return!(1<e.numkind)},"bkPlNum")},checkNumCountLack:function(){this.checkAllErrorRoom(function(e){return!(1===e.numkind&&e.number>e.numcnt)},"nmCountLt")},checkNumCountOver:function(){this.checkAllErrorRoom(function(e){return!(1===e.numkind&&e.number<e.numcnt)},"nmCountGt")},checkNoEmptyArea:function(){this.checkAllErrorRoom(function(e){return 0!==e.numkind},"bkNoNum")},checkAllErrorRoom:function(e,t){for(var n=this.board.roommgr.components,o=0;o<n.length;o++){var i=n[o];if(i&&!e(i)){if(this.failcode.add(t),this.checkOnly)break;i.clist.seterr(1)}}}}});
//# sourceMappingURL=nanro.js.map