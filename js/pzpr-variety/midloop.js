/*! @license pzpr.js v7f9addbe (c) 2009-2025 sabo2, MIT license
 *   https://github.com/sabo2/pzprv3 */
!function(e,t){"object"==typeof module&&module.exports?module.exports=[e,t]:pzpr.classmgr.makeCustom(e,t)}(["midloop"],{MouseEvent:{inputModes:{edit:["circle-shade"],play:["line","peke"]},inputFixedNumber:function(){this.inputdot()},inputdot:function(){var e,t=this.getpos(.25);this.prevPos.equals(t)||(null!==(e=t.getDot())&&(e.setDot(2!==e.getDot()?2:0),e.draw()),this.prevPos=t)},mouseinput_auto:function(){this.puzzle.playmode?"left"===this.btn?this.mousestart||this.mousemove?this.inputLine():this.mouseend&&this.notInputted()&&this.inputpeke_ifborder():"right"===this.btn&&(this.mousestart||this.mousemove)&&this.inputpeke():this.puzzle.editmode&&this.mousestart&&"left"===this.btn&&this.inputdot()}},KeyEvent:{enablemake:!0,moveTarget:function(e){return this.moveTBorder(e)},keyinput:function(e){this.key_inputdot(e)},key_inputdot:function(e){var t=this.cursor.getDot();null!==t&&("1"===e?t.setDot(2):" "!==e&&"-"!==e&&"0"!==e||t.setDot(0),t.draw())}},Cell:{qnum:0,minnum:0},Cross:{qnum:0,minnum:0},Border:{qnum:0,minnum:0,linesInDir:function(e){for(var t=new this.klass.BorderList,i=this,o={left:0,right:1,top:0,bottom:1}[e];i&&!i.isnull&&0<i.line;)t.add(i),i=i.sidecell[o].adjborder[e];return t}},Dot:{setDot:function(e){"cross"===this.piece.group&&2===e||(this.puzzle.opemgr.disCombine=!0,this.piece.setQnum(e),this.puzzle.opemgr.disCombine=!1)}},Board:{hascross:1,hasborder:1,hasdots:1},LineGraph:{enabled:!0},Graphic:{gridcolor_type:"LIGHT",irowake:!0,paint:function(){this.drawBGCells(),this.drawDashedGrid(),this.drawLines(),this.drawPekes(),this.drawDots(),this.drawChassis(),this.drawCursor(!1,this.puzzle.editmode)}},Encode:{decodePzpr:function(e){this.decodeDot(),this.puzzle.setConfig("loop_full",this.checkpflag("f"))},encodePzpr:function(e){this.outpflag=this.puzzle.getConfig("loop_full")?"f":null,this.encodeDot()}},FileIO:{decodeData:function(){this.decodeConfigFlag("f","loop_full"),this.decodeDotFile(),this.decodeBorderLine()},encodeData:function(){this.encodeConfigFlag("f","loop_full"),this.encodeDotFile(),this.encodeBorderLine()}},AnsCheck:{checklist:["checkLineExist+","checkBranchLine","checkCrossLine","checkDotLength","checkDotOnLine","checkDeadendLine+","checkNoLineIfVariant","checkOneLoop"],checkDotLength:function(){for(var e=this.board,t=0;t<e.dotsmax;t++){var i=e.dots[t];if(2===i.getDot()){var o=new this.klass.BorderList,s=new this.klass.BorderList,n=new this.klass.BorderList,r=new this.klass.BorderList;if("cell"===i.piece.group&&(o=i.piece.adjborder.top.linesInDir("top"),s=i.piece.adjborder.bottom.linesInDir("bottom"),n=i.piece.adjborder.left.linesInDir("left"),r=i.piece.adjborder.right.linesInDir("right")),"border"===i.piece.group&&(i.piece.isvert?(n=i.piece.linesInDir("left"),r=i.piece.linesInDir("right")):(o=i.piece.linesInDir("top"),s=i.piece.linesInDir("bottom"))),o.length!==s.length||n.length!==r.length){if(this.failcode.add("lnOnCenter"),this.checkOnly)break;i.piece.seterr(1),this.board.border.setnoerr(),o.seterr(1),s.seterr(1),n.seterr(1),r.seterr(1)}}}},checkDotOnLine:function(){for(var e=this.board,t=0;t<e.dotsmax;t++){var i=e.dots[t];if(2===i.getDot()&&!("cell"===i.piece.group&&0<i.piece.lcnt||"border"===i.piece.group&&0<i.piece.line)){if(this.failcode.add("lnOnDot"),this.checkOnly)break;i.piece.seterr(1),i.piece.sidecell&&new this.klass.CellList(i.piece.sidecell).seterr(1)}}}}});
//# sourceMappingURL=midloop.js.map