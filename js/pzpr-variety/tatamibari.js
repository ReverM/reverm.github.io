/*! @license pzpr.js v7f9addbe (c) 2009-2025 sabo2, MIT license
 *   https://github.com/sabo2/pzprv3 */
!function(e,t){"object"==typeof module&&module.exports?module.exports=[e,t]:pzpr.classmgr.makeCustom(e,t)}(["tatamibari"],{MouseEvent:{inputModes:{play:["border","subline"]},mouseinput_auto:function(){this.puzzle.playmode?(this.mousestart||this.mousemove)&&("left"===this.btn&&this.isBorderMode()?this.inputborder():this.inputQsubLine()):this.puzzle.editmode&&(this.mousestart||this.mousemove?this.inputTateyoko():this.mouseend&&this.notInputted()&&(this.mouseCell=null,this.inputqnum()))}},KeyEvent:{enablemake:!0,keyinput:function(e){this.key_inputMarks(e)},key_inputMarks:function(e){var t=this.cursor.getc();if("q"===e||"1"===e)t.setQnum(1);else if("w"===e||"2"===e)t.setQnum(2);else if("e"===e||"3"===e)t.setQnum(3);else if("r"===e||"4"===e)t.setQnum(-1);else if(" "===e)t.setQnum(-1);else{if("-"!==e)return;t.setQnum(-2!==t.qnum?-2:-1)}t.draw()}},Cell:{numberAsObject:!0,maxnum:3},Board:{hasborder:1},BoardExec:{adjustBoardData:function(e,t){if(e&this.TURN)for(var i={2:3,3:2},n=this.board.cellinside(t.x1,t.y1,t.x2,t.y2),r=0;r<n.length;r++){var o=n[r],s=i[o.qnum];s&&(o.qnum=s)}}},AreaRoomGraph:{enabled:!0},Graphic:{gridcolor_type:"DLIGHT",bordercolor_func:"qans",paint:function(){this.drawBGCells(),this.drawDashedGrid(),this.drawBorders(),this.drawMarks(),this.drawHatenas(),this.drawBorderQsubs(),this.drawChassis(),this.drawTarget()},drawMarks:function(){for(var e=this.vinc("cell_ques","crispEdges",!0),t=Math.max(this.cw/12,3)/2,i=.7*this.bw,n=(e.fillStyle=this.quescolor,this.range.cells),r=0;r<n.length;r++){var o=n[r],s=o.qnum,a=o.bx*this.bw,c=o.by*this.bh;e.vid="c_lp1_"+o.id,1===s||2===s?e.fillRectCenter(a,c,t,i):e.vhide(),e.vid="c_lp2_"+o.id,1===s||3===s?e.fillRectCenter(a,c,i,t):e.vhide()}}},Encode:{decodePzpr:function(e){this.decodeTatamibari()},encodePzpr:function(e){this.encodeTatamibari()},decodeTatamibari:function(){for(var e=0,t=this.outbstr,i=this.board,n=0;n<t.length;n++){var r=t.charAt(n),o=i.cell[e];if("."===r?o.qnum=-2:"1"===r?o.qnum=2:"2"===r?o.qnum=3:"3"===r?o.qnum=1:"g"<=r&&r<="z"?e+=parseInt(r,36)-16:e++,e++,!i.cell[e])break}this.outbstr=t.substr(n)},encodeTatamibari:function(){for(var e=0,t="",i=this.board,n=0;n<i.cell.length;n++){var r="",o=i.cell[n].qnum;-2===o?r=".":1===o?r="3":2===o?r="1":3===o?r="2":e++,0===e?t+=r:!r&&20!==e||(t+=(15+e).toString(36)+r,e=0)}0<e&&(t+=(15+e).toString(36)),this.outbstr+=t}},FileIO:{decodeData:function(){this.decodeCell(function(e,t){"a"===t?e.qnum=2:"b"===t?e.qnum=3:"c"===t?e.qnum=1:"-"===t&&(e.qnum=-2)}),this.decodeBorderAns()},encodeData:function(){this.encodeCell(function(e){return-2===e.qnum?"- ":1===e.qnum?"c ":2===e.qnum?"a ":3===e.qnum?"b ":". "}),this.encodeBorderAns()}},AnsCheck:{checklist:["checkBorderCross","checkNoNumber","checkSquareTatami","checkHorizonLongTatami","checkVertLongTatami","checkDoubleNumber","checkRoomRect","checkBorderDeadend+"],checkSquareTatami:function(){this.checkAllArea(this.board.roommgr,function(e,t,i,n){return 1!==n||i<=0||e*t!==i||e===t},"bkNotSquare")},checkHorizonLongTatami:function(){this.checkAllArea(this.board.roommgr,function(e,t,i,n){return 3!==n||i<=0||e*t!==i||t<e},"bkNotHRect")},checkVertLongTatami:function(){this.checkAllArea(this.board.roommgr,function(e,t,i,n){return 2!==n||i<=0||e*t!==i||e<t},"bkNotVRect")}}});
//# sourceMappingURL=tatamibari.js.map