/*! @license pzpr.js v7f9addbe (c) 2009-2025 sabo2, MIT license
 *   https://github.com/sabo2/pzprv3 */
!function(e,n){"object"==typeof module&&module.exports?module.exports=[e,n]:pzpr.classmgr.makeCustom(e,n)}(["numlin","arukone"],{MouseEvent:{inputModes:{edit:["number","clear","info-line"],play:["line","peke","info-line"]},autoedit_func:"qnum",autoplay_func:"line",dispInfoLine:function(){var e=this.board,n=this.getcell();if(!n.isnull){var i=n.getNum();if(i<0&&n.path){var t=n.path.clist.filter(function(e){return e.isValidNum()})[0];if(!t)return e.border.setinfo(-1),n.path.setedgeinfo(1),e.hasinfo=!0,void this.puzzle.redraw();i=t.getNum()}0<i&&(e.border.setinfo(-1),e.cell.filter(function(e){e.getNum()===i&&(e.setinfo(1),e.path&&e.path.setedgeinfo(1))}),e.hasinfo=!0,this.puzzle.redraw())}}},KeyEvent:{enablemake:!0},"Cell@arukone":{numberAsLetter:!0,maxnum:52},Board:{hasborder:1},LineGraph:{enabled:!0,makeClist:!0},Graphic:{gridcolor_type:"LIGHT",numbercolor_func:"qnum",irowake:!0,paint:function(){this.drawBGCells(),"numlin"===this.pid&&this.drawGrid(),this.drawPekes(),this.drawLines(),this.drawCellSquare(),this.drawQuesNumbers(),"arukone"===this.pid&&this.drawCrossSquares(),this.drawChassis(),this.drawTarget()},drawCellSquare:function(){for(var e=this.vinc("cell_number_base","crispEdges",!0),n=this.bw*("arukone"!==this.pid?.7:.5)-1,i=this.bh*("arukone"!==this.pid?.7:.5)-1,t=this.range.cells,o=0;o<t.length;o++){var s=t[o];e.vid="c_sq_"+s.id,-1!==s.qnum?(e.fillStyle=1===s.error||1===s.qinfo?this.errbcolor1:this.bgcolor,e.fillRectCenter(s.bx*this.bw,s.by*this.bh,n,i)):e.vhide()}}},"Graphic@arukone":{fontsizeratio:.5,textoption:{style:"900"},drawCrossSquares:function(){for(var e=this.vinc("cross_mark","auto",!0),n=this.board,i=(e.fillStyle=this.quescolor,.5*this.cw),t=this.range.crosses,o=0;o<t.length;o++){var s=t[o],c=s.bx,l=s.by;c!==n.maxbx&&l!==n.maxby&&c!==n.minbx&&l!==n.minby&&(e.vid="x_cm_"+s.id,e.fillRect(c*this.bw-i/2,l*this.bh-i/2,i,i))}},margin:0,drawTarget:function(){this.drawCursor(!1,this.puzzle.editmode)},drawChassis:function(){var e=this.vinc("chassis","crispEdges",!0),n=this.board,i=(this.range.x1,this.range.y1,this.range.x2),t=this.range.y2,i=(i>2*n.cols&&n.cols,t>2*n.rows&&n.rows,this.lw),t=.45*this.bw,o=.45*this.bh,s=n.cols*this.cw-2*t,n=n.rows*this.ch-2*o;e.fillStyle="black",e.vid="chs1_",e.fillRect(t-(i-.5),o-(i-.5),i,n+2*i-2),e.vid="chs2_",e.fillRect(t+s-.5,o-(i-.5),i,n+2*i-2),e.vid="chs3_",e.fillRect(t-(i-.5),o-(i-.5),s+2*i-2,i),e.vid="chs4_",e.fillRect(t-(i-.5),o+n-.5,s+2*i-2,i)},drawBGCells:function(){for(var e=this.vinc("cell_back","crispEdges",!0),n=this.board,i=this.range.cells,t=0;t<i.length;t++){var o,s,c=i[t],l=this.getBGCellColor(c);e.vid="c_full_"+c.id,l?(e.fillStyle=l,l=(c.bx-(c.bx>n.minbx+1?1.5:.6))*this.bw-.5,o=(c.by-(c.by>n.minby+1?1.5:.6))*this.bw-.5,s=(c.bx+(c.bx<n.maxbx-1?1.5:.6))*this.bw+.5,c=(c.by+(c.by<n.maxby-1?1.5:.6))*this.bw+.5,e.fillRect(l,o,s-l,c-o)):e.vhide()}}},"Encode@numlin":{decodePzpr:function(e){this.decodeNumber16()},encodePzpr:function(e){this.encodeNumber16()},decodeKanpen:function(){this.fio.decodeCellQnum_kanpen()},encodeKanpen:function(){this.fio.encodeCellQnum_kanpen()}},"Encode@arukone":{decodePzpr:function(e){this.decodeNumber16(),this.puzzle.setConfig("dontpassallcell",this.checkpflag("e"))},encodePzpr:function(e){this.encodeNumber16(),this.outpflag=this.puzzle.getConfig("dontpassallcell")?"e":null}},"FileIO@numlin":{decodeData:function(){this.decodeCellQnum(),this.decodeBorderLine()},encodeData:function(){this.encodeCellQnum(),this.encodeBorderLine()},kanpenOpen:function(){this.decodeCellQnum_kanpen(),this.decodeBorderLine()},kanpenSave:function(){this.encodeCellQnum_kanpen(),this.encodeBorderLine()},kanpenOpenXML:function(){this.decodeCellQnum_XMLBoard(),this.decodeBorderLine_XMLAnswer()},kanpenSaveXML:function(){this.encodeCellQnum_XMLBoard(),this.encodeBorderLine_XMLAnswer()},UNDECIDED_NUM_XML:-1},"FileIO@arukone":{decodeData:function(){this.decodeConfig(),this.decodeCellQnum_letter(),this.decodeBorderLine()},encodeData:function(){this.encodeConfig(),this.encodeCellQnum_letter(),this.encodeBorderLine()},decodeConfig:function(){var e=this.readLine();this.puzzle.setConfig("dontpassallcell","passallcell"!==e)},encodeConfig:function(){var e=this.puzzle.getConfig("dontpassallcell")?"dontpassallcell":"passallcell";this.writeLine(e)},decodeCellQnum_letter:function(){this.decodeCell(function(e,n){"-"===n?e.qnum=-2:"A"<=n&&n<="Z"?e.qnum=parseInt(n,36)-9:"a"<=n&&n<="z"&&(e.qnum=parseInt(n,36)-9+26)})},encodeCellQnum_letter:function(){this.encodeCell(function(e){e=e.qnum;return 0<e?e<=26?(e+9).toString(36).toUpperCase()+" ":26<e&&e<=52?(e-17).toString(36).toLowerCase()+" ":void 0:-2===e?"- ":". "})}},AnsCheck:{checklist:["checkLineExist+","checkBranchLine","checkCrossLine","checkTripleObject","checkLinkSameNumber","checkLineOverLetter","checkDeadendConnectLine+","checkDisconnectLine","checkNoLineObject+","checkNoLine_arukone+@arukone"],checkLinkSameNumber:function(){this.checkSameObjectInRoom(this.board.linegraph,function(e){return e.qnum},"nmConnDiff")},checkNoLine_arukone:function(){this.puzzle.getConfig("dontpassallcell")||this.checkNoLine()}}});
//# sourceMappingURL=numlin.js.map