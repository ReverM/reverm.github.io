/*! @license pzpr.js v7f9addbe (c) 2009-2025 sabo2, MIT license
 *   https://github.com/sabo2/pzprv3 */
!function(e,r){"object"==typeof module&&module.exports?module.exports=[e,r]:pzpr.classmgr.makeCustom(e,r)}(["kuromenbun"],{MouseEvent:{use:!0,inputModes:{edit:["border","number","clear","info-ublk"],play:["shade","unshade","info-ublk"]},autoedit_func:"areanum",autoplay_func:"cell",dispInfoUblk:function(){var e=this.getcell();this.mousereset(),!e.isnull&&e.room&&(e.room.clist.setinfo(1),e.room.adjclist.setinfo(2),this.board.hasinfo=!0,this.puzzle.redraw())}},KeyEvent:{enablemake:!0},Cell:{numberRemainsUnshaded:!0,minnum:0,maxnum:function(){return Math.round(this.board.cols*this.board.rows/1.5)}},CellList:{seterr:function(e){if(this.board.isenableSetError())for(var r=0;r<this.length;r++){var t=this[r].error;this[r].error=t<=0?e:Math.max(t,e)}},setinfo:function(e){for(var r=0;r<this.length;r++){var t=this[r].qinfo;this[r].qinfo=t<=0?e:Math.max(t,e)}}},Board:{hasborder:1,rows:8,cols:8},AreaRoomGraph:{relation:{"border.ques":"separator","cell.qans":"node"},enabled:!0,isnodevalid:function(e){return e.isUnshade()},setExtraData:function(t){t.clist=new this.klass.CellList(t.getnodeobjs());var i=new Set;t.clist.each(function(e){for(var r in e.adjacent){r=e.adjacent[r];r.isnull||r.room===t||i.add(r)}}),t.adjclist=new this.klass.CellList(Array.from(i))}},Graphic:{gridcolor_type:"DARK",enablebcolor:!0,errbcolor2:"rgb(255, 216, 216)",errcolor2:"rgb(192, 0, 0)",getBGCellColor:function(e){return 1===(e.error||e.qinfo)?1===e.qsub?this.errbcolor2:this.errbcolor1:1===e.qsub?this.bcolor:null},drawDotCells:function(){for(var e=this.vinc("cell_dot","auto",!0),r=Math.max(.12*this.cw,3),t=this.range.cells,i=0;i<t.length;i++){var o=t[i];e.vid="c_dot_"+o.id,o.isNum()||o.isShade()||2!==(o.error||o.qinfo)?e.vhide():(e.fillStyle=this.errcolor2,e.fillCircle(o.bx*this.bw,o.by*this.bh,r))}},drawShadedBorders:function(){this.vinc("wbd","crispEdges",!0);for(var e=this.context,r=(e.lineWidth=this.gw,e.strokeStyle=this.bbcolor,this.range.borders),t=0;t<r.length;t++){var i,o,s=r[t];e.vid="b_wbd_"+s.id,!s.isBorder()&&s.sidecell[0].isShade()&&s.sidecell[1].isShade()?s.isVert()?(i=s.bx*this.bw,o=s.by*this.bh,e.strokeLine(i,o-this.bh,i,o+this.bh)):(i=s.bx*this.bw,o=s.by*this.bh,e.strokeLine(i-this.bw,o,i+this.bw,o)):e.vhide()}},paint:function(){this.drawBGCells(),this.drawShadedCells(),this.drawDashedGrid(),this.drawDotCells(),this.drawQuesNumbers(),this.drawShadedBorders(),this.drawBorders(),this.drawChassis(),this.drawBoxBorders(!1),this.drawTarget()}},Encode:{decodePzpr:function(e){this.decodeBorder(),this.decodeNumber16()},encodePzpr:function(e){this.encodeBorder(),this.encodeNumber16()}},FileIO:{decodeData:function(){this.decodeBorderQues(),this.decodeCellQnum(),this.decodeCellAns()},encodeData:function(){this.encodeBorderQues(),this.encodeCellQnum(),this.encodeCellAns()}},AnsCheck:{checklist:["checkDoubleNumber","checkNumberTooHigh","checkNumberTooLow","doneShadingDecided"],checkNumberTooLow:function(){this.checkShadeCount(-1,"nmShadeLt")},checkNumberTooHigh:function(){this.checkShadeCount(1,"nmShadeGt")},checkShadeCount:function(e,r){for(var t=!this.puzzle.getConfig("multierr"),i=this.board.roommgr.components,o=0;o<i.length;o++){var s=i[o],n=s.clist.getQnumCell().getNum();if(!(n<0)){var d=s.adjclist.filter(function(e){return e.isShade()}).length;if(e<0&&d<n||0<e&&n<d){if(this.failcode.add(r),this.checkOnly)return;if(s.clist.seterr(1),s.adjclist.seterr(2),t)return}}}}}});
//# sourceMappingURL=kuromenbun.js.map