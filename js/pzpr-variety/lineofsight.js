/*! @license pzpr.js v7f9addbe (c) 2009-2025 sabo2, MIT license
 *   https://github.com/sabo2/pzprv3 */
!function(e,i){"object"==typeof module&&module.exports?module.exports=[e,i]:pzpr.classmgr.makeCustom(e,i)}(["lineofsight"],{MouseEvent:{inputModes:{edit:["number","direc","clear","info-line"],play:["line","peke","clear","info-line"]},mouseinputAutoEdit:function(){this.mousestart||this.mousemove?this.isBorderMode()?this.inputborder():this.inputdirec():this.mouseend&&this.notInputted()&&this.inputqnum()},autoplay_func:"line"},KeyEvent:{enablemake:!0,moveTarget:function(e){return!e.match(/shift/)&&this.moveTCell(e)},keyinput:function(e){this.key_inputdirec(e)||this.key_inputqnum(e)}},Cell:{minnum:0,maxnum:function(){return Math.max(this.board.cols,this.board.rows)}},Board:{hasborder:2,borderAsLine:!0},BoardExec:{adjustBoardData:function(e,i){this.adjustNumberArrow(e,i)}},LineGraph:{enabled:!0},Graphic:{irowake:!0,bgcellcolor_func:"qsub2",numbercolor_func:"qnum",margin:.5,paint:function(){this.drawBGCells(),this.drawLines(),this.drawBaseMarks(),this.drawCrossErrors(),this.drawArrowNumbers(),this.drawPekes(),this.drawTarget()},repaintParts:function(e){this.range.crosses=e.crossinside(),this.drawBaseMarks()}},Encode:{decodePzpr:function(e){this.decodeArrowNumber16(),this.puzzle.setConfig("slither_full",this.checkpflag("f"))},encodePzpr:function(e){this.outpflag=this.puzzle.getConfig("slither_full")?"f":null,this.encodeArrowNumber16()}},FileIO:{decodeData:function(){this.decodeConfigFlag("f","slither_full"),this.decodeCellDirecQnum(),this.decodeBorderLine()},encodeData:function(){this.encodeConfigFlag("f","slither_full"),this.encodeCellDirecQnum(),this.encodeBorderLine()}},AnsCheck:{checklist:["checkLineExist+","checkBranchLine","checkCrossLine","checkWrongLineInDir","checkNoLineInDir","checkOneLoop","checkDeadendLine+","checkNoLineIfVariant","checkNumberHasArrow"],checkNoLineInDir:function(){for(var e=this.board,i=0;i<e.cell.length;i++){var r=e.cell[i];if(r.qdir&&-1!==r.qnum&&0!==r.qnum){for(var n=new this.klass.Address(r.bx,r.by),t=(n.movedir(r.qdir,1),!1);!t&&!n.getb().isnull;)n.getb().isLine()?t=!0:n.movedir(r.qdir,2);if(!t){if(this.failcode.add("arNoLineSeen"),this.checkOnly)break;r.seterr(1)}}}},checkWrongLineInDir:function(){for(var e=this.board,i=0;i<e.cell.length;i++){var r=e.cell[i];if(r.qdir&&-1!==r.qnum&&-2!==r.qnum){for(var n=new this.klass.Address(r.bx,r.by),t=(n.movedir(r.qdir,1),n.getb().isvert),s=0;!s&&!n.getb().isnull;)if(n.getb().isLine()){for(s--;n.getb().isLine();)n.movedir(t?n.UP:n.LT,2);for(;n.movedir(t?n.DN:n.RT,2),s++,n.getb().isLine(););}else n.movedir(r.qdir,2);if(s&&s!==r.qnum){if(this.failcode.add("laLenNe"),this.checkOnly)break;e.border.setnoerr(),t?(e.cellinside(Math.min(r.bx,n.bx),r.by,Math.max(r.bx,n.bx),r.by).seterr(1),e.borderinside(n.bx,n.by-2*s,n.bx,n.by).seterr(1)):(e.cellinside(r.bx,Math.min(r.by,n.by),r.bx,Math.max(r.by,n.by)).seterr(1),e.borderinside(n.bx-2*s,n.by,n.bx,n.by).seterr(1)),r.seterr(1)}}}}}});
//# sourceMappingURL=lineofsight.js.map