/*! @license pzpr.js v7f9addbe (c) 2009-2025 sabo2, MIT license
 *   https://github.com/sabo2/pzprv3 */
!function(e,t){"object"==typeof module&&module.exports?module.exports=[e,t]:pzpr.classmgr.makeCustom(e,t)}(["juosan"],{MouseEvent:{inputModes:{edit:["border","number","clear"],play:["bar"]},mouseinput_auto:function(){this.puzzle.playmode?this.inputTateyoko():this.puzzle.editmode&&(this.mousestart||this.mousemove?this.inputborder():this.mouseend&&this.notInputted()&&this.inputqnum())},clickTateyoko:function(){var e=this.getcell();e.isnull||(e.setQans(("left"===this.btn?{0:12,12:13,13:0}:{0:13,12:0,13:12})[e.qans]),e.draw())}},KeyEvent:{enablemake:!0},Cell:{maxnum:function(){return Math.min(999,this.room.clist.length)}},Board:{hasborder:1,disable_subclear:!0},BoardExec:{adjustBoardData:function(e,t){if(e&this.TURN)for(var r={0:0,12:13,13:12},o=this.board.cellinside(t.x1,t.y1,t.x2,t.y2),a=0;a<o.length;a++){var n=o[a];n.qans=r[n.qans]}}},AreaRoomGraph:{enabled:!0,hastop:!0},Graphic:{gridcolor_type:"LIGHT",numbercolor_func:"fixed",fontsizeratio:.45,textoption:{position:5},paint:function(){this.drawBGCells(),this.drawDashedGrid(),this.drawTateyokos(),this.drawQuesNumbers(),this.drawBorders(),this.drawChassis(),this.drawTarget()}},Encode:{decodePzpr:function(e){this.decodeBorder(),this.decodeRoomNumber16()},encodePzpr:function(e){this.encodeBorder(),this.encodeRoomNumber16()}},FileIO:{decodeData:function(){this.decodeAreaRoom(),this.decodeCellQnum(),this.decodeCellBar()},encodeData:function(){this.encodeAreaRoom(),this.encodeCellQnum(),this.encodeCellBar()},decodeCellBar:function(){this.decodeCell(function(e,t){"1"===t?e.qans=12:"2"===t&&(e.qans=13)})},encodeCellBar:function(){this.encodeCell(function(e){if(1!==e.ques){if(0===e.qans)return"0 ";if(12===e.qans)return"1 ";if(13===e.qans)return"2 "}return". "})}},AnsCheck:{checklist:["checkParallelBarCount","checkMajorityBarOver","checkMajorityBarLack","checkEmptyCell_juosan+"],checkParallelBarCount:function(){this.checkRowsColsSeparate(this.isParallelCount,function(e){return e.qans},"baParaGe3")},checkRowsColsSeparate:function(e,t,r){var o=!0,a=this.board;e:do{for(var n={isvert:!1},i=1;i<=a.maxby;i+=2)for(var s=1;s<=a.maxbx;s+=2){for(var c=t(a.getc(s,i)),l=s;l+2<a.maxbx&&t(a.getc(l+2,i))===c;)l+=2;if(!e.call(this,a.cellinside(s,i,l,i),n)&&(o=!1,this.checkOnly))break e;s=l}n={isvert:!0};for(s=1;s<=a.maxbx;s+=2)for(i=1;i<=a.maxby;i+=2){for(var c=t(a.getc(s,i)),u=i;u+2<a.maxby&&t(a.getc(s,u+2))===c;)u+=2;if(!e.call(this,a.cellinside(s,i,s,u),n)&&(o=!1,this.checkOnly))break e;i=u}}while(0);return o||(this.failcode.add(r),this.board.cell.setnoerr()),o},isParallelCount:function(e,t){return 0===e[0].qans||(!(12!==e[0].qans||!t.isvert)||(13===e[0].qans&&!t.isvert||(!(3<=e.length)||(e.seterr(4),!1))))},checkMajorityBarOver:function(){this.checkMajorityBarCount(!0,"bkMajorBarGt")},checkMajorityBarLack:function(){this.checkMajorityBarCount(!1,"bkMajorBarLt")},checkMajorityBarCount:function(e,t){for(var r=!0,o=this.board.roommgr.components,a=0;a<o.length;a++){var n=o[a];if(n.top.isValidNum()){for(var i,s=n.clist,c=0,l=0,u=0;u<s.length;u++)12===s[u].qans?c++:13===s[u].qans&&l++;if(n.top.qnum!==(i=l<c?c:l)&&e!==i<=n.top.qnum){if(r=!1,this.checkOnly)break;l<=c?s.filter(function(e){return 12===e.qans}).seterr(4):c<l&&s.filter(function(e){return 13===e.qans}).seterr(4)}}}r||(this.failcode.add(t),this.board.cell.setnoerr())},checkEmptyCell_juosan:function(){this.checkAllCell(function(e){return 0===e.qans},"ceNoBar")}}});
//# sourceMappingURL=juosan.js.map