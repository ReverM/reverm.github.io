/*! @license pzpr.js v7f9addbe (c) 2009-2025 sabo2, MIT license
 *   https://github.com/sabo2/pzprv3 */
!function(e,n){"object"==typeof module&&module.exports?module.exports=[e,n]:pzpr.classmgr.makeCustom(e,n)}(["kakuro"],{MouseEvent:{inputModes:{edit:["clear","number"],play:["number","clear"]},mouseinput_clear:function(){this.puzzle.playmode?this.inputclean_cell():this.input51_fixed()},mouseinput_number:function(){this.mousestart&&this.inputqnum_cell51()},mouseinput_auto:function(){this.puzzle.playmode?this.mousestart&&this.inputqnum():this.puzzle.editmode&&this.mousestart&&this.input51()}},KeyEvent:{enablemake:!0,enableplay:!0,keyinput:function(e){this.puzzle.editmode?this.inputnumber51(e):this.puzzle.playmode&&this.key_inputqnum(e)}},TargetCursor:{setminmax_customize:function(){this.puzzle.editmode||(this.minx+=2,this.miny+=2)}},Cell:{qnum:-1,qnum2:-1,noNum:function(){return!this.isnull&&0===this.ques&&-1===this.anum},disInputHatena:!0,enableSubNumberArray:!0,getmaxnum:function(){return this.puzzle.editmode?45:9},getNum:function(){return this.anum},setNum:function(e){this.setAnum(0<e?e:-1),this.clrSnum()},prehook:{qnum:function(e){return!1},qnum2:function(e){return!1}}},ExCell:{ques:51,qnum:-1,qnum2:-1,maxnum:45,minnum:0,disInputHatena:!0},Board:{cols:11,rows:11,hasborder:1,hasexcell:1},BoardExec:{adjustBoardData:function(e,n){this.adjustQues51_1(e,n)},adjustBoardData2:function(e,n){this.adjustQues51_2(e,n)}},Graphic:{ttcolor:"rgb(255,255,127)",numbercolor_func:"anum",paint:function(){this.drawBGCells(),this.drawBGExCells(),this.drawTargetSubNumber(),this.drawQues51(),this.drawGrid(),this.drawBorders(),this.drawChassis_ex1(!1),this.drawSubNumbers(),this.drawAnsNumbers(),this.drawQuesNumbersOn51(),this.drawQuesNumbers(),this.drawCursor()},getBGCellColor:function(e){return 1===e.error?this.errbcolor1:51===e.ques?"rgb(192,192,192)":null},getBGExCellColor:function(e){return e.error?this.errbcolor1:"rgb(192,192,192)"},getBorderColor:function(e){var n=e.sidecell[0],e=e.sidecell[1];return n.isnull||e.isnull||51===n.ques==(51===e.ques)?null:this.quescolor},getAnsNumberText:function(e){return!e.is51cell()&&0<e.anum?""+e.anum:""}},Encode:{decodePzpr:function(e){this.decodeKakuro()},encodePzpr:function(e){this.encodeKakuro()},decodeKanpen:function(){this.fio.decodeCellQnum51_kanpen()},encodeKanpen:function(){this.fio.encodeCellQnum51_kanpen()},decodeKakuro:function(){for(var e=0,n=0,t=this.outbstr,u=this.board,r=0;r<t.length;r++){var i=t.charAt(r),o=u.cell[e];if("k"<=i&&i<="z"?e+=parseInt(i,36)-19:(o.ques=51,"."!==i&&(o.qnum2=this.decval(i),o.qnum=this.decval(t.charAt(r+1)),r++),e++),!u.cell[e]){n=r+1;break}}for(var r=n,s=1;s<u.maxbx;s+=2)u.getc(s,1).is51cell()||(u.getex(s,-1).qnum2=this.decval(t.charAt(r)),r++);for(var a=1;a<u.maxby;a+=2)u.getc(1,a).is51cell()||(u.getex(-1,a).qnum=this.decval(t.charAt(r)),r++);this.outbstr=t.substr(n)},encodeKakuro:function(e){for(var n="",t=this.board,u=0,r=0;r<t.cell.length;r++){var i="",o=t.cell[r];51===o.ques?i=o.qnum<0&&o.qnum2<0?".":""+this.encval(o.qnum2)+this.encval(o.qnum):u++,0===u?n+=i:!i&&16!==u||(n+=(u+19).toString(36)+i,u=0)}0<u&&(n+=(u+19).toString(36));for(var s=1;s<t.maxbx;s+=2)t.getc(s,1).is51cell()||(n+=this.encval(t.getex(s,-1).qnum2));for(var a=1;a<t.maxby;a+=2)t.getc(1,a).is51cell()||(n+=this.encval(t.getex(-1,a).qnum));this.outbstr+=n},decval:function(e){return"0"<=e&&e<="9"||"a"<=e&&e<="j"?parseInt(e,36):"A"<=e&&e<="Z"?parseInt(e,36)+10:-1},encval:function(e){return 0<=e&&e<=19?e.toString(36).toLowerCase():20<=e&&e<=45?(e-10).toString(36).toUpperCase():"-"}},FileIO:{decodeData:function(){this.decodeCellQnum51(),this.decodeCellAnumsub()},encodeData:function(){this.encodeCellQnum51(),this.encodeCellAnumsub()},kanpenOpen:function(){this.decodeCellQnum51_kanpen(),this.decodeQans_kanpen()},kanpenSave:function(){this.encodeCellQnum51_kanpen(),this.encodeQans_kanpen()},decodeCellQnum51_kanpen:function(){for(var e=this.board;;){var n=this.readLine();if(!n)return;var t,n=n.split(" ");if(n.length<=1)return;"0"===n[0]&&"0"===n[1]||("0"===n[0]||"0"===n[1]?(t=e.getex(2*+n[1]-1,2*+n[0]-1),"0"===n[0]?t.qnum2=+n[3]:"0"===n[1]&&(t.qnum=+n[2])):((t=e.getc(2*+n[1]-1,2*+n[0]-1)).ques=51,t.qnum=+n[2],t.qnum2=+n[3]))}},encodeCellQnum51_kanpen:function(){for(var e=this.board,n=e.minby+1;n<e.maxby;n+=2)for(var t=e.minbx+1;t<e.maxbx;t+=2){var u=[n+1>>1,t+1>>1,0,0];if(-1!==t||-1!==n)if(-1===t||-1===n){var r=e.getex(t,n);-1===t&&(u[2]=r.qnum),-1===n&&(u[3]=r.qnum2)}else{r=e.getc(t,n);if(51!==r.ques)continue;u[2]=r.qnum,u[3]=r.qnum2}this.writeLine(u.join(" "))}this.writeLine("")},decodeQans_kanpen:function(){this.decodeCellExCell(function(e,n){"."!==n&&"0"!==n&&(e.anum=+n)})},encodeQans_kanpen:function(){this.encodeCellExCell(function(e){return 51!==e.ques?(0<e.anum?e.anum:"0")+" ":". "})},kanpenOpenXML:function(){this.decodeCellQnum51_XMLBoard(),this.decodeCellAnum_kakuro_XMLAnswer()},kanpenSaveXML:function(){this.encodeCellQnum51_XMLBoard(),this.encodeCellAnum_kakuro_XMLAnswer()},decodeCellQnum51_XMLBoard:function(){for(var e=this.xmldoc.querySelectorAll("board wall"),n=this.board,t=0;t<e.length;t++){var u=e[t],r=2*+u.getAttribute("c")-3,i=2*+u.getAttribute("r")-3,o=+u.getAttribute("a"),u=+u.getAttribute("b"),r=n.getobj(r,i);r.ques=51,r.qnum=o,r.qnum2=u}},encodeCellQnum51_XMLBoard:function(){for(var e=this.xmldoc.querySelector("board"),n=this.board,t=-1;t<n.maxby;t+=2)for(var u=-1;u<n.maxbx;u+=2){var r,i=n.getobj(u,t);51===i.ques&&(r=i.qnum,i=i.qnum2,e.appendChild(this.createXMLNode("wall",{r:t+3>>1,c:u+3>>1,a:r,b:i})))}},PBOX_ADJUST:2,decodeCellAnum_kakuro_XMLAnswer:function(){this.decodeCellXMLArow(function(e,n){"n-1"!==n&&"n0"!==n&&51!==e.ques&&(e.anum=+n.substr(1))})},encodeCellAnum_kakuro_XMLAnswer:function(){this.encodeCellXMLArow(function(e){return 0===e.ques&&-1===e.anum?"n0":"n"+e.anum})}},AnsCheck:{checklist:["checkSameNumberInLine","checkSumOfNumberInLine","checkNoNumCell+"],checkSameNumberInLine:function(){this.checkRowsColsPartly(this.isSameNumber,function(e){return e.is51cell()},"nmDupRow")},isSameNumber:function(e,n){e=this.isDifferentAnsNumberInClist(e);return e||n.keycell.seterr(1),e},checkSumOfNumberInLine:function(){this.checkRowsColsPartly(this.isTotalNumber,function(e){return e.is51cell()},"nmSumRowNe")},isTotalNumber:function(e,n){for(var t=n.key51num,u=0,r=0;r<e.length;r++){if(!(0<e[r].anum))return!0;u+=e[r].anum}t=t<=0||u===t;return t||(n.keycell.seterr(1),e.seterr(1)),t}}});
//# sourceMappingURL=kakuro.js.map