/*! @license pzpr.js v7f9addbe (c) 2009-2025 sabo2, MIT license
 *   https://github.com/sabo2/pzprv3 */
!function(e,t){"object"==typeof module&&module.exports?module.exports=[e,t]:pzpr.classmgr.makeCustom(e,t)}(["mannequin"],{MouseEvent:{use:!0,inputModes:{edit:["border","number","clear"],play:["shade","unshade","number"]},autoedit_func:"areanum",autoplay_func:"cell"},KeyEvent:{enablemake:!0,enableplay:!0,keyinput:function(e){!this.puzzle.editmode&&-1===this.puzzle.mouse.inputMode.indexOf("number")||this.key_inputqnum(e)}},Cell:{enableSubNumberArray:!0,disableAnum:!0,minnum:0,maxnum:function(){return Math.min(999,this.room.clist.length-2)},posthook:{qans:function(e){this.board.roommgr.setExtraData(this.room)}},distanceTo:function(e){var t=new Set,s={};for(s[this.id]=0;;){var i,n,a,o=null,r=-1;for(i in s)t.has(+i)||(n=s[i],(-1===r||n<r)&&(o=this.board.cell[+i],r=n));if(!o||o===e)break;for(a in o.adjacent){var c,d,h=o.adjacent[a];h.isnull||t.has(+h.id)||o.adjborder[a].isBorder()||(d=r+1,(void 0===(c=s[h.id])||d<c)&&(s[h.id]=d))}t.add(o.id)}return s[e.id]}},CellList:{checkCmp:function(){if(void 0!==this.scnt)return 2===this.scnt;this.scnt=0,this.shade1=null,this.shade2=null;for(var e=0;e<this.length;e++)1===this[e].qans&&(0===this.scnt?this.shade1=this[e]:1===this.scnt&&(this.shade2=this[e]),this.scnt++);return 2===this.scnt}},Board:{hasborder:1},Border:{posthook:{ques:function(){var e=this.sidecell[0].room,t=this.sidecell[1].room;e&&this.board.roommgr.setExtraData(e),t&&e!==t&&this.board.roommgr.setExtraData(t)}}},AreaUnshadeGraph:{enabled:!0},AreaRoomGraph:{enabled:!0,hastop:!0,setExtraData:function(e){this.common.setExtraData.call(this,e),e.distance=null}},Graphic:{gridcolor_type:"LIGHT",autocmp:"room",enablebcolor:!0,bgcellcolor_func:"qcmp",subcolor:"rgb(40, 40, 80)",paint:function(){this.drawBGCells(),this.drawGrid(),this.drawShadedCells(),this.drawTargetSubNumber(!0),this.drawDotCells(),this.drawQuesNumbers(),this.drawSubNumbers(!0),this.drawBorders(),this.drawChassis(),this.drawBoxBorders(!1),this.drawTarget()},drawTarget:function(){this.drawCursor(!0,this.puzzle.editmode||0<=this.puzzle.mouse.inputMode.indexOf("number"))}},Encode:{decodePzpr:function(e){this.decodeBorder(),this.decodeRoomNumber16()},encodePzpr:function(e){this.encodeBorder(),this.encodeRoomNumber16()}},FileIO:{decodeData:function(){this.decodeBorderQues(),this.decodeCellQnum(),this.decodeCellAns(),this.decodeCellSnum()},encodeData:function(){this.encodeBorderQues(),this.encodeCellQnum(),this.encodeCellAns(),this.encodeCellSnum()}},AnsCheck:{checklist:["checkOverShadeCell","checkConnectUnshade","checkValueMatch","checkSideAreaValues","checkSingleShadeCell+","checkNoShadeCellInArea++"],checkOverShadeCell:function(){this.checkShadeCount(3,"bkShadeGt2")},checkSingleShadeCell:function(){this.checkShadeCount(1,"bkShadeLt2")},checkNoShadeCellInArea:function(){this.checkShadeCount(0,"bkNoShade")},checkShadeCount:function(e,t){for(var s=this.board.roommgr.components,i=0;i<s.length;i++){var n=s[i];if(!(3===e&&n.clist.scnt<=2)&&!(e<3&&e!==n.clist.scnt)){if(this.failcode.add(t),this.checkOnly)break;n.clist.seterr(1)}}},checkValueMatch:function(){for(var e=this.board.roommgr.components,t=0;t<e.length;t++){var s=e[t];if(2===s.clist.scnt&&s.top.isValidNum()&&(null===s.distance&&(s.distance=s.clist.shade1.distanceTo(s.clist.shade2)),s.distance!==s.top.getNum()+1)){if(this.failcode.add("bkShadeDistNe"),this.checkOnly)break;s.clist.seterr(1)}}},checkSideAreaValues:function(){this.checkSideAreaSize(this.board.roommgr,function(e){return 2!==e.clist.scnt?0:(null===e.distance&&(e.distance=e.clist.shade1.distanceTo(e.clist.shade2)),e.distance)},"bsEqShade")}}});
//# sourceMappingURL=mannequin.js.map