/*! @license pzpr.js v7f9addbe (c) 2009-2025 sabo2, MIT license
 *   https://github.com/sabo2/pzprv3 */
!function(t,e){"object"==typeof module&&module.exports?module.exports=[t,e]:pzpr.classmgr.makeCustom(t,e)}(["lollipops"],{MouseEvent:{inputModes:{edit:["clear"],play:["objblank","clear"]},mouseinput_auto:function(){this.puzzle.playmode&&"right"===this.btn&&this.mousemove&&this.inputDot(),"left"===this.btn&&this.inputTateyoko(),this.mouseend&&(this.mouseCell=null,this.notInputted()&&(this.puzzle.getConfig("mouseonly")?"left"===this.btn?this.inputFixedNumber(1):this.puzzle.playmode&&this.inputDot():this.inputqnum()))},inputTateyoko:function(){var t,e,i,n=this.getcell();(n=1===n.getNum()?this.mouseCell:n)&&!n.isnull&&(this.mouseCell!==n?this.firstPoint.set(this.inputPoint):null!==this.firstPoint.bx&&(t=null,e=this.inputPoint.bx-this.firstPoint.bx,i=this.inputPoint.by-this.firstPoint.by,.4<=Math.abs(i)?t=2:.4<=Math.abs(e)&&(t=3),null!==t&&(n.getNum()===t&&(t=-1),n.setNum(t),n.draw(),this.mousereset())),this.mouseCell=n)},inputDot:function(){var t=this.getcell();t.isnull||t===this.mouseCell||-1!==t.qnum||(null===this.inputData&&(this.inputData=1===t.qsub?0:1),t.setAnum(-1),t.setQsub(1===this.inputData?1:0),(this.mouseCell=t).draw())}},KeyEvent:{enablemake:!0,enableplay:!0,keyinput:function(t){this.puzzle.getConfig("mouseonly")||("1"===t||"q"===t||"a"===t||"z"===t?t="1":"2"===t||"w"===t||"s"===t||"x"===t?t="2":"3"===t||"e"===t||"d"===t||"c"===t?t="3":!this.puzzle.playmode||"4"!==t&&"r"!==t&&"f"!==t&&"v"!==t?"5"!==t&&"t"!==t&&"g"!==t&&"b"!==t||(t=" "):t="s1",this.key_inputqnum(t))}},Cell:{numberAsObject:!0,disInputHatena:!0,maxnum:3,draw:function(){this.drawaround()}},AreaNumberGraph:{enabled:!0},BoardExec:{adjustBoardData:function(t,e){if(t&this.TURN)for(var i=this.board.cellinside(e.x1,e.y1,e.x2,e.y2),n=0;n<i.length;n++){var s=i[n];1<s.qnum?s.qnum=5-s.qnum:1<s.anum&&(s.anum=5-s.anum)}}},Graphic:{paint:function(){this.drawBGCells(),this.drawDashedGrid(),this.drawBorders(),this.drawDotCells(),this.drawTateyokos(),this.drawCircles(),this.drawChassis(),this.drawCursor(!0,!this.puzzle.getConfig("mouseonly"))},getCircleStrokeColor:function(t){return 1===t.qnum?this.getQuesNumberColor(t):1===t.anum?this.getAnsNumberColor(t):null},getCircleFillColor:function(t){return 1===t.qnum||1===t.anum?this.getBGCellColor(t)||"white":null},getBarColor:function(t){return-1!==t.qnum?this.getQuesNumberColor(t):this.getAnsNumberColor(t)},drawTateyokos:function(){for(var t=this.vinc("cell_tateyoko","crispEdges"),e=Math.max(this.cw/8,3)/2,i=this.range.cells,n=0;n<i.length;n++){var s,l=i[n],o=l.bx*this.bw,u=l.by*this.bh,h=l.getNum();t.vid="c_bar1_"+l.id,2===h?(s=this.bh,1===l.adjacent.top.getNum()&&(s+=this.bh/4,u-=this.bh/4),1===l.adjacent.bottom.getNum()&&(s+=this.bh/4,u+=this.bh/4),t.fillStyle=this.getBarColor(l,!0),t.fillRectCenter(o,u,e+this.addlw/2,s)):t.vhide(),t.vid="c_bar2_"+l.id,3===h?(s=this.bw,1===l.adjacent.left.getNum()&&(s+=this.bw/4,o-=this.bw/4),1===l.adjacent.right.getNum()&&(s+=this.bw/4,o+=this.bw/4),t.fillStyle=this.getBarColor(l,!1),t.fillRectCenter(o,u,s,e+this.addlw/2)):t.vhide()}this.addlw=0}},Encode:{decodePzpr:function(t){this.decodeNumber10()},encodePzpr:function(t){this.encodeNumber10()}},FileIO:{decodeData:function(){this.decodeCellQnum(),this.decodeCellAnumsub()},encodeData:function(){this.encodeCellQnum(),this.encodeCellAnumsub()}},AnsCheck:{checklist:["checkAdjacent","checkBarDirection","checkIdentical","checkSingleObject+"],checkAdjacent:function(){for(var t=this.board.nblkmgr.components,e=0;e<t.length;e++){var i=t[e];if(!(i.clist.length<2)){if(2===i.clist.length){var n=i.clist[0].getNum(),s=i.clist[1].getNum();if(n!==s&&(1===n||1===s))continue}if(this.failcode.add("bkSizeGt2"),this.checkOnly)break;i.clist.seterr(1)}}},checkBarDirection:function(){for(var t=this.board.nblkmgr.components,e=0;e<t.length;e++){var i=t[e];if(2===i.clist.length){var n=i.clist[0].getNum(),s=i.clist[1].getNum();if(n!==s&&(1===n||1===s)){var l=i.clist.getRectSize();if((2!==l.rows||2!==n&&2!==s)&&(2!==l.cols||3!==n&&3!==s)){if(this.failcode.add("baDir"),this.checkOnly)break;i.clist.seterr(1)}}}}},checkIdentical:function(){var s=this.board,l=!1;this.checkRowsCols(function(t){for(var e=null,i=0;i<t.length;i++){var n=t[i];if(n.isNum()){if(e&&e.getNum()===n.getNum()){if(this.checkOnly)return!1;l=!0,s.cellinside(e.bx,e.by,n.bx,n.by).seterr(1)}e=n}}return!0},"nmDupRow"),l&&this.failcode.add("nmDupRow")},checkSingleObject:function(){this.checkAllArea(this.board.nblkmgr,function(t,e,i,n){return 1<i},"bkSizeLt2")}}});
//# sourceMappingURL=lollipops.js.map