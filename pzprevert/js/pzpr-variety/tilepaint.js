/*! @license pzpr.js v7f9addbe (c) 2009-2025 sabo2, MIT license
 *   https://github.com/sabo2/pzprv3 */
!function(t,e){"object"==typeof module&&module.exports?module.exports=[t,e]:pzpr.classmgr.makeCustom(t,e)}(["tilepaint"],{MouseEvent:{use:!0,inputModes:{edit:["clear","number","border","bgpaint"],play:["shade","unshade"]},mouseinput:function(){"shade"===this.inputMode||"unshade"===this.inputMode?this.inputtile():this.common.mouseinput.call(this)},mouseinput_clear:function(){this.input51_fixed()},mouseinput_number:function(){this.mousestart&&this.inputqnum_cell51()},mouseinput_other:function(){"bgpaint"===this.inputMode&&this.inputBGcolor1()},mouseinput_auto:function(){this.puzzle.playmode?(this.mousestart||this.mousemove)&&this.inputtile():this.puzzle.editmode&&("left"===this.btn?(this.mousestart||this.mousemove)&&this.inputborder():"right"===this.btn&&(this.mousestart||this.mousemove)&&this.inputBGcolor1(),this.mouseend&&this.notInputted()&&this.input51())},inputBGcolor1:function(){var t=this.getcell();t.isnull||t===this.mouseCell||t.is51cell()||(null===this.inputData&&(this.inputData=0===t.qsub?3:0),t.setQsub(this.inputData),(this.mouseCell=t).draw())}},KeyEvent:{enablemake:!0,keyinput:function(t){this.inputnumber51(t)}},Cell:{qnum:0,qnum2:0,disInputHatena:!0,getmaxnum:function(){var t=this.board;return this.puzzle.cursor.detectTarget(this)===this.RT?t.cols-(this.bx>>1)-1:t.rows-(this.by>>1)-1},minnum:0,set51cell:function(){this.setQues(51),this.setQnum(0),this.setQnum2(0),this.clrShade(),this.setQsub(0),this.set51aroundborder()},remove51cell:function(){this.setQues(0),this.setQnum(0),this.setQnum2(0),this.clrShade(),this.setQsub(0)},set51aroundborder:function(){for(var t=this.getdir4cblist(),e=0;e<t.length;e++){var s=t[e][0],n=t[e][1];n.isnull||n.setQues(this.is51cell()^s.is51cell()?1:0)}}},ExCell:{ques:51,qnum:0,qnum2:0,disInputHatena:!0,getmaxnum:function(){var t=this.board;return-1===this.by?t.rows:t.cols},minnum:0},CellList:{subclear:function(){var t=[],e={};0<this.length&&(t=this[0].getproplist(["sub","info"]),e=this[0].propnorec);for(var s=0;s<this.length;s++)for(var n=this[s],i=0;i<t.length;i++){var r=t[i],u=n.constructor.prototype[r];n[r]===u||"qsub"===r&&3===n.qsub||(e[r]||n.addOpe(r,n[r],u),n[r]=u)}}},Board:{hasborder:1,hasexcell:1},BoardExec:{adjustBoardData:function(t,e){this.adjustQues51_1(t,e)},adjustBoardData2:function(t,e){this.adjustQues51_2(t,e)}},AreaRoomGraph:{enabled:!0,isnodevalid:function(t){return!t.is51cell()}},Graphic:{enablebcolor:!0,bgcellcolor_func:"qsub3",bbcolor:"rgb(96, 96, 96)",paint:function(){this.drawBGCells(),this.drawBGExCells(),this.drawShadedCells(),this.drawQues51(),this.drawGrid(),this.drawBorders(),this.drawBoxBorders(!0),this.drawChassis_ex1(!0),this.drawQuesNumbersOn51(),this.drawTarget()}},Encode:{decodePzpr:function(t){this.decodeBorder(),this.decodeTilePaint()},encodePzpr:function(t){this.encodeBorder(),this.encodeTilePaint()},decodeTilePaint:function(){var t=0,e=0,s=this.outbstr,n=this.board;n.disableInfo();for(var i=0;i<s.length;i++){var r=s.charAt(i),u=n.cell[t];if("g"<=r&&r<="z"?t+=parseInt(r,36)-16:(u.set51cell(),"-"===r?(u.qnum2="."!==s.charAt(i+1)?parseInt(s.charAt(i+1),16):-1,u.qnum=parseInt(s.substr(i+2,2),16),i+=3):"+"===r?(u.qnum2=parseInt(s.substr(i+1,2),16),u.qnum="."!==s.charAt(i+3)?parseInt(s.charAt(i+3),16):-1,i+=3):"="===r?(u.qnum2=parseInt(s.substr(i+1,2),16),u.qnum=parseInt(s.substr(i+3,2),16),i+=4):(u.qnum2="."!==s.charAt(i)?parseInt(s.charAt(i),16):-1,u.qnum="."!==s.charAt(i+1)?parseInt(s.charAt(i+1),16):-1,i+=1)),t++,!n.cell[t]){e=i+1;break}}n.enableInfo();for(t=0,i=e;i<s.length;i++){var r=s.charAt(i),o=n.excell[t];if("."===r?o.qnum2=-1:"-"===r?(o.qnum2=parseInt(s.substr(i+1,1),16),i+=2):o.qnum2=parseInt(r,16),++t>=n.cols){e=i+1;break}}for(i=e;i<s.length;i++){r=s.charAt(i),o=n.excell[t];if("."===r?o.qnum=-1:"-"===r?(o.qnum=parseInt(s.substr(i+1,2),16),i+=2):o.qnum=parseInt(r,16),++t>=n.cols+n.rows){e=i+1;break}}this.outbstr=s.substr(e)},encodeTilePaint:function(t){for(var e="",s=this.board,n=0,i=0;i<s.cell.length;i++){var r="",u=s.cell[i];51===u.ques?(r=(r+=u.qnum2.toString(16))+u.qnum.toString(16),16<=u.qnum&&16<=u.qnum2?r="="+r:16<=u.qnum?r="-"+r:16<=u.qnum2&&(r="+"+r)):n++,0===n?e+=r:!r&&20!==n||(e+=(n+15).toString(36)+r,n=0)}0<n&&(e+=(n+15).toString(36));for(i=0;i<s.cols;i++)(o=s.excell[i].qnum2)<0?e+=".":o<16?e+=o.toString(16):o<256&&(e+="-"+o.toString(16));for(var o,i=s.cols;i<s.cols+s.rows;i++)(o=s.excell[i].qnum)<0?e+=".":o<16?e+=o.toString(16):o<256&&(e+="-"+o.toString(16));this.outbstr+=e}},FileIO:{decodeData:function(){this.decodeAreaRoom(),this.decodeCellQnum51(),this.decodeCell(function(t,e){"#"===e?t.qans=1:"+"===e?t.qsub=1:"-"===e&&(t.qsub=3)})},encodeData:function(){this.encodeAreaRoom(),this.encodeCellQnum51(),this.encodeCell(function(t){return 1===t.qans?"# ":1===t.qsub?"+ ":3===t.qsub?"- ":". "})}},AnsCheck:{checklist:["checkShadeCellExist","checkSameColorTile","checkRowsColsShadeCell"],checkRowsColsShadeCell:function(){this.checkRowsColsPartly(this.isShadeCount,function(t){return t.is51cell()},"asShadeNe")},isShadeCount:function(t,e){var s=e.key51num,n=t.filter(function(t){return t.isShade()}).length,n=s<0||n===s;return n||(e.keycell.seterr(1),t.seterr(1)),n}}});
//# sourceMappingURL=tilepaint.js.map