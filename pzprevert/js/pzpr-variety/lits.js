/*! @license pzpr.js v7f9addbe (c) 2009-2025 sabo2, MIT license
 *   https://github.com/sabo2/pzprv3 */
!function(e,t){"object"==typeof module&&module.exports?module.exports=[e,t]:pzpr.classmgr.makeCustom(e,t)}(["lits","norinori","invlitso"],{MouseEvent:{use:!0,mouseinput_auto:function(){this.puzzle.playmode?(this.mousestart||this.mousemove)&&this.inputcell():this.puzzle.editmode&&(this.mousestart||this.mousemove)&&this.inputborder()}},"MouseEvent@lits,invlitso":{inputModes:{edit:["border","info-blk"],play:["shade","unshade","info-blk"]}},"MouseEvent@norinori":{inputModes:{edit:["border"],play:["shade","unshade"]},shadeCount:0,mousereset:function(){this.shadeCount=0,this.common.mousereset.call(this)},inputcell:function(){var e=this.getcell();e.isnull||e===this.mouseCell||(this.common.inputcell.call(this),1===this.inputData&&(++this.shadeCount,2<=this.shadeCount&&this.mousereset()))}},Cell:{posthook:{qans:function(e){this.room.checkAutoCmp()}}},"Cell@lits,invlitso":{shape:null},Board:{hasborder:1},"Board@lits,invlitso":{addExtraInfo:function(){this.tetrograph=this.addInfoList(this.klass.AreaTetrominoGraph)}},"CellList@lits,invlitso":{checkCmp:function(){for(var e=0,t=null,o="lits"===this.pid?1:0,n=0;n<this.length;n++)if(this[n].qans===o)if(e++,t){if(t!==this[n].tetro)return!1}else t=this[n].tetro;return 4===e}},"CellList@norinori":{checkCmp:function(){for(var e=0,t=0;t<this.length;t++)1===this[t].qans&&e++;return 2===e}},AreaShadeGraph:{enabled:!0},AreaRoomGraph:{enabled:!0},"AreaTetrominoGraph:AreaShadeGraph@lits":{},"AreaTetrominoGraph:AreaUnshadeGraph@invlitso":{},"AreaTetrominoGraph@lits,invlitso#1":{enabled:!0,relation:{"cell.qans":"node","border.ques":"separator"},setComponentRefs:function(e,t){e.tetro=t},getObjNodeList:function(e){return e.tetronodes},resetObjNodeList:function(e){e.tetronodes=[]},isedgevalidbylinkobj:function(e){return!e.isBorder()},resetExtraData:function(e){e.shape=null},setExtraData:function(e){var t=e.clist=new this.klass.CellList(e.getnodeobjs()),o=null;4===t.length&&(o=t.getBlockShapes().canon),e.shape=o}},Graphic:{autocmp:"room",gridcolor_type:"DARK",qanscolor:"rgb(96, 96, 96)",shadecolor:"rgb(96, 96, 96)",qcmpbgcolor:"rgb(96, 255, 160)",errbcolor2:"rgb(192, 192, 255)",getBGCellColor:function(e){return 2===e.error||2===e.qinfo?this.errbcolor2:this.getBGCellColor_qcmp(e)},paint:function(){this.drawBGCells(),this.drawShadedCells(),this.drawDotCells(),this.drawGrid(),this.drawBorders(),this.drawChassis()}},Encode:{decodePzpr:function(e){var t=this.puzzle.pzpr.parser;(e===t.URL_PZPRV3&&this.checkpflag("d")||e===t.URL_PZPRAPP&&!this.checkpflag("c"))&&"norinori"!==this.pid?this.decodeLITS_old():this.decodeBorder()},encodePzpr:function(e){e===this.puzzle.pzpr.parser.URL_PZPRAPP&&"lits"===this.pid&&(this.outpflag="c"),this.encodeBorder()},decodeKanpen:function(){this.fio.decodeAreaRoom()},encodeKanpen:function(){this.fio.encodeAreaRoom()},decodeLITS_old:function(){for(var e=this.outbstr,t=this.board,o=0;o<t.border.length;o++){var n=t.border[o],i=n.sidecell[0],r=n.sidecell[1];i.isnull||r.isnull||e.charAt(i.id)===e.charAt(r.id)||(n.ques=1)}this.outbstr=e.substr(t.cell.length)}},FileIO:{decodeData:function(){this.decodeAreaRoom(),this.decodeCellAns()},encodeData:function(){this.encodeAreaRoom(),this.encodeCellAns()},kanpenOpen:function(){this.decodeAreaRoom(),this.decodeCellAns()},kanpenSave:function(){this.encodeAreaRoom(),this.encodeCellAns()},kanpenOpenXML:function(){this.decodeAreaRoom_XMLBoard(),this.decodeCellAns_XMLAnswer()},kanpenSaveXML:function(){this.encodeAreaRoom_XMLBoard(),this.encodeCellAns_XMLAnswer()}},"AnsCheck@lits,invlitso#1":{checklist:["check2x2ShadeCell","checkOverShadeCellInArea","checkSeqBlocksInRoom","checkTetromino","checkConnectShade","checkNoShadeCellInArea@lits","checkLessShadeCellInArea"]},"AnsCheck@norinori#1":{checklist:["checkOverShadeCell","checkOverShadeCellInArea","checkSingleShadeCell","checkSingleShadeCellInArea","checkNoShadeCellInArea"]},"AnsCheck@lits":{checkOverShadeCellInArea:function(){this.checkAllBlock(this.board.roommgr,function(e){return e.isShade()},function(e,t,o,n){return o<=4},"bkShadeGt4")},checkLessShadeCellInArea:function(){this.checkAllBlock(this.board.roommgr,function(e){return e.isShade()},function(e,t,o,n){return 4<=o},"bkShadeLt4")}},"AnsCheck@invlitso":{checkOverShadeCellInArea:function(){this.checkAllBlock(this.board.roommgr,function(e){return e.isUnshade()},function(e,t,o,n){return 4<=o},"bkShadeGt4")},checkLessShadeCellInArea:function(){this.checkAllBlock(this.board.roommgr,function(e){return e.isUnshade()},function(e,t,o,n){return o<=4},"bkShadeLt4")}},"AnsCheck@lits,invlitso#2":{checkSeqBlocksInRoom:function(){for(var e=this.board.roommgr.components,t=0;t<e.length;t++){for(var o=e[t].clist,n=null,i=!0,r=0;r<o.length;r++)if(null!==o[r].tetro&&o[r].tetro!==n){if(null!==n){i=!1;break}n=o[r].tetro}if(!i){if(this.failcode.add("bkShadeDivide"),this.checkOnly)break;o.seterr(1)}}},checkTetromino:function(){var e=!0,t=this.board;function o(e,t){e=e.tetro,t=t.tetro;return null!==e&&null!==t&&e!==t&&null!==e.shape&&null!==t.shape&&e.shape===t.shape}for(var n=0;n<t.cell.length;n++){var i=t.cell[n],r=i.adjacent.right;if(!r.isnull&&o(i,r)){if(e=!1,this.checkOnly)break;i.tetro.clist.seterr(2),r.tetro.clist.seterr(2)}if(!(r=i.adjacent.bottom).isnull&&o(i,r)){if(e=!1,this.checkOnly)break;i.tetro.clist.seterr(2),r.tetro.clist.seterr(2)}}e||this.failcode.add("bsSameShape")}},"AnsCheck@norinori":{checkOverShadeCell:function(){this.checkAllArea(this.board.sblkmgr,function(e,t,o,n){return o<=2},"csGt2")},checkSingleShadeCell:function(){this.checkAllArea(this.board.sblkmgr,function(e,t,o,n){return 2<=o},"csLt2")},checkOverShadeCellInArea:function(){this.checkAllBlock(this.board.roommgr,function(e){return e.isShade()},function(e,t,o,n){return o<=2},"bkShadeGt2")},checkSingleShadeCellInArea:function(){this.checkAllBlock(this.board.roommgr,function(e){return e.isShade()},function(e,t,o,n){return 1!==o},"bkShadeLt2")}}});
//# sourceMappingURL=lits.js.map