/*! @license pzpr.js v7f9addbe (c) 2009-2025 sabo2, MIT license
 *   https://github.com/sabo2/pzprv3 */
!function(e,o){"object"==typeof module&&module.exports?module.exports=[e,o]:pzpr.classmgr.makeCustom(e,o)}(["shikaku","aho"],{MouseEvent:{inputModes:{edit:["number","clear"],play:["border","subline"]},autoedit_func:"qnum",autoplay_func:"border"},KeyEvent:{enablemake:!0},Board:{hasborder:1},AreaRoomGraph:{enabled:!0},Graphic:{hideHatena:!0,gridcolor_type:"DLIGHT",bordercolor_func:"qans",fontShadecolor:"white",numbercolor_func:"fixed_shaded",circleratio:[.4,.4],paint:function(){this.drawBGCells(),this.drawDashedGrid(),this.drawBorders(),this.drawCircledNumbers(),this.drawBorderQsubs(),this.drawChassis(),this.drawTarget()},circlestrokecolor_func:"null",getCircleFillColor:function(e){return-1!==e.qnum?1===e.error?this.errcolor1:this.quescolor:null}},Encode:{decodePzpr:function(e){this.decodeNumber16()},encodePzpr:function(e){this.encodeNumber16()},decodeKanpen:function(){this.fio.decodeCellQnum_kanpen()},encodeKanpen:function(){this.fio.encodeCellQnum_kanpen()}},FileIO:{decodeData:function(){this.decodeCellQnum(),this.decodeBorderAns()},encodeData:function(){this.encodeCellQnum(),this.encodeBorderAns()},kanpenOpen:function(){this.decodeCellQnum_kanpen(),this.decodeAnsSquareRoom()},kanpenSave:function(){this.encodeCellQnum_kanpen(),this.encodeAnsSquareRoom()},decodeAnsSquareRoom:function(){for(var e,o=this.board,r=[],n=0,t=+this.readLine();n<t&&(e=this.readLine());n++){for(var i=e.split(" "),c=0;c<4;c++)isNaN(i[c])||(i[c]=2*+i[c]+1);o.cellinside(i[1],i[0],i[3],i[2]).each(function(e){r[e.id]=n})}this.rdata2Border(!1,r),o.roommgr.rebuild()},encodeAnsSquareRoom:function(){var e=this.board,o=(e.roommgr.rebuild(),e.roommgr.components);this.writeLine(o.length);for(var r=0;r<o.length;r++){var n=o[r].clist.getRectSize();this.writeLine([n.y1>>1,n.x1>>1,n.y2>>1,n.x2>>1,""].join(" "))}},kanpenOpenXML:function(){this.decodeCellQnum_shikaku_XMLBoard(),this.decodeAnsSquareRoom_XMLAnswer()},kanpenSaveXML:function(){this.encodeCellQnum_shikaku_XMLBoard(),this.encodeAnsSquareRoom_XMLAnswer()},decodeCellQnum_shikaku_XMLBoard:function(){this.decodeCellXMLBoard(function(e,o){1<=o?e.qnum=o:-1===o&&(e.qnum=-2)})},encodeCellQnum_shikaku_XMLBoard:function(){this.encodeCellXMLBoard(function(e){var o=0;return 1<=e.qnum?o=e.qnum:-2===e.qnum&&(o=-1),o})},decodeAnsSquareRoom_XMLAnswer:function(){for(var e=this.xmldoc.querySelectorAll("answer area"),o=this.board,r=[],n=0;n<e.length;n++)for(var t=e[n],i=2*+t.getAttribute("c0")-1,c=2*+t.getAttribute("r0")-1,a=2*+t.getAttribute("c1")-1,d=2*+t.getAttribute("r1")-1,s=i;s<=a;s+=2)for(var u=c;u<=d;u+=2)r[o.getc(s,u).id]=n;this.rdata2Border(!1,r),o.roommgr.rebuild()},encodeAnsSquareRoom_XMLAnswer:function(){for(var e=this.xmldoc.querySelector("answer"),o=this.board,r=(o.roommgr.rebuild(),o.roommgr.components),n=0;n<r.length;n++){var t=r[n].clist.getRectSize();e.appendChild(this.createXMLNode("area",{r0:1+(t.y1>>1),c0:1+(t.x1>>1),r1:1+(t.y2>>1),c1:1+(t.x2>>1)}))}}},AnsCheck:{checklist:["checkNoNumber","checkDoubleNumber","checkRoomRect@shikaku","checkAhoSquare@aho","checkLshapeArea@aho","checkNumberAndSize","checkBorderDeadend+"],checkAhoSquare:function(){this.checkAllArea(this.board.roommgr,function(e,o,r,n){return-1===n||0<n&&n!==r||r%3==0||e*o===r},"bkNotRect3")},checkLshapeArea:function(){for(var e=this.board.roommgr.components,o=0;o<e.length;o++){var r=e[o],n=r.clist,t=n.getQnumCell();if(!t.isnull){var t=t.qnum,i=n.length;if(!(-1===t||0<t&&t!==i||i%3!=0)){var t=n.getRectSize(),i=this.board.cellinside(t.x1,t.y1,t.x2,t.y2).filter(function(e){return e.room!==r}),c=i.getRectSize();if(!(0<i.length&&c.cols*c.rows===c.cnt)||t.x1!==c.x1&&t.x2!==c.x2||t.y1!==c.y1&&t.y2!==c.y2){if(this.failcode.add("bkNotLshape3"),this.checkOnly)break;n.seterr(1)}}}}}}});
//# sourceMappingURL=shikaku.js.map