/*! @license pzpr.js v7f9addbe (c) 2009-2025 sabo2, MIT license
 *   https://github.com/sabo2/pzprv3 */
!function(e,t){"object"==typeof module&&module.exports?module.exports=[e,t]:pzpr.classmgr.makeCustom(e,t)}(["ripple","cojun","meander"],{MouseEvent:{inputModes:{edit:["border","number","clear"],play:["number","clear"]},autoedit_func:"areanum",autoplay_func:"qnum"},"MouseEvent@meander":{inputModes:{edit:["border","number","clear"],play:["number","dragnum+","dragnum-","clear"]},mouseinput:function(){0===this.inputMode.indexOf("dragnum")?this.dragnumber_meander():this.common.mouseinput.call(this)},mouseinput_auto:function(){this.puzzle.playmode?((this.mousestart||this.mousemove)&&this.dragnumber_meander(),this.mouseend&&this.notInputted()&&this.inputqnum_meander()):this.puzzle.editmode&&(this.mousestart||this.mousemove&&"left"===this.btn?this.inputborder():this.mouseend&&this.notInputted()&&this.inputqnum())},dragnumber_meander:function(){var e=this.getcell();if(!e.isnull&&e!==this.mouseCell){if(this.mouseCell.isnull)return e.isNum()&&(this.inputData=e.getNum()),void(this.mouseCell=e);if(e.room!==this.mouseCell.room)return this.inputData=0,void(this.mouseCell=e);if(-1!==e.qnum)return this.inputData=e.qnum,void(this.mouseCell=e);if(1<=this.inputData&&this.inputData<=e.room.nodes.length){if("dragnum+"===this.inputMode||"auto"===this.inputMode&&"left"===this.btn?this.inputData++:this.inputData--,1<=this.inputData&&this.inputData<=e.room.nodes.length)e.clrSnum(),e.setQdir(0),e.setAnum(this.inputData),e.setQsub(0);else if(this.inputData>e.room.nodes.length)return void(this.inputData=0);(this.mouseCell=e).draw()}}},inputqnum_meander:function(){this.getcell().isnull||(this.mouseCell=this.board.emptycell,this.inputqnum())}},KeyEvent:{enablemake:!0,enableplay:!0},Cell:{enableSubNumberArray:!0,maxnum:function(){return this.room.clist.length}},Board:{hasborder:1},"Board@cojun":{cols:8,rows:8},"BoardExec@cojun":{allowedOperations:function(e){return e?this.FLIPX:this.ALLOWALL}},AreaRoomGraph:{enabled:!0},Graphic:{gridcolor_type:"DLIGHT",paint:function(){this.drawBGCells(),this.drawTargetSubNumber(),this.drawGrid(),this.drawSubNumbers(),this.drawAnsNumbers(),this.drawQuesNumbers(),this.drawBorders(),this.drawChassis(),this.drawCursor()}},Encode:{decodePzpr:function(e){this.decodeBorder(),this.decodeNumber16()},encodePzpr:function(e){this.encodeBorder(),this.encodeNumber16()},decodeKanpen:function(){this.fio.decodeAreaRoom(),this.fio.decodeCellQnum_kanpen()},encodeKanpen:function(){this.fio.encodeAreaRoom(),this.fio.encodeCellQnum_kanpen()}},FileIO:{decodeData:function(){this.decodeBorderQues(),this.decodeCellQnum(),this.decodeCellAnumsub()},encodeData:function(){this.encodeBorderQues(),this.encodeCellQnum(),this.encodeCellAnumsub()},kanpenOpen:function(){this.decodeAreaRoom(),this.decodeCellQnum_kanpen(),this.decodeCellAnum_kanpen()},kanpenSave:function(){this.encodeAreaRoom(),this.encodeCellQnum_kanpen(),this.encodeCellAnum_kanpen()},kanpenOpenXML:function(){this.decodeAreaRoom_XMLBoard(),this.decodeCellQnum_XMLBoard(),this.decodeCellAnum_XMLAnswer()},kanpenSaveXML:function(){this.encodeAreaRoom_XMLBoard(),this.encodeCellQnum_XMLBoard(),this.encodeCellAnum_XMLAnswer()},UNDECIDED_NUM_XML:0},AnsCheck:{checklist:["checkDifferentNumberInRoom","checkRippleNumber@ripple","checkAdjacentDiffNumber@cojun","checkUpperNumber@cojun","checkAdjacentNumbers@meander","checkConsecutiveNeighbors@meander","checkNoNumCell+"],checkRippleNumber:function(){var e=!0,t=this.board;e:for(var n=0;n<t.cell.length;n++){var i=t.cell[n],o=i.getNum(),r=i.bx,u=i.by;if(!(o<=0)){for(var s=2;s<=2*o;s+=2)if(!(a=t.getc(r+s,u)).isnull&&a.getNum()===o){if(e=!1,this.checkOnly)break e;i.seterr(1),a.seterr(1)}for(var a,s=2;s<=2*o;s+=2)if(!(a=t.getc(r,u+s)).isnull&&a.getNum()===o){if(e=!1,this.checkOnly)break e;i.seterr(1),a.seterr(1)}}}e||this.failcode.add("nmSmallGap")},checkUpperNumber:function(){for(var e=this.board,t=0;t<e.cell.length-e.cols;t++){var n=e.cell[t],i=n.adjacent.bottom;if(n.room===i.room&&n.isNum()&&i.isNum()&&!(n.getNum()>=i.getNum())){if(this.failcode.add("bkSmallOnBig"),this.checkOnly)break;n.seterr(1),i.seterr(1)}}},checkAdjacentNumbers:function(){this.checkAroundCell(function(e,t){return e.isNum()&&e.getNum()===t.getNum()},"nmAround")},checkConsecutiveNeighbors:function(){for(var e=this.board,t=0;t<e.cell.length;t++){var n=e.cell[t];if(n.isNum()){var i=n.getNum(),o=n.room.nodes.length;if(1<i&&n.countDir4Cell(function(e){return e.isNum()&&n.room===e.room&&e.getNum()===i-1})<=0||i<o&&n.countDir4Cell(function(e){return e.isNum()&&n.room===e.room&&e.getNum()===i+1})<=0){if(this.failcode.add("nmNotConsecNeighbors"),this.checkOnly)break;n.seterr(1)}}}}}});
//# sourceMappingURL=ripple.js.map