/*! @license pzpr.js v7f9addbe (c) 2009-2025 sabo2, MIT license
 *   https://github.com/sabo2/pzprv3 */
!function(e,t){"object"==typeof module&&module.exports?module.exports=[e,t]:pzpr.classmgr.makeCustom(e,t)}(["voxas"],{MouseEvent:{inputModes:{edit:["border","clear"],play:["border","subline"]},mouseinput_auto:function(){this.puzzle.playmode?(this.mousestart||this.mousemove)&&("left"===this.btn&&this.isBorderMode()?this.inputborder():this.inputQsubLine()):this.puzzle.editmode&&(this.inputborder(),this.mouseend&&this.notInputted()&&this.inputmark_voxas())},mouseinput_clear:function(){null===this.inputData&&(this.inputData=0),this.inputborder()},inputmark_voxas:function(){var e,t,s=this.getpos(.33);!s.isinside()||(e=s.getb()).isnull||(this.cursor.equals(s)?(t=e.ques,"left"===this.btn?4===t?e.setQues(0):e.setQues(t+1):"right"===this.btn&&(0===t?e.setQues(4):e.setQues(t-1)),e.draw()):(this.setcursor(s),s.draw()))}},KeyEvent:{enablemake:!0,keyrows:["qwer","asdf","zxcv"],moveTarget:function(e){return this.moveTBorder(e)},keyinput:function(e){var t=this.cursor.getb();if(!t.isnull){var s=+e;if(!s)for(var i in this.keyrows)if(-1!==(s=this.keyrows[i].indexOf(e))){s+=1;break}0<s&&s<=4?t.setQues(s):"BS"!==e&&"0"!==e&&" "!==e&&"-"!==e||t.setQues(0),(this.prev=t).draw()}}},Board:{hasborder:1},Border:{setBorder:function(){0===this.ques&&(this.puzzle.editmode?(this.setQues(1),this.setQans(0)):this.setQans(1))}},AreaRoomGraph:{ERROR_LARGE:0,ERROR_SMALL:1,ERROR_WIDE:2,VALID:4,SMALL:1,VERT:2,enabled:!0,setExtraData:function(e){var t=e.clist=new this.klass.CellList(e.getnodeobjs()),s=t.getRectSize();1===t.length?e.voxas=this.ERROR_SMALL:1<s.rows&&1<s.cols?e.voxas=3===t.length?this.ERROR_WIDE:this.ERROR_LARGE:t.length<=3?(e.voxas=this.VALID,1===s.cols&&(e.voxas|=this.VERT),2===t.length&&(e.voxas|=this.SMALL)):e.voxas=this.ERROR_LARGE}},Graphic:{gridcolor_type:"DLIGHT",paint:function(){this.drawBGCells(),this.drawDashedGrid(),this.drawBorders(),this.drawBorderQsubs(),this.drawStars(),this.drawChassis(),this.drawCursor(!1,this.puzzle.editmode)},getBorderColor:function(e){return e.ques?1===e.error?this.errcolor1:-1===e.error?"#555":this.quescolor:1===e.qans?1===e.error?"red":-1===e.error?this.noerrcolor:e.trial?this.trialcolor:this.qanscolor:null},drawStars:function(){for(var e=this.vinc("star","auto",!0),t=(e.lineWidth=Math.max(.03*this.cw,1),this.range.borders),s=0;s<t.length;s++){var i=t[s],r=i.bx,o=i.by;e.vid="s_star2_"+i.id,2===i.ques?(e.fillStyle=this.quescolor,e.fillCircle(r*this.bw,o*this.bh,.135*this.cw)):e.vhide(),e.vid="s_star3_"+i.id,3===i.ques?(e.strokeStyle=this.quescolor,e.fillStyle="#ccc",e.shapeCircle(r*this.bw,o*this.bh,.12*this.cw)):e.vhide(),e.vid="s_star4_"+i.id,4===i.ques?(e.strokeStyle=this.quescolor,e.fillStyle="white",e.shapeCircle(r*this.bw,o*this.bh,.12*this.cw)):e.vhide()}}},Encode:{decodePzpr:function(){for(var e=0,t=0,s=this.outbstr,i=this.board,t=0;t<s.length;t++){var r=i.border[e],o=s.charAt(t);if(this.include(o,"0","4")?r.ques=parseInt(o,16)+1:this.include(o,"5","9")?(r.ques=parseInt(o,16)-4,e++):this.include(o,"a","e")?(r.ques=parseInt(o,16)-9,e+=2):this.include(o,"g","z")&&(e+=parseInt(o,36)-16),e++,!i.border[e])break}this.outbstr=s.substr(t+1),this.puzzle.setConfig("voxas_tatami",this.checkpflag("t"))},encodePzpr:function(){this.outpflag=this.puzzle.getConfig("voxas_tatami")?"t":null;for(var e=0,t="",s=this.board,i=0;i<s.border.length;i++){var r="",o=s.border[i].ques-1;0<=o?s.border[i+1]&&0!==s.border[i+1].ques?r=""+o.toString(16):s.border[i+2]&&0!==s.border[i+2].ques?(r=""+(5+o).toString(16),i++):(r=""+(10+o).toString(16),i+=2):e++,0===e?t+=r:!r&&20!==e||(t+=(e+15).toString(36)+r,e=0)}0<e&&(t+=(e+15).toString(36)),this.outbstr+=t}},FileIO:{decodeData:function(){this.decodeConfig(),this.decodeBorder(function(e,t){if("-0"===t)e.qsub=1;else{t=+t;if(t<0)t*=-(e.qsub=1);else if(0===t)return;t<5?e.ques=t:e.qans=1}})},encodeData:function(){this.encodeConfig(),this.encodeBorder(function(e){if(0===e.ques&&0===e.qans)return e.qsub?"-0 ":"0 ";var t=e.qans?5:e.ques;return(e.qsub?-t:t)+" "})},decodeConfig:function(){this.decodeConfigFlag("t","voxas_tatami")},encodeConfig:function(){this.encodeConfigFlag("t","voxas_tatami")}},AnsCheck:{checklist:["checkBorderCross_voxas","checkValueSmall","checkValueWide","checkVoxasBlack","checkVoxasGray","checkVoxasWhite","checkValueLarge"],checkBorderCross_voxas:function(){this.puzzle.getConfig("voxas_tatami")&&this.checkBorderCross()},checkValueSmall:function(){this.checkRegionValue(this.board.roommgr.ERROR_SMALL,"bkSizeLt2")},checkValueWide:function(){this.checkRegionValue(this.board.roommgr.ERROR_WIDE,"bkNotRect")},checkValueLarge:function(){this.checkRegionValue(this.board.roommgr.ERROR_LARGE,"bkSizeGt3")},checkRegionValue:function(e,t){for(var s=this.board.roommgr.components,i=0;i<s.length;i++){var r=s[i];if(r.voxas===e){if(this.failcode.add(t),this.checkOnly)break;r.clist.seterr(1)}}},checkVoxasBlack:function(){this.checkVoxas(0,"bdVoxasBlack")},checkVoxasGray:function(){this.checkVoxas(1,"bdVoxasGray")},checkVoxasWhite:function(){this.checkVoxas(2,"bdVoxasWhite")},checkVoxas:function(e,t){for(var s=this.board.border,i=this.board.roommgr.VALID,r=this.board.roommgr.SMALL,o=this.board.roommgr.VERT,a=0;a<s.length;a++){var h=s[a],n=h.sidecell[0],c=h.sidecell[1],u=n.room.voxas,d=c.room.voxas;if(h.ques-2===e&&u&i&&d&i){var l=0;if((u&r)==(d&r)&&l++,(u&o)==(d&o)&&l++,l!==e){if(this.failcode.add(t),this.checkOnly)break;this.board.border.setnoerr(),h.seterr(1),n.room.clist.seterr(1),c.room.clist.seterr(1)}}}}}});
//# sourceMappingURL=voxas.js.map