/*! @license pzpr.js v7f9addbe (c) 2009-2025 sabo2, MIT license
 *   https://github.com/sabo2/pzprv3 */
!function(e,n){"object"==typeof module&&module.exports?module.exports=[e,n]:pzpr.classmgr.makeCustom(e,n)}(["nurikabe","nuribou","mochikoro","mochinyoro","canal","norinuri"],{MouseEvent:{use:!0,inputModes:{edit:["number","clear"],play:["shade","unshade"]},autoedit_func:"qnum",autoplay_func:"cell"},"MouseEvent@nurikabe":{inputModes:{edit:["number","clear","info-blk"],play:["shade","unshade","info-blk"]}},"MouseEvent@canal":{inputModes:{edit:["number","clear","info-blk"],play:["shade","unshade","completion","info-blk"]},mouseinput_auto:function(){this.puzzle.playmode?(this.mousestart||this.mousemove)&&(this.inputcell(),this.notInputted()&&this.inputqcmp()):this.puzzle.editmode&&this.mousestart&&this.inputqnum()},inputqcmp:function(){var e=this.getcell();e.isnull||e.noNum()||(e.setQcmp(+!e.qcmp),e.draw(),this.mousereset())}},KeyEvent:{enablemake:!0},Cell:{numberRemainsUnshaded:!0},"Cell@canal":{maxnum:function(){return this.board.cols+this.board.rows-2},minnum:0,updated:!1,complete:!1,viewclist:null,extendShadeClistDir:function(e,n,i){for(var c=this.relcell(n,i);c&&c.isShade();)e.add(c),c=c.relcell(n,i);return!c||c.isnull||-1!==c.qnum||1===c.qsub},updateViewClist:function(){if(-1===this.qnum)return this.complete=!1,this.updated=!0,void(this.viewclist=null);var e=new this.klass.CellList;this.complete=!0,this.complete&=this.extendShadeClistDir(e,-2,0),this.complete&=this.extendShadeClistDir(e,0,-2),this.complete&=this.extendShadeClistDir(e,2,0),this.complete&=this.extendShadeClistDir(e,0,2),this.viewclist=e,this.updated=!0},updateCluesDir:function(e,n){for(var i=this.relcell(e,n);i&&!i.isnull;){if(-1!==i.qnum)return i.updateViewClist(),void i.draw();if(!i.isShade())return;i=i.relcell(e,n)}},updateClues:function(){this.updateCluesDir(-2,0),this.updateCluesDir(0,-2),this.updateCluesDir(2,0),this.updateCluesDir(0,2)},posthook:{qans:function(e){this.updateClues()},qsub:function(e){this.updateClues()},qnum:function(e){-1!==e&&(this.updateViewClist(),this.updateClues())}},isCmp:function(){return 1===this.qcmp||!!this.puzzle.execConfig("autocmp")&&(this.updated||this.updateViewClist(),this.complete&&this.qnum===this.viewclist.length)}},"Board@mochikoro,mochinyoro":{addExtraInfo:function(){this.ublk8mgr=this.addInfoList(this.klass.AreaUnshade8Graph)}},"Board@canal":{rebuildInfo:function(){this.cell.each(function(e){e.updated=!1}),this.common.rebuildInfo.call(this)}},AreaShadeGraph:{enabled:!0,coloring:!0},"AreaShadeGraph@mochikoro":{enabled:!1},AreaUnshadeGraph:{enabled:!0},"AreaUnshade8Graph:AreaUnshadeGraph@mochikoro,mochinyoro":{setComponentRefs:function(e,n){e.ublk8=n},getObjNodeList:function(e){return e.ublk8nodes},resetObjNodeList:function(e){e.ublk8nodes=[]},getSideObjByNodeObj:function(e){for(var n=e.getdir8clist(),i=[],c=0;c<n.length;c++){var t=n[c][0];this.isnodevalid(t)&&i.push(t)}return i}},"AreaUnshadeGraph@canal":{enabled:!1},Graphic:{numbercolor_func:"qnum",qanscolor:"black",paint:function(){this.drawBGCells(),this.drawShadedCells(),"nurikabe"!==this.pid&&"canal"!==this.pid||this.drawDotCells(),this.drawGrid(),this.drawQuesNumbers(),this.drawChassis(),this.drawTarget()}},"Graphic@nuribou,mochikoro,mochinyoro,norinuri":{bgcellcolor_func:"qsub1",enablebcolor:!0},"Graphic@canal":{gridcolor_type:"DARK",qcmpcolor:"rgb(127,127,127)",autocmp:"number",getQuesNumberColor:function(e){return 1===e.error?this.errcolor1:e.isCmp()?this.qcmpcolor:this.quescolor}},"Graphic@nurikabe,canal#1":{irowakeblk:!0},Encode:{decodePzpr:function(e){this.decodeNumber16()},encodePzpr:function(e){this.encodeNumber16()}},"Encode@nurikabe":{decodeKanpen:function(){this.fio.decodeCellQnum_kanpen()},encodeKanpen:function(){this.fio.encodeCellQnum_kanpen()}},FileIO:{decodeData:function(){this.decodeCellQnum(),this.decodeCellAns()},encodeData:function(){this.encodeCellQnum(),this.encodeCellAns()}},"FileIO@nurikabe":{decodeData:function(){this.decodeCellQnumAns()},encodeData:function(){this.encodeCellQnumAns()},kanpenOpen:function(){this.decodeCellQnumAns_kanpen()},kanpenSave:function(){this.encodeCellQnumAns_kanpen()},kanpenOpenXML:function(){this.decodeCellQnumAns_XMLBoard()},kanpenSaveXML:function(){this.encodeCellQnumAns_XMLBoard(),this.encodeCellAns_XMLAnswer()},decodeCellQnumAns_XMLBoard:function(){this.decodeCellXMLBoard(function(e,n){0<n?e.qnum=n:-1===n?e.qsub=1:-2===n?e.qans=1:-3===n&&(e.qnum=-2)})},encodeCellQnumAns_XMLBoard:function(){this.encodeCellXMLBoard(function(e){var n=0;return 0<e.qnum?n=e.qnum:-2===e.qnum?n=-3:1===e.qans?n=-2:1===e.qsub&&(n=-1),n})}},"FileIO@canal":{decodeCellAns:function(){this.decodeCell(function(e,n){"#"===n?e.qans=1:"+"===n?e.qsub=1:"c"===n&&(e.qcmp=1)})},encodeCellAns:function(){this.encodeCell(function(e){return 1===e.qans?"# ":1===e.qsub?"+ ":1===e.qcmp?"c ":". "})}},"AnsCheck@nurikabe":{checklist:["check2x2ShadeCell","checkNoNumberInUnshade","checkConnectShade","checkDoubleNumberInUnshade","checkNumberAndUnshadeSize","doneShadingDecided"]},"AnsCheck@nuribou#1":{checklist:["checkBou","checkCorners","checkNoNumberInUnshade","checkDoubleNumberInUnshade","checkNumberAndUnshadeSize","doneShadingDecided"]},"AnsCheck@mochikoro,mochinyoro#1":{checklist:["checkShadeCellExist","check2x2ShadeCell","checkConnectUnshaded_mochikoro","checkUnshadeRect","checkDoubleNumberInUnshade","checkNumberAndUnshadeSize","checkShadeNotRect@mochinyoro","doneShadingDecided"]},"AnsCheck@canal#1":{checklist:["check2x2ShadeCell","checkNumberAndShadeView","checkConnectShade","doneShadingDecided"]},"AnsCheck@norinuri#1":{checklist:["checkOverShadeCell","checkSingleShadeCell","checkNoNumberInUnshade","checkDoubleNumberInUnshade","checkNumberAndUnshadeSize","doneShadingDecided"]},AnsCheck:{checkDoubleNumberInUnshade:function(){this.checkAllBlock(this.board.ublkmgr,function(e){return e.isNum()},function(e,n,i,c){return i<2},"bkNumGe2")},checkNumberAndUnshadeSize:function(){this.checkAllArea(this.board.ublkmgr,function(e,n,i,c){return c<=0||c===i},"bkSizeNe")}},"AnsCheck@nuribou":{checkBou:function(){this.checkAllArea(this.board.sblkmgr,function(e,n,i,c){return 1===e||1===n},"csWidthGt1")},checkCorners:function(){for(var e=this.board,n=0;n<e.cell.length;n++){var i=e.cell[n];if(i.bx!==e.maxbx-1&&i.by!==e.maxby-1){for(var c=i.adjacent,t=[[i,c.right.adjacent.bottom],[c.right,c.bottom]],o=0;o<2&&(!t[o][0].isShade()||!t[o][1].isShade());o++);if(2!==o){i=t[o][0].sblk.clist,c=t[o][1].sblk.clist;if(i.length===c.length){if(this.failcode.add("csCornerSize"),this.checkOnly)break;i.seterr(1),c.seterr(1)}}}}}},"AnsCheck@nurikabe,nuribou,norinuri":{checkNoNumberInUnshade:function(){this.checkAllBlock(this.board.ublkmgr,function(e){return e.isNum()},function(e,n,i,c){return 0!==i},"bkNoNum")}},"AnsCheck@mochikoro,mochinyoro":{checkConnectUnshaded_mochikoro:function(){this.checkOneArea(this.board.ublk8mgr,"csDivide8")},checkUnshadeRect:function(){this.checkAllArea(this.board.ublkmgr,function(e,n,i,c){return e*n===i},"cuNotRect")}},"AnsCheck@mochinyoro":{checkShadeNotRect:function(){this.checkAllArea(this.board.sblkmgr,function(e,n,i,c){return e*n!==i},"csRect")}},"AnsCheck@canal":{checkNumberAndShadeView:function(){for(var e=this.board.cell.filter(function(e){return 0<=e.qnum}),n=0;n<e.length;n++){var i=e[n];i.updated||i.updateViewClist(),i.qnum!==i.viewclist.length&&(this.failcode.add("nmShadeViewNe"),i.seterr(1),i.viewclist.seterr(1))}}},"AnsCheck@norinuri":{checkOverShadeCell:function(){this.checkAllArea(this.board.sblkmgr,function(e,n,i,c){return i<=2},"csGt2")},checkSingleShadeCell:function(){this.checkAllArea(this.board.sblkmgr,function(e,n,i,c){return 2<=i},"csLt2")}},"FailCode@mochikoro,mochinyoro":{cuNotRect:"cuNotRect.mochikoro",csRect:"csRect.mochikoro",csDivide8:"csDivide8.mochikoro"}});
//# sourceMappingURL=nurikabe.js.map