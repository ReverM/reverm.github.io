/*! @license pzpr.js v7f9addbe (c) 2009-2025 sabo2, MIT license
 *   https://github.com/sabo2/pzprv3 */
!function(e,t){"object"==typeof module&&module.exports?module.exports=[e,t]:pzpr.classmgr.makeCustom(e,t)}(["aquarium"],{MouseEvent:{use:!0,inputModes:{edit:["border","number"],play:["shade","unshade","completion"]},mouseinput:function(){"shade"===this.inputMode||"unshade"===this.inputMode?this.inputcell():this.common.mouseinput.call(this)},mouseinput_number:function(){this.mousestart&&this.inputqnum_excell()},mouseinput_auto:function(){this.puzzle.playmode?(this.mousestart&&this.inputqcmp(),(this.mousestart||this.mousemove)&&this.inputcell()):this.puzzle.editmode&&(this.mousestart||this.mousemove?this.inputborder():this.mouseend&&this.notInputted()&&this.inputqnum_excell())},inputqnum_excell:function(){var e=this.getcell_excell();e.isnull||"excell"!==e.group||(e!==this.cursor.getex()?this.setcursor(e):this.inputqnum_main(e))},inputqcmp:function(){var e=this.getcell_excell();e.isnull||e.noNum()||"excell"!==e.group||(e.setQcmp(+!e.qcmp),e.draw(),this.mousereset())}},KeyEvent:{enablemake:!0,moveTarget:function(e){var t=this.cursor,o=t.getex(),i=o.NDIR;switch(e){case"up":t.bx===t.minx&&t.miny<t.by&&(i=o.UP);break;case"down":t.bx===t.minx&&t.maxy>t.by&&(i=o.DN);break;case"left":t.by===t.miny&&t.minx<t.bx&&(i=o.LT);break;case"right":t.by===t.miny&&t.maxx>t.bx&&(i=o.RT)}return i!==o.NDIR&&(t.movedir(i,2),o.draw(),t.draw(),!0)},keyinput:function(e){this.key_inputexcell(e)}},TargetCursor:{initCursor:function(){this.init(-1,-1)}},ExCell:{disInputHatena:!0,maxnum:function(){var e=this.bx,t=this.by;return-1===e&&-1===t?0:-1===t?this.board.rows:this.board.cols},minnum:0},Board:{hasborder:1,hasexcell:1,cols:7,rows:7,addExtraInfo:function(){this.poolgraph=this.addInfoList(this.klass.AreaPoolGraph)}},AreaRoomGraph:{enabled:!0},BoardExec:{allowedOperations:function(e){return e?this.FLIPX:this.ALLOWALL},adjustBoardData:function(e,t){this.adjustExCellTopLeft_1(e,t)},adjustBoardData2:function(e,t){this.adjustExCellTopLeft_2(e,t)}},"AreaPoolGraph:AreaShadeGraph":{enabled:!0,relation:{"cell.qans":"node","border.ques":"separator"},setComponentRefs:function(e,t){e.pool=t},getObjNodeList:function(e){return e.poolnodes},resetObjNodeList:function(e){e.poolnodes=[]},isedgevalidbylinkobj:function(e){return!e.isBorder()}},Graphic:{enablebcolor:!0,shadecolor:"#0096ff",qanscolor:"#0096ff",paint:function(){this.drawBGCells(),this.drawDotCells(),this.drawShadedCells(),this.drawGrid(),this.drawNumbersExCell(),this.drawBorders(),this.drawChassis(),this.drawTarget()},getQuesNumberColor:function(e){return 1===e.error?this.errcolor1:e.qcmp?this.qcmpcolor:this.quescolor}},Encode:{decodePzpr:function(e){this.decodeBorder(),this.outbstr=this.outbstr.substr(1),this.decodeNumber16ExCell(),this.puzzle.setConfig("aquarium_regions",this.checkpflag("r"))},encodePzpr:function(e){this.outpflag=this.puzzle.getConfig("aquarium_regions")?"r":null,this.encodeBorder(),this.outbstr+="/",this.encodeNumber16ExCell()}},FileIO:{decodeData:function(){this.decodeConfig(),this.decodeBorderQues(),this.decodeCellExCell(function(e,t){"."!==t&&("excell"!==e.group||e.isnull?"cell"===e.group&&("#"===t?e.qans=1:"+"===t&&(e.qsub=1)):("c"===t[0]&&(e.qcmp=1,t=t.substring(1)),e.qnum=+t))})},encodeData:function(){this.encodeConfig(),this.encodeBorderQues(),this.encodeCellExCell(function(e){if("excell"===e.group&&!e.isnull&&-1!==e.qnum)return(e.qcmp?"c":"")+e.qnum+" ";if("cell"===e.group){if(1===e.qans)return"# ";if(1===e.qsub)return"+ "}return". "})},decodeConfig:function(){this.decodeConfigFlag("r","aquarium_regions")},encodeConfig:function(){this.encodeConfigFlag("r","aquarium_regions")}},AnsCheck:{checklist:["checkShadeCellExist+","checkSupports","checkPoolLevel","checkRegionLevel","checkShadeCount+"],checkSupports:function(){var i=["left","right","bottom"];this.checkAllCell(function(e){if(!e.isShade())return!1;for(var t in i){var t=i[t],o=e.adjborder[t];if(!o.isnull&&!o.isBorder()&&!e.adjacent[t].isShade())return!0}return!1},"csNoSupport")},checkPoolLevel:function(){if(!this.puzzle.getConfig("aquarium_regions"))for(var e=this.board.poolgraph.components,t=!1,o=0;o<e.length;o++){for(var i=e[o].clist,s=i.getRectSize().y1,r=0;r<i.length;r++){var n=i[r];if(n.by!==s&&!n.adjborder.top.isnull&&!n.adjborder.top.isBorder()&&!n.adjacent.top.isShade()){this.failcode.add("csNoLevel"),i.seterr(1),t=!0;break}}if(this.checkOnly&&t)break}},checkRegionLevel:function(){if(this.puzzle.getConfig("aquarium_regions"))for(var e=this.board.roommgr.components,t=0;t<e.length;t++){for(var o=e[t].clist,i=this.board.maxby+1,s=-1,r=0;r<o.length;r++){var n=o[r];if(n.isShade()&&n.by<i?i=n.by:!n.isShade()&&n.by>s&&(s=n.by),i<=s)break}if(i<=s){if(this.failcode.add("bkNoLevel"),this.checkOnly)break;o.seterr(1)}}}}});
//# sourceMappingURL=aquarium.js.map