/*! @license pzpr.js v7f9addbe (c) 2009-2025 sabo2, MIT license
 *   https://github.com/sabo2/pzprv3 */
!function(e,s){"object"==typeof module&&module.exports?module.exports=[e,s]:pzpr.classmgr.makeCustom(e,s)}(["kramma","kramman","shwolf"],{"MouseEvent@kramma":{inputModes:{edit:["circle-shade","circle-unshade","undef","clear"],play:["border","subline"]}},"MouseEvent@kramman":{inputModes:{edit:["circle-shade","circle-unshade","undef","clear","crossdot"],play:["border","subline"]}},"MouseEvent@shwolf":{inputModes:{edit:["goat","wolf","undef","clear","crossdot"],play:["border","subline"]},mouseinput_other:function(){switch(this.inputMode){case"goat":this.inputFixedNumber(1);break;case"wolf":this.inputFixedNumber(2)}},inputQsubLineAsPeke:function(){var e,s=this.getpos(.22);this.prevPos.equals(s)||((e=s.getb()).isnull||(null===this.inputData&&(this.inputData=0===e.qsub?1:0),1===this.inputData?e.setQsub(1):0===this.inputData&&e.setQsub(0),e.draw()),this.prevPos=s)}},MouseEvent:{mouseinput_auto:function(){this.puzzle.playmode?(this.mousestart||this.mousemove)&&("left"===this.btn&&this.isBorderMode()?this.inputborder():"right"===this.btn&&"shwolf"===this.pid?this.inputQsubLineAsPeke():this.inputQsubLine()):this.puzzle.editmode&&(this.mousestart&&"kramma"!==this.pid?this.inputcrossMark():this.mouseend&&this.notInputted()&&this.inputqnum())},inputborder:function(){var e=this.getpos(.35);if(!this.prevPos.equals(e)){var s=this.prevPos.getborderobj(e);if(!s.isnull){null===this.inputData&&(this.inputData=s.isBorder()?0:1);for(var s=s.getlinesize(),i=this.board.borderinside(s.x1,s.y1,s.x2,s.y2),t=0;t<i.length;t++)1===this.inputData?i[t].setBorder():0===this.inputData&&i[t].removeBorder();this.puzzle.painter.paintRange(s.x1-1,s.y1-1,s.x2+1,s.y2+1)}this.prevPos=e}}},KeyEvent:{enablemake:!0},Cell:{numberAsObject:!0,maxnum:2},Cross:{noNum:function(){return null!==this.id&&-1===this.qnum}},Border:{getlinesize:function(){var e=this.getaddr(),s=e.clone();if(this.isVert()){for(;e.move(0,-1).getx().noNum();)e.move(0,-1);for(;s.move(0,1).getx().noNum();)s.move(0,1)}else{for(;e.move(-1,0).getx().noNum();)e.move(-1,0);for(;s.move(1,0).getx().noNum();)s.move(1,0)}return{x1:e.bx,y1:e.by,x2:s.bx,y2:s.by}}},Board:{hascross:1,hasborder:1},"Board@kramma,krammar":{cols:8,rows:8},AreaRoomGraph:{enabled:!0},Graphic:{gridcolor_type:"DLIGHT",bordercolor_func:"qans",qanscolor:"rgb(64, 64, 255)",circlefillcolor_func:"qnum2",circlestrokecolor_func:"qnum2",crosssize:.15,paint:function(){this.drawBGCells(),this.drawDashedGrid(),this.drawBorders(),"shwolf"!==this.pid?this.drawCircles():this.drawSheepWolf(),"kramma"!==this.pid&&this.drawCrossMarks(),this.drawHatenas(),this.drawBorderQsubs(),this.drawChassis(),this.drawTarget()}},"Graphic@shwolf":{initialize:function(){this.common.initialize.call(this),this.imgtile=new this.klass.ImageTile},drawSheepWolf:function(){for(var e=this.vinc("cell_number_image","auto"),s=this.range.cells,i=0;i<s.length;i++){var t=s[i],r=["cell",t.id,"quesimg"].join("_"),o=(t.bx-1)*this.bw,n=(t.by-1)*this.bh;this.imgtile.putImage(e,r,0<t.qnum?t.qnum-1:null,o,n,this.cw,this.ch)}}},"Encode@kramma":{decodePzpr:function(e){this.checkpflag("c")||this.decodeCrossMark(),this.decodeCircle()},encodePzpr:function(e){this.outpflag="c",this.encodeCircle()}},"Encode@kramman,shwolf":{decodePzpr:function(e){this.decodeCrossMark(),this.decodeCircle()},encodePzpr:function(e){this.encodeCrossMark(),this.encodeCircle()}},FileIO:{decodeData:function(){this.decodeCellQnum(),this.decodeCrossNum(),this.decodeBorderAns()},encodeData:function(){this.encodeCellQnum(),this.encodeCrossNum(),this.encodeBorderAns()}},AnsCheck:{checklist:["checkBorderBranch@!kramma","checkBorderCrossOnBP@!kramma","checkLcntCurve@!kramma","checkLineChassis@shwolf","checkNoNumber","checkSameObjectInArea","checkBorderDeadend+@!kramma","checkBorderNoneOnBP@kramman"],checkBorderBranch:function(){this.checkBorderCount(3,0,"bdBranch")},checkBorderCrossOnBP:function(){this.checkBorderCount(4,1,"bdCrossBP")},checkBorderNoneOnBP:function(){this.checkBorderCount(0,1,"bdIgnoreBP")},checkSameObjectInArea:function(){this.checkSameObjectInRoom(this.board.roommgr,function(e){return e.getNum()},"bkPlNum")},checkLcntCurve:function(){for(var e=this.board,s=e.crossinside(e.minbx+2,e.minby+2,e.maxbx-2,e.maxby-2),i=0;i<s.length;i++){var t=s[i],r=t.adjborder;if(2===t.lcnt&&1!==t.qnum&&!(1===r.top.qans&&1===r.bottom.qans||1===r.left.qans&&1===r.right.qans)){if(this.failcode.add("bdCurveExBP"),this.checkOnly)break;t.setCrossBorderError()}}},checkLineChassis:function(){for(var e=!0,s=this.board,i=[],t=0;t<s.border.length;t++)i[t]=s.border[t].qans;var r=new this.klass.Address(0,0);for(r.bx=s.minbx;r.bx<=s.maxbx;r.bx+=2)for(r.by=s.minby;r.by<=s.maxby;r.by+=2)(r.bx===s.minbx||r.bx===s.maxbx)!=(r.by===s.minby||r.by===s.maxby)&&(r.by===s.minby?this.clearLineInfo(i,r,2):r.by===s.maxby?this.clearLineInfo(i,r,1):r.bx===s.minbx?this.clearLineInfo(i,r,4):r.bx===s.maxbx&&this.clearLineInfo(i,r,3));for(t=0;t<s.border.length;t++)if(1===i[t]){if(e=!1,this.checkOnly)break;s.border.filter(function(e){return 1===i[e.id]}).seterr(1)}e||(this.failcode.add("bdNotChassis"),s.border.setnoerr())},clearLineInfo:function(e,s,i){for(var t=[[s.clone(),i]];0<t.length;){var r=t.pop();for(s=r[0],i=r[1];;)if(s.movedir(i,1),s.oncross()){var o=s.getx(),n=o.adjborder;if(!o.isnull&&1===o.qnum){n.top.qans&&t.push([s.clone(),1]),n.bottom.qans&&t.push([s.clone(),2]),n.left.qans&&t.push([s.clone(),3]),n.right.qans&&t.push([s.clone(),4]);break}}else{o=s.getb();if(o.isnull||0===e[o.id])break;e[o.id]=0}}}},"ImageTile@shwolf":{imgsrc_dataurl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAABABAMAAAAg+GJMAAAAMFBMVEUAAACtAADv97X/a/f//wD///////////////////////////////////////////81EdaHAAAAEHRSTlP///8A////////////////8M8+MgAAAk5JREFUeJzF10FywyAMBdDvuNmTG2RyAmZ8gS56AG96/6sUAYIPCDduOymbJLb1ImSCFWy/HPgzAC2F9STgW8A/BXg0AIeAPGAyz/ilBbi0AH0E7HQ8GMDlDj73IOBmCwgnChAiGuDyuBPgrEkASws86CJcyMMtCEMKPsQTECKOAGMSiIc7QMoiYwv5PBpgmERMgAGJoNEDveBjAg0Q466fMsKbSw90ZfDpIAF3jZaxSw4VWNLF0BlCj7kCyKlPHqDllwHHU9SsFOjjYw5NvWMKi77RpNYMeM6/Eu18aTglFRjDG0G/eXS2BHgY8SKssxRqAgJ4M4FYya4KXXzKXk7b8UFYFTAEp8A0gQqYKeT8MKtAqkK7GscKCDBPgFMwgHzmYAY1Bes+VGAeH1J4AigJIC3oHbSwFTCW0gCAgetJYIcAlPk1HTsE1grA+DHFfPYDwCmAazPrUn9RnwG2uHcM92IHP5IOgfRUHID4S2sA1J0FDORiWkAZEXAfH2knTK8OJwDkwHd5ffspECLfQ6R7S87tPOB0M19+CJhL8e+Abini5YDvge3lAL4HXP5FOOs2vh4AWqBbCHsHxMXHAM4CQhBQW6YZ0HV10sIsBFD7Ud4099FqLEuH4hZqGxnIW2vYDrsaFiED3HaWKz0DuwFob9j1jBXgIpiAPORdLCafpf8VhyVIl8S7p9vpAHCjeQjgCcCMD+2ay/8SLKA2CrME5Ckf62ADmz4hp3+ycpvQ7TX8vjbTk2Gc5k/+u/h0RTu/g6snQlefk8A4/h/4AjUhvQ8aixc0AAAAAElFTkSuQmCC",cols:2,rows:1,width:128,height:64}});
//# sourceMappingURL=kramma.js.map