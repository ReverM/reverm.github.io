{"version":3,"file":"starbattle.js","sources":["../../../src/variety/starbattle.js"],"names":["pidlist","classbase","MouseEvent","use","RBShadeCell","inputModes","play","mouseinput_other","this","inputMode","mousestart","inputcell_starbattle","inputdot","mouseinput_auto","puzzle","playmode","btn","mousemove","inputData","editmode","inputEdit","cell","getcell","isnull","mouseCell","decIC","setQans","setQsub","draw","mousereset","inputEdit_first","inputborder","bd","board","bx","inputPoint","by","rect","starCount","bx1","bx2","by1","by2","val","getNewNumber","count","set","pos","getpos","prevPos","equals","dot","getDot","piece","group","setDot","KeyEvent","enablemake","moveTarget","keyinput","ca","keydown","key_inputqnum_starbattle","prev","Dot","qsub","opemgr","disCombine","getTrial","trial","Board","hasborder","hasdots","createExtraObject","klass","StarCount","initExtraObject","col","row","init","isDot","isStar","getc","qans","dotIsRedundant","isvert","initialize","maxbx","addOpe","getmaxnum","Math","max","floor","cols","getminnum","old","num","add","StarCountOperation","painter","paintRange","minbx","StarCountOperation:Operation","type","setData","decode","strs","toString","join","undo","exec","redo","OperationManager","addExtraOperation","operationlist","push","AreaRoomGraph","enabled","Graphic","paint","drawBGCells","drawDashedGrid","drawBorders","drawDots","drawDashes","drawStars","drawChassis","drawStarCount","drawCursor_starbattle","getCanvasRows","getBoardRows","margin","getOffsetRows","setRangeObject","x1","y1","x2","y2","common","call","range","copyBufferData","g","g2","canvas","sx2","child","width","sy2","minby","bh","y0","context","clearRect","drawImage","x0","getDotFillColor","trialcolor","pekecolor","getDotOutlineColor","getDotRadius","vinc","clist","lineWidth","cells","i","length","px","py","vid","id","bw","strokeStyle","mbcolor","strokeLine","vhide","fillStyle","qanscolor","fillStar","quescolor","font","ch","fontfamily","textAlign","textBaseline","fillText","maxby","isdraw","getConfig","outputImage","targetColorEdit","cw","strokeRect","Encode","decodePzpr","decodeStarCount","decodeBorder","encodePzpr","encodeStarCount","encodeBorder","barray","outbstr","split","FileIO","decodeData","readLine","decodeAreaRoom","decodeCellAns","encodeData","writeLine","encodeAreaRoom","encodeCellAns","AnsCheck","checklist","checkAroundStars","checkAroundCell","cell1","cell2","checkInsufficientStars","checkAllBlock","roommgr","w","h","a","n","checkOverSaturatedStars","checkStarCountInLine","checkRowsCols","isStarCountInClist","result","filter","seterr","module","exports","pzpr","classmgr","makeCustom"],"mappings":"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"}