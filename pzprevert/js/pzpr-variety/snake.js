/*! @license pzpr.js v7f9addbe (c) 2009-2025 sabo2, MIT license
 *   https://github.com/sabo2/pzprv3 */
!function(e,t){"object"==typeof module&&module.exports?module.exports=[e,t]:pzpr.classmgr.makeCustom(e,t)}(["snake"],{MouseEvent:{use:!0,inputModes:{edit:["number","circle-shade","circle-unshade","clear"],play:["shade","unshade","completion"]},mouseinput:function(){"shade"===this.inputMode||"unshade"===this.inputMode?this.inputcell():this.common.mouseinput.call(this)},mouseinput_number:function(){this.mousestart&&this.inputqnum_excell()},mouseinput_auto:function(){this.puzzle.playmode?(this.mousestart&&this.inputqcmp(),(this.mousestart||this.mousemove)&&this.inputcell()):this.puzzle.editmode&&this.mousestart&&!this.inputqnum_excell()&&this.inputqnum()},inputqnum_excell:function(){var e=this.getcell_excell();return!e.isnull&&"excell"===e.group&&(e!==this.cursor.getex()?this.setcursor(e):this.inputqnum_main(e),!0)},inputqcmp:function(){var e=this.getcell_excell();e.isnull||e.noNum()||"excell"!==e.group||(e.setQcmp(+!e.qcmp),e.draw(),this.mousereset())}},KeyEvent:{enablemake:!0,keyinput:function(e){this.cursor.getex().isnull?this.key_inputqnum(e):this.key_inputexcell(e)}},TargetCursor:{initCursor:function(){this.init(-1,-1)}},Cell:{numberAsObject:!0,disInputHatena:!0,maxnum:2,prehook:{qsub:function(){return-1!==this.qnum}},shades:function(){return this.countDir4Cell(function(e){return e.isShade()})}},ExCell:{disInputHatena:!0,maxnum:function(){var e=this.bx,t=this.by;return-1===e&&-1===t?0:-1===t?this.board.rows:this.board.cols},minnum:0},Board:{hasexcell:1,cols:8,rows:8},AreaShadeGraph:{enabled:!0},BoardExec:{adjustBoardData:function(e,t){this.adjustExCellTopLeft_1(e,t)},adjustBoardData2:function(e,t){this.adjustExCellTopLeft_2(e,t)}},Graphic:{enablebcolor:!0,shadecolor:"rgb(80, 80, 80)",circlefillcolor_func:"qnum2",getCircleStrokeColor:function(e){return 0<e.qnum?this.quescolor:null},paint:function(){this.drawBGCells(),this.drawDotCells(),this.drawShadedCells(),this.drawGrid(),this.drawNumbersExCell(),this.drawCircles(),this.drawChassis(),this.drawTarget()},getQuesNumberColor:function(e){return 1===e.error?this.errcolor1:e.qcmp?this.qcmpcolor:this.quescolor}},Encode:{decodePzpr:function(e){this.decodeCircle(),this.decodeNumber16ExCell()},encodePzpr:function(e){this.encodeCircle(),this.encodeNumber16ExCell()}},FileIO:{decodeData:function(){this.decodeCellExCell(function(e,t){var n,i;"."!==t&&("excell"!==e.group||e.isnull?"cell"===e.group&&(i=(12&+t)>>2,e.qnum=0<=(n=3&+t)?n:-1,1==i?e.qans=1:2==i&&(e.qsub=1)):("c"===t[0]&&(e.qcmp=1,t=t.substring(1)),e.qnum=+t))})},encodeData:function(){this.encodeCellExCell(function(e){return"excell"!==e.group||e.isnull||-1===e.qnum?"cell"===e.group?((t=e.qnum||0)<0&&(t=0),1===e.qans?t|=4:1===e.qsub&&(t|=8),t+" "):". ":(e.qcmp?"c":"")+e.qnum+" ";var t})}},AnsCheck:{checklist:["checkShadeCellExist+","check2x2ShadeCell","checkShadeBranch","checkShadeOnCircle","checkCircleEndpoint","checkCircleMidpoint","checkShadeDiagonal","checkShadeCount+","checkConnectShade","checkShadeLoop"],checkShadeBranch:function(){this.checkAllCell(function(e){return e.isShade()&&2<e.countDir4Cell(function(e){return e.isShade()})},"shBranch")},checkShadeDiagonal:function(){for(var e=this.board,t=0;t<e.cell.length;t++){var n=e.cell[t];if(!(n.bx>=e.maxbx-1||n.by>=e.maxby-1)){var i=n.bx,n=n.by,i=e.cellinside(i,n,i+2,n+2).filter(function(e){return e.isShade()});if(2===i.length){var n=i[0],c=i[1];if(n.bx!==c.bx&&n.by!==c.by&&(n.sblk===c.sblk||2===n.shades()||2===c.shades())){if(this.failcode.add("shDiag"),this.checkOnly)break;i.seterr(1)}}}}},checkCircleEndpoint:function(){this.checkAllCell(function(e){return 2===e.qnum&&1!==e.shades()},"shEndpoint")},checkCircleMidpoint:function(){this.checkAllCell(function(e){return 1===e.qnum&&2!==e.shades()},"shMidpoint")},checkShadeOnCircle:function(){this.checkAllCell(function(e){return!e.isShade()&&0<e.qnum},"circleUnshade")},checkShadeLoop:function(){for(var e=this.board.sblkmgr.components,t=0;t<e.length;t++){for(var n=e[t].clist,i=!0,c=0;c<n.length;c++)if(2!==n[c].shades()){i=!1;break}if(i&&(this.failcode.add("shLoop"),n.seterr(1),this.checkOnly))break}}}});
//# sourceMappingURL=snake.js.map