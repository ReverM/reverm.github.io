/*! @license pzpr.js v7f9addbe (c) 2009-2025 sabo2, MIT license
 *   https://github.com/sabo2/pzprv3 */
!function(t,e){"object"==typeof module&&module.exports?module.exports=[t,e]:pzpr.classmgr.makeCustom(t,e)}(["ququ"],{MouseEvent:{use:!0,inputModes:{edit:["number","undef","clear"],play:["shade","unshade","info-blk"]},autoedit_func:"qnum",autoplay_func:"cell",mouseinput_clear:function(){this.inputFixedNumber(-1)},getpos:function(t){var e=3*(this.inputPoint.bx/2|0),i=3*(this.inputPoint.by/2|0),s=this.inputPoint.bx%2-1,r=this.inputPoint.by%2-1;return Math.abs(s)>Math.abs(r)?(i++,0<s&&(e+=2)):(e++,0<r&&(i+=2)),new this.klass.Address(e,i)}},KeyEvent:{enablemake:!0,moveTarget:function(t){return this.moveTBorder(t)}},TargetCursor:{crosstype:!0,initCursor:function(){this.init(1,0)}},AreaShadeGraph:{enabled:!0},AreaUnshadeGraph:{enabled:!0},Cell:{numberRemainsUnshaded:!0,maxnum:function(){return this.board.cols*this.board.rows*4},initAdjacent:function(){var t=this.board.emptycell;switch(this.getDir()){case this.UP:this.adjacent={top:this.relobj(0,-1),bottom:t,left:this.relobj(-1,1),right:this.relobj(1,1)};break;case this.DN:this.adjacent={top:t,bottom:this.relobj(0,1),left:this.relobj(-1,-1),right:this.relobj(1,-1)};break;case this.LT:this.adjacent={top:this.relobj(1,-1),bottom:this.relobj(1,1),left:this.relobj(-1,0),right:t};break;case this.RT:this.adjacent={top:this.relobj(-1,-1),bottom:this.relobj(-1,1),left:t,right:this.relobj(1,0)};break;default:this.adjacent={top:t,bottom:t,left:t,right:t}}},getPointAdjacent:function(){var t,e,i=this.board,s=this.bx,r=this.by;switch(this.getDir()){case this.UP:t=i.cellinside(s-3,r-2,s+3,r+1),e=this.relcell(0,2);break;case this.DN:t=i.cellinside(s-3,r-1,s+3,r+2),e=this.relcell(0,-2);break;case this.LT:t=i.cellinside(s-2,r-3,s+1,r+3),e=this.relcell(2,0);break;case this.RT:t=i.cellinside(s-1,r-3,s+2,r+3),e=this.relcell(-2,0);break;default:return new this.klass.CellList}var n=t.indexOf(this);return t[n]=e,t},getDir:function(){var t=this.bx,e=this.by;if(t%3==1){if(e%3==0)return this.UP;if(e%3==2)return this.DN}else if(e%3==1){if(t%3==0)return this.LT;if(t%3==2)return this.RT}return this.NDIR}},CellList:{getRectSize:function(){for(var t=this.board,e={x1:t.maxbx+1,x2:t.minbx-1,y1:t.maxby+1,y2:t.minby-1,cols:0,rows:0,cnt:0},i=0;i<this.length;i++){var s=this[i];e.x1>s.bx&&(e.x1=s.bx),e.x2<s.bx&&(e.x2=s.bx),e.y1>s.by&&(e.y1=s.by),e.y2<s.by&&(e.y2=s.by),e.cnt++}return e.cols=e.x2-e.x1+1,e.rows=e.y2-e.y1+1,e}},Board:{cols:4,rows:4,hascross:0,estimateSize:function(t,e,i){return"cell"===t?e*i*4:0},setposCells:function(){for(var t=0;t<this.cell.length;t++){var e=this.cell[t],i=(e.id=t,e.isnull=!1,t/4|0),s=t%4,r=i%this.cols*3,i=3*(i/this.cols|0);r+=[1,0,2,1][s],i+=[0,1,1,2][s],e.bx=r,e.by=i,e.initAdjacent()}},getobj:function(t,e){return this.getc(t,e)},getc:function(t,e){var i=null,s=this.cols;return 0<=t&&t<3*this.cols&&0<=e&&e<3*this.rows&&(s=(e/3|0)*s+(t/3|0),t%3==1?e%3==0?i=4*s:e%3==2&&(i=4*s+3):e%3==1&&(t%3==0?i=4*s+1:t%3==2&&(i=4*s+2))),null!==i?this.cell[i]:this.emptycell},cellinside:function(t,e,i,s){for(var r=new this.klass.CellList,n=e;n<=s;n++)for(var h=t;h<=i;h++){var l=this.getc(h,n);l.isnull||r.add(l)}return r},setminmax:function(){this.minbx=0,this.minby=0,this.maxbx=3*this.cols-1,this.maxby=3*this.rows-1,this.puzzle.cursor.setminmax()}},BoardExec:{adjustSize:function(){var t=this.board;return{x1:0,y1:0,x2:3*t.cols-1,y2:3*t.rows-1}},insex:{cell:{1:!0,2:!0,3:!0}},distObj:function(t,e){var i=this.board;return e.isnull?-1:(t&=15)===this.UP?e.by+1:t===this.DN?3*i.rows-e.by:t===this.LT?e.bx+1:t===this.RT?3*i.cols-e.bx:-1}},Graphic:{enablebcolor:!0,bgcellcolor_func:"qsub1",shadecolor:"#444444",fontsizeratio:.4,paint:function(){this.drawBGCells(),this.drawShadedCells(),this.drawGrid(),this.drawSlashGrid(),this.drawQuesNumbers(),this.drawChassis(),this.drawCursor(!1,this.puzzle.editmode)},flushCanvas:function(){var t=this.vinc("background","crispEdges",!0),e=this.bw,i=this.bh,s=this.board,r=(s.maxbx+1)*(2/3),s=(s.maxby+1)*(2/3);t.vid="BG",t.fillStyle=this.bgcolor,t.fillRect(-.5,-.5,r*e+1,s*i+1)},getCellCenter:function(t,e){var i=(t+.5)*(2/3),s=(e+.5)*(2/3);return t%3==0?i+=.1:t%3==2&&(i-=.1),e%3==0?s+=.1:e%3==2&&(s-=.1),{x:i*this.bw,y:s*this.bh}},drawNumbers_com:function(t,e,i,s){for(var r=this.context,n=this.range.cells,h=0;h<n.length;h++){var l=n[h],a=t.call(this,l);r.vid=i+l.id,a?(r.fillStyle=e.call(this,l),l=this.getCellCenter(l.bx,l.by),this.disptext(a,l.x,l.y,s)):r.vhide()}},drawRawCursor:function(t,e,i,s,r,n){var t=this.vinc(t,"crispEdges"),i=this.getCellCenter(i.bx,i.by),h=i.x,i=i.y,l=0|Math.max(this.cw/24,1),a=.45*this.bw,o=a;r=!1!==r&&!this.outputImage,t.fillStyle=n,t.vid=e+"ti1_",r?t.fillRect(h-a,i-o,2*a,l):t.vhide(),t.vid=e+"ti2_",r?t.fillRect(h-a,i-o,l,2*o):t.vhide(),t.vid=e+"ti3_",r?t.fillRect(h-a,i+o-l,2*a,l):t.vhide(),t.vid=e+"ti4_",r?t.fillRect(h+a-l,i-o,l,2*o):t.vhide()},cellexpandratio:1.5,getBoardCols:function(){var t=this.board;return(t.maxbx-t.minbx+1)/3},getBoardRows:function(){var t=this.board;return(t.maxby-t.minby+1)/3},drawSlashGrid:function(){var t=this.vinc("slash","crispEdges",!0),e=this.board,i=Math.max(e.minbx,this.range.x1),s=Math.max(e.minby,this.range.y1),r=Math.min(e.maxbx,this.range.x2),e=Math.min(e.maxby,this.range.y2);if(!(r<i||e<s)){var n=this.bw,h=this.bh,i=i/3|0,l=r/3|0,a=s/3|0,o=e/3|0;t.lineWidth=this.gw,t.strokeStyle=this.gridcolor;for(var c=i;c<=l;c++)for(var b=a;b<=o;b++){var d=c*n*2,u=2*n+d,f=b*h*2,m=2*h+f;t.vid="bdsa_"+c+"_"+b,t.strokeLine(d,f,u,m),t.vid="bdsb_"+c+"_"+b,t.strokeLine(d,m,u,f)}}},drawCells_common:function(t,e){for(var i=this.context,s=this.range.cells,r=0;r<s.length;r++){var n=s[r],h=e.call(this,n);if(i.vid=t+n.id,h){i.fillStyle=h;var h=(n.bx/3|0)*this.bw*2,l=(n.by/3|0)*this.bh*2,a=[0,0,0,0];switch(n.getDir()){case n.DN:a=[1,1,-1,1];break;case n.UP:a=[1,-1,-1,-1];break;case n.RT:a=[1,-1,1,1];break;case n.LT:a=[-1,-1,-1,1]}i.setOffsetLinePath(h+this.bw,l+this.bh,0,0,a[0]*this.bw,a[1]*this.bh,a[2]*this.bw,a[3]*this.bh,!0),i.fill()}else i.vhide()}}},Encode:{decodePzpr:function(t){this.decodeNumber16()},encodePzpr:function(t){this.encodeNumber16()}},FileIO:{decodeData:function(){this.decodeCellQnum(),this.decodeCellAns()},encodeData:function(){this.encodeCellQnum(),this.encodeCellAns()},decodeCell:function(t){for(var e=this.board,i=0,s=this.getItemList(3*e.rows),r=0;r<=e.maxby;r++)for(var n=0;n<=e.maxbx;n++){var h=e.getc(n,r);h.isnull||t(h,s[i++])}},encodeCell:function(t){for(var e=this.board,i=0;i<=e.maxby;i++){for(var s="",r=0;r<=e.maxbx;r++){var n=e.getc(r,i);n.isnull||(s+=t(n))}this.writeLine(s)}}},AnsCheck:{checklist:["checkNoNumberInUnshade","checkUniqueShapes","checkDoubleNumberInUnshade+","checkNumberAndUnshadeSize","doneShadingDecided++"],checkNoNumberInUnshade:function(){this.checkAllBlock(this.board.ublkmgr,function(t){return t.isNum()},function(t,e,i,s){return 0!==i},"bkNoNum")},checkDoubleNumberInUnshade:function(){this.checkAllBlock(this.board.ublkmgr,function(t){return t.isNum()},function(t,e,i,s){return i<2},"bkNumGe2")},checkNumberAndUnshadeSize:function(){this.checkAllArea(this.board.ublkmgr,function(t,e,i,s){return s<=0||s===i},"bkSizeNe")},checkUniqueShapes:function(){for(var e=this,t=0;t<this.board.cell.length;t++){var i=this.board.cell[t];if(i.isShade())if(i.getPointAdjacent().filter(function(t){return t.isShade()&&t.sblk!==i.sblk&&!e.isDifferentShapeBlock(t.sblk,i.sblk)}).length){if(this.failcode.add("bsSameShape"),this.checkOnly)break;i.sblk.clist.seterr(1)}}}}});
//# sourceMappingURL=ququ.js.map