/*! @license pzpr.js v7f9addbe (c) 2009-2025 sabo2, MIT license
 *   https://github.com/sabo2/pzprv3 */
!function(e,t){"object"==typeof module&&module.exports?module.exports=[e,t]:pzpr.classmgr.makeCustom(e,t)}(["box"],{MouseEvent:{use:!0,inputModes:{edit:["number"],play:["shade","unshade"]},mouseinput_number:function(){this.mousestart&&this.inputqnum_excell()},mouseinput_auto:function(){this.puzzle.playmode?(this.mousestart||this.mousemove)&&this.inputcell():this.puzzle.editmode&&this.mousestart&&this.inputqnum_excell()},inputqnum_excell:function(){var e=this.getcell_excell();e.isnull||"excell"!==e.group||(e!==this.cursor.getex()?this.setcursor(e):this.inputqnum_main(e))},getNewNumber:function(e,t){return"right"===this.btn&&0===t?e.getmaxnum():this.common.getNewNumber.call(this,e,t)}},KeyEvent:{enablemake:!0,moveTarget:function(e){var t=this.cursor,i=t.getex(),s=i.NDIR;switch(e){case"up":t.bx===t.minx&&t.miny<t.by&&(s=i.UP);break;case"down":t.bx===t.minx&&t.maxy>t.by&&(s=i.DN);break;case"left":t.by===t.miny&&t.minx<t.bx&&(s=i.LT);break;case"right":t.by===t.miny&&t.maxx>t.bx&&(s=i.RT)}return s!==i.NDIR&&(t.movedir(s,2),i.draw(),t.draw(),!0)},keyinput:function(e){this.key_inputexcell(e)}},TargetCursor:{initCursor:function(){this.init(-1,-1)}},ExCell:{qnum:0,disInputHatena:!0,setQnum:function(e){this.common.setQnum.call(this,Math.max(0,e))},maxnum:function(){var e=this.bx,t=this.by;if(-1===e&&-1===t)return 0;t=-1===e?this.board.cols:this.board.rows;return t*(t+1)/2|0},minnum:0},Board:{cols:9,rows:9,hasexcell:1},BoardExec:{allowedOperations:function(e){return e?0:this.ALLOWALL},adjustBoardData:function(e,t){this.adjustExCellTopLeft_1(e,t)},adjustBoardData2:function(e,t){this.adjustExCellTopLeft_2(e,t)}},Graphic:{numbercolor_func:"qnum",qanscolor:"black",paint:function(){this.drawBGCells(),this.drawShadedCells(),this.drawDotCells(),this.drawGrid(),this.drawBGExCells(),this.drawNumbersExCell(),this.drawCircledNumbers_box(),this.drawChassis(),this.drawTarget()},getCanvasCols:function(){return this.getBoardCols()+2*this.margin+1},getCanvasRows:function(){return this.getBoardRows()+2*this.margin+1},getOffsetCols:function(){return.5},getOffsetRows:function(){return.5},drawCircledNumbers_box:function(){var e=[],t=this.board,i=this.range.x1,s=this.range.y1,n=this.range.x2,r=this.range.y2;if(n>=t.maxbx)for(var o=1|s,a=Math.min(t.maxby,r);o<=a;o+=2)e.push([t.maxbx+1,o]);if(r>=t.maxby)for(var l=1|i,a=Math.min(t.maxbx,n);l<=a;l+=2)e.push([l,t.maxby+1]);var u=this.vinc("excell_circle","auto",!0),c=.36*this.cw;u.fillStyle=this.circlebasecolor,u.strokeStyle=this.quescolor;for(var h=0;h<e.length;h++){var d=(e[h][0]!==t.maxbx+1?e[h][0]:e[h][1])+1>>1;u.vid=["ex2_cir_",e[h][0],e[h][1]].join("_"),0<d?u.shapeCircle(e[h][0]*this.bw,e[h][1]*this.bh,c):u.vhide()}var m={ratio:.65};(u=this.vinc("excell_number2","auto")).fillStyle=this.quescolor;for(h=0;h<e.length;h++){d=(e[h][0]!==t.maxbx+1?e[h][0]:e[h][1])+1>>1;u.vid=["ex2_cirtext_",e[h][0],e[h][1]].join("_"),0<d?this.disptext(""+d,e[h][0]*this.bw,e[h][1]*this.bh,m):u.vhide()}}},Encode:{decodePzpr:function(e){this.decodeBox()},encodePzpr:function(e){this.encodeBox()},decodeBox:function(){for(var e=0,t=this.outbstr,i=this.board,s=0;s<t.length;s++){var n=t.charAt(s),r=i.excell[e];if("-"===n?(r.qnum=parseInt(t.substr(s+1,2),32),s+=2):r.qnum=parseInt(n,32),++e>=i.cols+i.rows){s++;break}}this.outbstr=t.substr(s)},encodeBox:function(){for(var e="",t=this.board,i=0,s=t.cols+t.rows;i<s;i++){var n=t.excell[i].qnum;e+=n<32?""+n.toString(32):"-"+n.toString(32)}this.outbstr+=e}},FileIO:{decodeData:function(){this.decodeCellExCell(function(e,t){"."!==t&&("excell"!==e.group||e.isnull?"cell"===e.group&&("#"===t?e.qans=1:"+"===t&&(e.qsub=1)):e.qnum=+t)})},encodeData:function(){this.encodeCellExCell(function(e){if("excell"===e.group&&!e.isnull)return e.qnum+" ";if("cell"===e.group){if(1===e.qans)return"# ";if(1===e.qsub)return"+ "}return". "})}},AnsCheck:{checklist:["checkShadeCellExist","checkShadeCells"],checkShadeCells:function(e){for(var t=this.board,i=0;i<t.excell.length;i++){var s,n=t.excell[i],r=n.qnum,o=n.getaddr(),a=0,l=new this.klass.CellList;if(-1===o.by)for(s=o.move(0,2).getc();!s.isnull;)1===s.qans&&(a+=o.by+1>>1),l.add(s),s=o.move(0,2).getc();else{if(-1!==o.bx)continue;for(s=o.move(2,0).getc();!s.isnull;)1===s.qans&&(a+=o.bx+1>>1),l.add(s),s=o.move(2,0).getc()}if(r!==a){if(this.failcode.add("nmSumRowShadeNe"),this.checkOnly)break;n.seterr(1),l.seterr(1)}}}}});
//# sourceMappingURL=box.js.map