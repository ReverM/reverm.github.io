/*! @license pzpr.js v7f9addbe (c) 2009-2025 sabo2, MIT license
 *   https://github.com/sabo2/pzprv3 */
!function(e,t){"object"==typeof module&&module.exports?module.exports=[e,t]:pzpr.classmgr.makeCustom(e,t)}(["balance"],{MouseEvent:{inputModes:{edit:["number","shade","clear"],play:["line","peke","info-line"]},mouseinput_auto:function(){var e;this.puzzle.playmode?this.mousestart||this.mousemove?"left"===this.btn?this.inputLine():"right"===this.btn&&this.inputpeke():this.mouseend&&this.notInputted()&&this.inputpeke_ifborder():this.puzzle.editmode&&this.mousestart&&!(e=this.getcell()).isnull&&(e===this.cursor.getc()||"left"===this.btn?this.inputqnum():-1!==e.qnum&&(e.ques=1-e.ques,e.draw()))},inputShade:function(){var e=this.getcell();this.mousestart&&(null===this.inputData&&(this.inputData=-1===e.qnum?0:1-e.ques),e.setQues(this.inputData),-1===e.qnum&&e.setQnum(-2),e.draw())}},KeyEvent:{enablemake:!0,keyinput:function(e){var t;this.puzzle.editmode&&!(t=this.cursor.getc()).isnull&&("q"===e||"a"===e||"z"===e?(-1===t.qnum&&(t.qnum=-2),t.ques=0,t.draw()):"w"===e||"s"===e||"x"===e?(-1===t.qnum&&(t.qnum=-2),t.ques=1,t.draw()):"e"===e||"d"===e||"c"===e?(t.qnum=-1,t.ques=0,t.draw()):this.key_inputqnum(e))}},Cell:{counted:!1,equalsegments:!1,totallength:0,posthook:{qnum:function(e){-1===e&&(this.ques=0)}},maxnum:function(){var e=this.board;return e.cols+e.rows-2},getSegmentDir:function(e){for(var t=new this.klass.PieceList,n=this.getaddr().movedir(e,1);;){var i=n.getb();if(!i||i.isnull)break;if(!i.isLine())break;t.add(i),n.movedir(e,2)}return t},getAllSegments:function(){for(var e=new this.klass.PieceList,t=1;t<=4;t++)for(var n=this.getSegmentDir(t),i=0;i<n.length;i++)e.add(n[i]);return e},recount:function(){if(!this.counted&&2===this.lcnt){for(var e=[],t=1;t<=4;t++){var n=this.getSegmentDir(t).length;0<n&&e.push(n)}e[0]===e[1]?this.equalsegments=!0:this.equalsegments=!1,this.totallength=e[0]+e[1],this.counted=!0}},invalidate:function(){this.counted=!1}},Border:{posthook:{line:function(){var e=this.sidecell[0],t=new this.klass.CellList;if(this.isvert)for(var n=1;n<=this.board.maxbx;n+=2)t.add(this.board.getc(n,e.by));else for(n=1;n<=this.board.maxby;n+=2)t.add(this.board.getc(e.bx,n));t.each(function(e){e.invalidate()})}}},Board:{hasborder:1,rebuildInfo:function(){this.cell.each(function(e){e.counted&&e.invalidate()}),this.common.rebuildInfo.call(this)}},LineGraph:{enabled:!0},Graphic:{irowake:!0,numbercolor_func:"qnum",gridcolor_type:"LIGHT",hideHatena:!0,circleratio:[.4,.35],getCircleFillColor:function(e){return-1===e.qnum?null:0===e.ques?"white":1===e.ques?"black":null},getQuesNumberColor:function(e){return 0===e.ques?"black":"white"},textoption:{ratio:.65},minYdeg:.36,maxYdeg:.74,paint:function(){this.drawBGCells(),this.drawDashedGrid(),this.drawCircles(),this.drawQuesNumbers(),this.drawLines(),this.drawPekes(),this.drawChassis(),this.drawTarget()}},Encode:{decodePzpr:function(e){for(var t=0,n=0,i=this.outbstr,s=this.board;n<i.length&&s.cell[t];){var u=s.cell[t],l=i.charAt(n),o=this.readNumber16(i,n);-1!==o[0]?(0===o[0]?(u.ques=0,u.qnum=-2):1===o[0]?(u.ques=1,u.qnum=-2):o[0]%2==0?(u.ques=0,u.qnum=o[0]/2):(u.ques=1,u.qnum=(o[0]-1)/2),n+=o[1],t++):("g"<=l&&l<="z"&&(t+=parseInt(l,36)-15),n++)}this.outbstr=i.substr(n),this.puzzle.setConfig("loop_full",this.checkpflag("f"))},encodePzpr:function(e){this.outpflag=this.puzzle.getConfig("loop_full")?"f":null;for(var t=0,n="",i=this.board,s=0;s<i.cell.length;s++){var u=i.cell[s].qnum,u=-1===u?this.writeNumber16(-1):-2===u?this.writeNumber16(i.cell[s].ques):this.writeNumber16(2*u+i.cell[s].ques);""===u&&t++,0===t?n+=u:!u&&20!==t||(n+=(15+t).toString(36)+u,t=0)}0<t&&(n+=(15+t).toString(36)),this.outbstr+=n}},FileIO:{decodeData:function(){this.decodeConfigFlag("f","loop_full"),this.decodeCell(function(e,t){"."!==t&&(t=t.split(","),e.ques=+t[0],e.qnum=+t[1])}),this.decodeBorderLine()},encodeData:function(){this.encodeConfigFlag("f","loop_full"),this.encodeCell(function(e){return-1!==e.qnum?e.ques+","+e.qnum+" ":". "}),this.encodeBorderLine()}},AnsCheck:{checklist:["checkBranchLine","checkCrossLine","checkShortSegment","checkLongSegment","checkWhiteUnequal","checkBlackEqual","checkDeadendLine+","checkNoLineCircle","checkNoLineIfVariant","checkOneLoop"],checkShortSegment:function(){this.checkAllCell(function(e){return-1!==e.qnum&&-2!==e.qnum&&2===e.lcnt&&(e.recount(),e.totallength<e.qnum&&(e.getAllSegments().seterr(1),!0))},"segShort")},checkLongSegment:function(){this.checkAllCell(function(e){return-1!==e.qnum&&-2!==e.qnum&&2===e.lcnt&&(e.recount(),e.totallength>e.qnum&&(e.getAllSegments().seterr(1),!0))},"segLong")},checkWhiteUnequal:function(){this.checkAllCell(function(e){return-1!==e.qnum&&0===e.ques&&2===e.lcnt&&(e.recount(),!e.equalsegments&&(e.getAllSegments().seterr(1),!0))},"segWhiteUneq")},checkBlackEqual:function(){this.checkAllCell(function(e){return-1!==e.qnum&&1===e.ques&&2===e.lcnt&&(e.recount(),!!e.equalsegments&&(e.getAllSegments().seterr(1),!0))},"segBlackEq")},checkNoLineCircle:function(){this.checkAllCell(function(e){return e.isNum()&&0===e.lcnt},"circNoLine")}}});
//# sourceMappingURL=balance.js.map