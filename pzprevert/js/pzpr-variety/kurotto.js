/*! @license pzpr.js v7f9addbe (c) 2009-2025 sabo2, MIT license
 *   https://github.com/sabo2/pzprv3 */
!function(e,i){"object"==typeof module&&module.exports?module.exports=[e,i]:pzpr.classmgr.makeCustom(e,i)}(["kurotto","mines","island"],{MouseEvent:{use:!0,inputModes:{edit:["number","clear"],play:["shade","unshade"]},mouseinput_auto:function(){this.puzzle.playmode?((this.mousestart||this.mousemove)&&this.inputcell(),this.mouseend&&this.notInputted()&&this.inputqcmp()):this.puzzle.editmode&&this.mousestart&&this.inputqnum()},inputqcmp:function(){var e=this.getcell();e.isnull||e.noNum()||(e.setQcmp(+!e.qcmp),e.draw(),this.mousereset())}},"MouseEvent@island":{inputModes:{edit:["number","clear"],play:["shade","unshade","info-blk"]},dispInfoBlk:function(){var e=this.getcell();this.mousereset(),!e.isnull&&e.island&&(e.island.clist.setinfo(1),this.board.hasinfo=!0,this.puzzle.redraw())}},KeyEvent:{enablemake:!0},Cell:{numberRemainsUnshaded:!0,minnum:0,isCmp:function(){return!(-2!==this.qnum&&!this.isValidNum())&&(1===this.qcmp||!!this.puzzle.execConfig("autocmp")&&this.checkComplete())}},"Cell@island":{minnum:1},"Board@island":{addExtraInfo:function(){this.islandgraph=this.addInfoList(this.klass.AreaIslandGraph)}},"Cell@kurotto,island":{maxnum:function(){var e=this.board.cell.length-1;return e<=999?e:999},checkComplete:function(){if(!this.isValidNum())return!0;for(var e=0,i=[],t=this.getdir4clist(),l=0;l<t.length;l++){var n=t[l][0].sblk;if(null!==n){for(var s=0;s<i.length;s++)if(i[s]===n){n=null;break}null!==n&&(e+=n.clist.length,i.push(n))}}return this.qnum===e}},"Cell@mines":{maxnum:8,checkComplete:function(){if(!this.isValidNum())return!0;for(var e=0,i=[this.relcell(-2,-2),this.relcell(0,-2),this.relcell(2,-2),this.relcell(-2,0),this.relcell(2,0),this.relcell(-2,2),this.relcell(0,2),this.relcell(2,2)],t=0;t<8;t++)"cell"===i[t].group&&!i[t].isnull&&i[t].isShade()&&e++;return this.qnum===e}},"AreaShadeGraph@kurotto,island":{enabled:!0},"AreaIslandGraph:AreaShadeGraph@island":{enabled:!0,coloring:!0,relation:{"cell.qans":"node","cell.qnum":"node"},setComponentRefs:function(e,i){e.island=i},getObjNodeList:function(e){return e.islandnodes},resetObjNodeList:function(e){e.islandnodes=[]},isnodevalid:function(e){return e.isShade()||e.isNum()}},Graphic:{autocmp:"number",qanscolor:"black",setRange:function(e,i,t,l){var n=this.puzzle,s=n.board;n.execConfig("autocmp")&&(e=s.minbx-2,i=s.minby-2,t=s.maxbx+2,l=s.maxby+2),this.common.setRange.call(this,e,i,t,l)}},"Graphic@kurotto,island":{hideHatena:!0,numbercolor_func:"qnum",circleratio:[.45,.4],paint:function(){this.drawBGCells(),this.drawShadedCells(),this.drawDotCells(),this.drawGrid(),this.drawCircledNumbers(),this.drawChassis(),this.drawTarget()},getCircleFillColor:function(e){return e.isCmp()?this.qcmpcolor:null}},"Graphic@island#1":{irowakeblk:!0,getCircleFillColor:function(e){if(!e.isCmp())return null;var i=this.board.haserror||this.board.hasinfo;return this.puzzle.execConfig("irowakeblk")&&!i?"string"!=typeof(i=e.island.color)?i:i.replace("rgb","rgba").replace(")",",0.25)"):this.qcmpcolor},getShadedCellColor:function(e){if(1!==e.qans)return null;var i=this.board.haserror||this.board.hasinfo,t=e.error||e.qinfo;return 1===t?this.errcolor1:2===t?this.errcolor2:e.trial?this.trialcolor:this.puzzle.execConfig("irowakeblk")&&!i?e.island.color:this.shadecolor}},"Graphic@mines":{qcmpcolor:"rgb(127,127,127)",paint:function(){this.drawBGCells(),this.drawCircles(),this.drawDotCells(),this.drawGrid(),this.drawQuesNumbers(),this.drawChassis(),this.drawTarget()},getCircleFillColor:function(e){return this.getShadedCellColor(e)},getCircleStrokeColor:function(e){return this.getShadedCellColor(e)},getQuesNumberColor:function(e){var i=this.getQuesNumberColor_qnum(e);return 1!==(e.error||e.qinfo)&&e.isCmp()?this.qcmpcolor:i}},Encode:{decodePzpr:function(e){this.decodeNumber16()},encodePzpr:function(e){this.encodeNumber16()}},FileIO:{decodeData:function(){this.decodeCellQnum(),this.decodeCellAns()},encodeData:function(){this.encodeCellQnum(),this.encodeCellAns()}},AnsCheck:{checkCellNumber:function(e){for(var i=this.board,t=0;t<i.cell.length;t++){var l=i.cell[t];if(!l.checkComplete()){if(this.failcode.add(e),this.checkOnly)break;l.seterr(1)}}}},"AnsCheck@kurotto,island":{checklist:["checkShadeCellExist","checkCellNumber_kurotto","checkConnectShaded_island@island"],checkCellNumber_kurotto:function(){this.checkCellNumber("nmSumSizeNe")},checkConnectShaded_island:function(){this.checkOneArea(this.board.islandgraph,"csDivide")}},"AnsCheck@mines":{checklist:["checkCellNumber_mines"],checkCellNumber_mines:function(){this.checkCellNumber("nmMinesNe")}}});
//# sourceMappingURL=kurotto.js.map