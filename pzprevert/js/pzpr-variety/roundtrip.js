/*! @license pzpr.js v7f9addbe (c) 2009-2025 sabo2, MIT license
 *   https://github.com/sabo2/pzprv3 */
!function(e,t){"object"==typeof module&&module.exports?module.exports=[e,t]:pzpr.classmgr.makeCustom(e,t)}(["roundtrip"],{MouseEvent:{inputModes:{edit:["number"],play:["line","peke","info-line"]},mouseinput_number:function(){this.mousestart&&this.inputqnum_excell()},mouseinput_auto:function(){this.puzzle.playmode?"left"===this.btn?this.mousestart||this.mousemove?this.inputLine():this.mouseend&&this.notInputted()&&this.inputpeke():"right"===this.btn&&(this.mousestart||this.mousemove)&&this.inputpeke():this.puzzle.editmode&&this.mousestart&&this.inputqnum_excell()},inputqnum_excell:function(){var e=this.getpos(0).getex();e.isnull||(e!==this.cursor.getex()?this.setcursor(e):this.inputqnum_main(e))}},KeyEvent:{enablemake:!0,moveTarget:function(e){return this.moveExCell(e)},keyinput:function(e){var t=this.cursor.getex();t.isnull||this.key_inputqnum_main(t,e)}},TargetCursor:{initCursor:function(){this.init(-1,-1),this.adjust_init()}},ExCell:{disInputHatena:!0,minnum:0,maxnum:function(){var e=this.board;return this.by<0||this.by>2*e.rows?e.rows:e.cols}},Board:{cols:7,rows:7,hasborder:1,hasexcell:2,searchSight:function(e,t){var i=e.getaddr(),n=0,s=this.emptyborder,r=this.emptyborder;for(i.by===this.minby+1?n=2:i.by===this.maxby-1?n=1:i.bx===this.minbx+1?n=4:i.bx===this.maxbx-1&&(n=3),i.movedir(n,1);0!==n&&(i.movedir(n,2),!(s=i.getb()).isnull&&!s.line););if(s.isnull)return new this.klass.BorderList;for(;0!==n;)if(i.movedir(n,2),(r=i.getb()).isnull||!r.line){i.movedir(n,-2),r=i.getb();break}var o=this.borderinside(Math.min(s.bx,r.bx),Math.min(s.by,r.by),Math.max(s.bx,r.bx),Math.max(s.by,r.by));return t&&(e.error=1,o.seterr(1)),o}},LineGraph:{enabled:!0,isLineCross:!0},Graphic:{irowake:!0,gridcolor_type:"LIGHT",paint:function(){this.drawBGCells(),this.drawBGExCells(),this.drawGrid(),this.drawBorders(),this.drawNumbersExCell(),this.drawLines(),this.drawPekes(),this.drawChassis(),this.drawTarget()}},Encode:{decodePzpr:function(e){this.decodeNumber16ExCell()},encodePzpr:function(e){this.encodeNumber16ExCell()}},FileIO:{decodeData:function(){this.decodeCellExCell(function(e,t){"."===t||"excell"!==e.group||e.isnull||(e.qnum=+t)}),this.decodeBorderLine()},encodeData:function(){this.encodeCellExCell(function(e){return"excell"!==e.group||e.isnull||-1===e.qnum?". ":e.qnum+" "}),this.encodeBorderLine()}},AnsCheck:{checklist:["checkBranchLine","checkSight","checkDeadendLine+","checkOneLoop"],checkSight:function(){for(var e=this.board,t=!0,i=0;i<e.excell.length;i++){var n=e.excell[i];if(-1!==n.qnum){var s=e.searchSight(n,!1);if((0!==n.qnum||0!==s.length)&&n.qnum!==s.length+1){if(t=!1,this.checkOnly)break;n.seterr(1),e.searchSight(n,!0)}}}t||(e.border.setnoerr(),this.failcode.add("nmSightNe"))}}});
//# sourceMappingURL=roundtrip.js.map